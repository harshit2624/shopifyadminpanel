 {{ 'main-product.css' | asset_url | stylesheet_tag }}  
{{ 'product-card.css' | asset_url | stylesheet_tag }}
{%- liquid
  assign theme_st = settings
  assign section_st = section.settings
  assign section_width = section_st.section_width
  assign enable_sticky_content_on_desktop = section_st.enable_sticky_content_on_desktop
  assign enable_skeleton_loading = section_st.enable_skeleton_loading
  assign desktop_media_width = section_st.desktop_media_width
  assign desktop_layout = section_st.desktop_layout
  assign image_zoom = section_st.image_zoom
  assign user_variants_image_group = false
  assign enable_sticky_add_cart_on_desktop = section_st.enable_on_desktop
  assign enable_sticky_add_cart_on_mobile = section_st.enable_on_mobile
  assign enable_frequently_bought_together = section_st.enable_frequently_bought_together
  if settings.color_swatch_trigger != blank and settings.enable_color_swatches != false
    assign option_color_name = settings.color_swatch_trigger | split: ','
  else
    assign option_color_name = 'Color'
  endif
  assign color_scheme = section_st.color_scheme
  assign products_group = product.metafields.custom.product_grouped
  assign color = false
  for option in product.options_with_values
    for itemColor in option_color_name
      if option.name == itemColor
        assign color = true
      endif
    endfor
  endfor
  if section_st.reset_spacing
    assign reset_spacing = ' remove_spacing'
  endif
-%}
{%- capture style -%}
 --section-pt: {{ section_st.padding_top }};
  --section-pb: {{ section_st.padding_bottom }};
  --padding-left-desktop: {{ section.settings.padding_left_desktop }}px;
--padding-right-desktop: {{ section.settings.padding_right_desktop }}px;
  --speed: {{ section_st.speed }}s;
  --font-size: {{ section_st.font_size }};
    --padding-left-desktop: {{ section.settings.padding_left_desktop }}px;
  --padding-right-desktop: {{ section.settings.padding_right_desktop }}px;
  --price-text-color: {{ section.settings.price_text_color }};
{%- endcapture -%}
<div
  id="MainProduct-{{ section.id }}"
  class="section sec__featured-product product__item-js
       {% if section_st.padding_top < 30 %} pt-min{% endif %}
       {% if section_st.padding_bottom < 30 %} pb-min{% endif %}
       color-{{ color_scheme }} gradient{{ reset_spacing }}
       {% if section.settings.make_main_image_square %} is-square-image{% endif %}
       {% if section.settings.make_main_image_square and section.settings.square_on_mobile_too %} is-square-mobile{% endif %}"
  data-section="{{ section.id }}"
  data-color-trigger="{{ settings.color_swatch_trigger }}"
  data-desktop-layout="{{ desktop_layout }}"
  data-mobile-layout="{{ section_st.mobile_options }}"
  data-zoom="{{ image_zoom }}"
  style="{{ style | strip | strip_newlines }} --product-title-color: {{ section_st.product_title_color }}; --vendor-text-color: {{ section_st.vendor_text_color }}; --main-image-radius: {{ section.settings.main_image_radius }}px;"
>
  {{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}
  {%- assign first_3_d_model = product.media | where: 'media_type', 'model' | first -%}
  {%- if first_3_d_model -%}
    {{ 'component-product-model.css' | asset_url | stylesheet_tag }}
    <link
      id="ModelViewerStyle"
      rel="stylesheet"
      href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css"
      media="print"
      onload="this.media='all'"
    >
    <link
      id="ModelViewerOverride"
      rel="stylesheet"
      href="{{ 'component-model-viewer-ui.css' | asset_url }}"
      media="print"
      onload="this.media='all'"
    >
  {% endif %}
  {%- if image_zoom == 'external_zoom' or image_zoom == 'inner_zoom_circle' or image_zoom == 'inner_zoom_square' -%}
    {{ 'photoswipe.css' | asset_url | stylesheet_tag }}
    <script src="{{ 'drift.js' | asset_url }}" defer="defer"></script>
    {{ 'drift-basic.min.css' | asset_url | stylesheet_tag }}
  {% endif %}
  {% if image_zoom != 'no_zoom' %}
    {{ 'photoswipe.css' | asset_url | stylesheet_tag }}
  {% endif %}
  <script src="{{ 'photoswipe-init.js' | asset_url }}" defer="defer" type="module"></script>
  {% if enable_skeleton_loading == true %}
    {{ 'skeleton.css' | asset_url | stylesheet_tag }}
    <skeleton-page class="{{ section_width }} skeleton  block">
  {% else %}
    <div class="{{ section_width }}">
  {% endif %}
 <div
    class="flex flex-cols flex-wrap main-product"
  style="
    --col-gap-desktop: {{ section.settings.content_gap_desktop }}px;
    --col-gap-mobile:  {{ section.settings.content_gap_mobile }}px;
    --info-mt-mobile:  {{ section.settings.info_top_space_mobile }}px;
    --col-width: {{ desktop_media_width }}%;
  "
>
    {%- if product.media.size > 0 -%}
      <div class="product-detail__media col-md-w-custom w-full">
       
        {%- liquid
          assign default_position = 0
          unless product.has_only_default_variant
            assign default_position = product.selected_or_first_available_variant.featured_image.position | minus: 1
          endunless
        -%}
        {% liquid
          assign position = 1
          for opt in product.options_with_values
            for color_trigger_name in option_color_name
              if opt.name == color_trigger_name
                assign position = opt.position
              endif
            endfor
          endfor
          assign default_color_option = ''
          if position == 1
            assign default_color_option = product.selected_or_first_available_variant.option1
          elsif position == 2
            assign default_color_option = product.selected_or_first_available_variant.option2
          elsif position == 3
            assign default_color_option = product.selected_or_first_available_variant.option3
          endif
          assign media = product.media
          if product.metafields.custom.use_variants_image_group != blank and product.metafields.custom.use_variants_image_group
            assign user_variants_image_group = true
            assign alt_tags = ''
            assign first = true
            for image in product.media
              if image.alt != blank
                assign exclude_image = false
                for option in product.options_with_values
                  for value in option.values
                    if image.alt == value
                      assign exclude_image = true
                    endif
                  endfor
                endfor
                if exclude_image == false
                  if first
                    assign alt_tags = image.alt
                    assign first = false
                  else
                    assign alt_tags = alt_tags | append: ', ' | append: image.alt
                  endif
                endif
              endif
            endfor
            assign variant_media = product.media | where: 'alt', default_color_option
            assign alt_tags_list = alt_tags | split: ', '
            assign other_media = ''
            assign added_alts = ''
            for image in product.media
              for alt_tag in alt_tags_list
                if image.alt == alt_tag
                  if added_alts contains alt_tag
                  else
                    assign other_media = other_media | append: image.alt | append: ','
                    assign added_alts = added_alts | append: alt_tag | append: ','
                  endif
                endif
              endfor
            endfor
            assign combined_media = variant_media
            assign other_media_array = other_media | split: ','
            for alt_tag in other_media_array
              assign media_to_add = product.media | where: 'alt', alt_tag
              assign combined_media = combined_media | concat: media_to_add
            endfor
            assign media = combined_media
          endif
          if media.size == 0
            assign media = product.media
          endif
        %}
        {% render 'media-gallery',
          images: media,
          section_st: section_st,
          theme_st: theme_st,
          product: product,
          section: section,
          position_index: default_position,
          desktop_layout: desktop_layout
        %}
      </div>
    {% endif %}

    <div class="product-detail__information col-md-remaining w-full">
      {% if enable_sticky_content_on_desktop %}<div class="sticky top-30">{% endif %}
      {%- assign product_form_id = 'product-form-' | append: section.id -%}
      {% if section.settings.image_zoom == 'external_zoom' %}
        <div class="zoom-external-area"></div>
      {% endif %}

      {%- for block in section.blocks -%}
        {% assign block_st = block.settings %}
        {%- case block.type -%}






{%- when 'product_description' -%}
{%- assign bs = block.settings -%}

{%- comment -%}
Pick the source:
1) Custom (if enabled + provided)
2) Product description
3) Otherwise: empty (and we render nothing)
{%- endcomment -%}
{%- assign pd_source = '' -%}
{%- if bs.enable_custom_description and bs.custom_description != blank -%}
  {%- assign pd_source = bs.custom_description -%}
{%- elsif product != blank and product.description != blank -%}
  {%- assign pd_source = product.description -%}
{%- endif -%}

{%- assign pd_plain = pd_source | strip_html | strip -%}
{%- if pd_plain != '' -%}
  <div id="ProductDescription-{{ block.id }}"
       class="pd-block"
       {{ block.shopify_attributes }}
       style="
         --pd-color: {{ bs.text_color | default: '#111111' }};
         --pd-fs-d: {{ bs.font_size_d | default: 16 }}px;
         --pd-fs-m: {{ bs.font_size_m | default: 15 }}px;
         --pd-lh: {{ bs.line_height | default: 150 }};
         --pd-pl-d: {{ bs.pl_d | default: 0 }}px;
         --pd-pr-d: {{ bs.pr_d | default: 0 }}px;
         --pd-pt-d: {{ bs.pt_d | default: 0 }}px;
         --pd-pb-d: {{ bs.pb_d | default: 20 }}px;
         --pd-pl-m: {{ bs.pl_m | default: 0 }}px;
         --pd-pr-m: {{ bs.pr_m | default: 0 }}px;
         --pd-pt-m: {{ bs.pt_m | default: 0 }}px;
         --pd-pb-m: {{ bs.pb_m | default: 16 }}px;
       ">
    <div class="pd-inner{% if enable_skeleton_loading %} skeleton-loading{% endif %}">
      <div class="pd-content rte">
        {{ pd_source }}
      </div>
    </div>

    <style>
      /* scoped to this block only */
      #ProductDescription-{{ block.id }} .pd-inner{
        padding-left: var(--pd-pl-d);
        padding-right: var(--pd-pr-d);
        padding-top: var(--pd-pt-d);
        padding-bottom: var(--pd-pb-d);
      }
      #ProductDescription-{{ block.id }} .pd-content{
        color: var(--pd-color);
        text-align: left;                           /* left aligned */
        font-size: var(--pd-fs-d);
        line-height: calc(var(--pd-lh) / 100);      /* 110–240% → 1.10–2.40 */
        margin: 0;
      }
      @media (max-width: 768px){
        #ProductDescription-{{ block.id }} .pd-inner{
          padding-left: var(--pd-pl-m);
          padding-right: var(--pd-pr-m);
          padding-top: var(--pd-pt-m);
          padding-bottom: var(--pd-pb-m);
        }
        #ProductDescription-{{ block.id }} .pd-content{
          font-size: var(--pd-fs-m);
        }
      }
    </style>
  </div>
{%- endif -%}



{%- when 'countdown_badge' -%}
{%- assign bs = block.settings -%}

<div id="CountdownBadge-{{ block.id }}"
     class="cd-badge"
     {{ block.shopify_attributes }}
     role="region"
     aria-label="Countdown badge"
     style="
       /* visual */
       --cd-bg: {{ bs.bg_color | default: '#FFF1F1' }};
       --cd-border: {{ bs.border_color | default: '#F2B6B6' }};
       --cd-radius: {{ bs.radius | default: 10 }}px;

       /* heading */
       --cd-heading-color: {{ bs.heading_color | default: '#111111' }};
       --cd-heading-size-d: {{ bs.heading_size_d | default: 18 }}px;
       --cd-heading-size-m: {{ bs.heading_size_m | default: 16 }}px;
       --cd-heading-weight: {{ bs.heading_weight | default: '700' }};

       /* numbers + labels */
       --cd-number-color: {{ bs.number_color | default: '#D23B3B' }};
       --cd-number-size-d: {{ bs.number_size_d | default: 18 }}px;
       --cd-number-size-m: {{ bs.number_size_m | default: 16 }}px;
       --cd-number-weight: {{ bs.number_weight | default: '700' }};
       --cd-label-color: {{ bs.label_color | default: '#7A1F1F' }};
       --cd-label-weight: {{ bs.label_weight | default: '500' }};

       /* layout gaps */
       --cd-gap: {{ bs.item_gap | default: 6 }}px;

       /* inner paddings */
       --cd-pl-d: {{ bs.pad_left_d | default: 16 }}px;
       --cd-pr-d: {{ bs.pad_right_d | default: 16 }}px;
       --cd-pl-m: {{ bs.pad_left_m | default: 12 }}px;
       --cd-pr-m: {{ bs.pad_right_m | default: 12 }}px;

       /* outside spacing */
       --cd-mt-d: {{ bs.section_pt_d | default: 0 }}px;
       --cd-mb-d: {{ bs.section_pb_d | default: 0 }}px;
       --cd-mt-m: {{ bs.section_pt_m | default: 0 }}px;
       --cd-mb-m: {{ bs.section_pb_m | default: 0 }}px;

       /* width control (px, fixed visual width) */
       --cd-width-d: {{ bs.timer_width_d_px | default: 520 }}px;
       --cd-width-m: {{ bs.timer_width_m_px | default: 320 }}px;
     ">
  <div class="cd-card" aria-live="polite">
    <div class="cd-heading">{{ bs.heading_text }}</div>

    <div class="cd-row">
      <div class="cd-item">
        <span class="cd-num" data-cd="days">00</span>
        <span class="cd-label">{{ bs.days_label }}</span>
      </div>

      <span class="cd-sep">:</span>

      <div class="cd-item">
        <span class="cd-num" data-cd="hours">00</span>
        <span class="cd-label">{{ bs.hours_label }}</span>
      </div>

      <span class="cd-sep">:</span>

      <div class="cd-item">
        <span class="cd-num" data-cd="mins">00</span>
        <span class="cd-label">{{ bs.mins_label }}</span>
      </div>

      <span class="cd-sep">:</span>

      <div class="cd-item">
        <span class="cd-num" data-cd="secs">00</span>
        <span class="cd-label">{{ bs.secs_label }}</span>
      </div>
    </div>

    <div class="cd-ended" hidden>{{ bs.ended_text }}</div>
  </div>
</div>

<style>
  /* Outside spacing (section-level margins) */
  #CountdownBadge-{{ block.id }}{
    margin-top: var(--cd-mt-d);
    margin-bottom: var(--cd-mb-d);
  }
  @media (max-width:768px){
    #CountdownBadge-{{ block.id }}{
      margin-top: var(--cd-mt-m);
      margin-bottom: var(--cd-mb-m);
    }
  }

  /* Card (visual and width) */
  #CountdownBadge-{{ block.id }} .cd-card{
    background: var(--cd-bg);
    border: 1px solid var(--cd-border);
    border-radius: var(--cd-radius);
    padding: 12px var(--cd-pr-d) 12px var(--cd-pl-d);
    width: var(--cd-width-d);        /* fixed desktop width in px */
    max-width: 100%;                 /* never overflow parent */
    box-sizing: border-box;
  }
  @media (max-width:768px){
    #CountdownBadge-{{ block.id }} .cd-card{
      padding-left: var(--cd-pl-m);
      padding-right: var(--cd-pr-m);
      width: var(--cd-width-m);      /* fixed mobile width in px */
    }
  }

  /* Heading */
  #CountdownBadge-{{ block.id }} .cd-heading{
    margin: 0 0 6px 0;
    color: var(--cd-heading-color);
    font-size: var(--cd-heading-size-d);
    font-weight: var(--cd-heading-weight);
    line-height: 1.25;
  }
  @media (max-width:768px){
    #CountdownBadge-{{ block.id }} .cd-heading{
      font-size: var(--cd-heading-size-m);
    }
  }

  /* Timer row */
  #CountdownBadge-{{ block.id }} .cd-row{
    display: inline-flex;
    align-items: baseline;
    gap: var(--cd-gap);
    flex-wrap: wrap;
  }

  #CountdownBadge-{{ block.id }} .cd-item{
    display: inline-flex;
    align-items: baseline;
    gap: 6px;
  }

  /* Numbers + labels */
  #CountdownBadge-{{ block.id }} .cd-num{
    color: var(--cd-number-color);
    font-size: var(--cd-number-size-d);
    font-weight: var(--cd-number-weight);
    line-height: 1;
  }
  @media (max-width:768px){
    #CountdownBadge-{{ block.id }} .cd-num{
      font-size: var(--cd-number-size-m);
    }
  }

  #CountdownBadge-{{ block.id }} .cd-label{
    color: var(--cd-label-color);
    font-weight: var(--cd-label-weight);
    line-height: 1.1;
  }

  #CountdownBadge-{{ block.id }} .cd-sep{
    color: var(--cd-number-color);
    font-weight: var(--cd-number-weight);
    line-height: 1;
  }

  /* Ended text */
  #CountdownBadge-{{ block.id }} .cd-ended{
    margin-top: 6px;
    color: var(--cd-number-color);
    font-weight: var(--cd-number-weight);
  }
</style>

<script>
(function(){
  const root = document.getElementById('CountdownBadge-{{ block.id }}');
  if(!root) return;

  const endedEl = root.querySelector('.cd-ended');

  // Only fixed end time (ISO). Duration mode removed.
  const onEnd  = {{ bs.on_end | json }};          // "zeros" | "ended" | "restart"
  const endISO = {{ bs.end_iso | json }};

  // Restart durations (ms) from sliders
  function toMs(d,h,m,s){ return (((+d||0)*24 + (+h||0))*60 + (+m||0))*60*1000 + (+s||0)*1000; }
  const restartMs = toMs({{ bs.restart_days | default: 1 }}, {{ bs.restart_hours | default: 0 }}, {{ bs.restart_minutes | default: 0 }}, {{ bs.restart_seconds | default: 0 }}) || (24*60*60*1000);

  function parseISO(iso){
    if(!iso) return null;
    const d = new Date(iso);
    return isNaN(d) ? null : d;
  }
  function now(){ return Date.now(); }
  function parts(ms){
    if(ms < 0) ms = 0;
    const s = Math.floor(ms/1000);
    const days  = Math.floor(s / 86400);
    const hrs   = Math.floor((s % 86400) / 3600);
    const mins  = Math.floor((s % 3600) / 60);
    const secs  = (s % 60);
    return {days, hrs, mins, secs};
  }
  const pad2 = n => String(n).padStart(2,'0');

  const els = {
    days:  root.querySelector('[data-cd="days"]'),
    hours: root.querySelector('[data-cd="hours"]'),
    mins:  root.querySelector('[data-cd="mins"]'),
    secs:  root.querySelector('[data-cd="secs"]')
  };

  function writeZeros(){
    if(els.days)  els.days.textContent  = '00';
    if(els.hours) els.hours.textContent = '00';
    if(els.mins)  els.mins.textContent  = '00';
    if(els.secs)  els.secs.textContent  = '00';
  }
  function showEnded(show){
    if(!endedEl) return;
    endedEl.hidden = !show;
  }

  // Establish end time (absolute ISO or fallback +24h)
  function initEnd(){
    const abs = parseISO(endISO);
    if (abs) return abs.getTime();
    // Fallback: +24h from now if no valid ISO is provided
    return now() + (24*60*60*1000);
  }

  let endTs = initEnd();

  function tick(){
    const diff = endTs - now();

    if(diff <= 0){
      if(onEnd === 'restart'){
        endTs = now() + restartMs;
        showEnded(false);
      } else if(onEnd === 'ended'){
        writeZeros();
        showEnded(true);
        return;
      } else {
        writeZeros();
        showEnded(false);
        return;
      }
    }

    const p = parts(diff);
    if(els.days)  els.days.textContent  = String(p.days);
    if(els.hours) els.hours.textContent = pad2(p.hrs);
    if(els.mins)  els.mins.textContent  = pad2(p.mins);
    if(els.secs)  els.secs.textContent  = pad2(p.secs);
    showEnded(false);
  }

  tick();
  const timer = setInterval(tick, 1000);
  const obs = new MutationObserver(()=>{ if(!document.body.contains(root)){ clearInterval(timer); obs.disconnect(); }});
  obs.observe(document.body, {childList:true, subtree:true});
})();
</script>






{%- when 'lod_donation_badge' -%}
{%- assign bs = block.settings -%}

{% style %}
#DonationBadge-{{ block.id }}{

  margin-top: {{ bs.section_margin_top_d }}px !important;
  margin-bottom: {{ bs.section_margin_bottom_d }}px !important;
  padding-left: {{ bs.section_pl_d }}px !important;
  padding-right: {{ bs.section_pr_d }}px !important;
  background: transparent !important; 
}

#DonationBadge-{{ block.id }} .lod-badge__wrap{
  width: 100% !important;
  max-width: {{ bs.badge_width_d }}px !important; 
}

#DonationBadge-{{ block.id }} .lod-badge{
  display: flex !important;
  align-items: center !important;
  gap: {{ bs.icon_gap }}px !important; 
  background: {{ bs.badge_bg }} !important;
  color: {{ bs.text_color }} !important; 
  border: {{ bs.border_weight }}px solid {{ bs.border_color }} !important;
  border-radius: 12px !important;
  padding: {{ bs.badge_pt_d }}px {{ bs.badge_pr_d }}px {{ bs.badge_pb_d }}px {{ bs.badge_pl_d }}px !important; /* desktop badge padding */
  line-height: 1.4 !important;
  font-weight: inherit !important;  
  font-family: inherit !important;  
}


#DonationBadge-{{ block.id }} .lod-badge__icon{
  flex: 0 0 auto !important;
  display: grid !important;
  place-items: center !important;
  width: {{ bs.icon_size_d }}px !important;
  height: {{ bs.icon_size_d }}px !important;
  color: {{ bs.icon_color }} !important; 
}

#DonationBadge-{{ block.id }} .lod-badge__icon svg{
  width: 100% !important;
  height: 100% !important;
  display: block !important;
  fill: currentColor !important;
  stroke: currentColor !important;
}


#DonationBadge-{{ block.id }} .lod-badge__img{
  width: {{ bs.image_size_d }}px !important;
  height: {{ bs.image_size_d }}px !important;
  object-fit: contain !important;
  display: block !important;
}


#DonationBadge-{{ block.id }} .lod-badge__text{
  font-size: {{ bs.text_size_d }}px !important; 
  color: {{ bs.text_color }} !important;
  margin: 0 !important;
}


#DonationBadge-{{ block.id }} .lod-badge__text--d{ display:inline !important; }
#DonationBadge-{{ block.id }} .lod-badge__text--m{ display:none !important; }


@media (max-width: 749px){
  #DonationBadge-{{ block.id }}{
    margin-top: {{ bs.section_margin_top_m }}px !important;
    margin-bottom: {{ bs.section_margin_bottom_m }}px !important;
    padding-left: {{ bs.section_pl_m }}px !important;
    padding-right: {{ bs.section_pr_m }}px !important;
  }
  #DonationBadge-{{ block.id }} .lod-badge__wrap{
    max-width: {{ bs.badge_width_m }}px !important; 
  }
  #DonationBadge-{{ block.id }} .lod-badge{
    padding: {{ bs.badge_pt_m }}px {{ bs.badge_pr_m }}px {{ bs.badge_pb_m }}px {{ bs.badge_pl_m }}px !important; /* mobile badge padding */
  }
  #DonationBadge-{{ block.id }} .lod-badge__icon{
    width: {{ bs.icon_size_m }}px !important;
    height: {{ bs.icon_size_m }}px !important;
  }
  #DonationBadge-{{ block.id }} .lod-badge__img{
    width: {{ bs.image_size_m }}px !important;
    height: {{ bs.image_size_m }}px !important;
  }
  #DonationBadge-{{ block.id }} .lod-badge__text{
    font-size: {{ bs.text_size_m }}px !important; 
  }

  #DonationBadge-{{ block.id }} .lod-badge__text--d{ display:none !important; }
  #DonationBadge-{{ block.id }} .lod-badge__text--m{ display:inline !important; }
}
{% endstyle %}

<div id="DonationBadge-{{ block.id }}" {{ block.shopify_attributes }}>
  <div class="lod-badge__wrap">
    <div class="lod-badge">
      <div class="lod-badge__icon" aria-hidden="true">
        {%- if bs.use_image and bs.icon_image != blank -%}
          {{ bs.icon_image | image_url: width: bs.image_size_d | image_tag: loading: 'lazy', class: 'lod-badge__img', alt: '' }}
        {%- else -%}
          {%- if bs.icon_svg != blank -%}
            {{ bs.icon_svg }}
          {%- else -%}
            <!-- Default icon (uses currentColor for CSS-controlled color) -->
            <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M106.003,348.768c12.848-115.627,86.282-211.197,185.781-257.238C268.378,53.37,236.62,22.365,199.921,0
                C62.447,65.536-2.416,227.413,54.819,370.914c14.055,35.265,34.373,66.122,58.994,92.125
                C104.455,425.92,101.726,387.261,106.003,348.768z" fill="currentColor"/>
              <path d="M439.482,93.253C287.34,86.361,153.924,198.646,136.859,352.197c-6.209,55.924,3.883,109.888,26.406,157.215
                c2.134,0.289,4.225,0.63,6.35,0.866c152.43,16.933,289.722-92.903,306.654-245.325C483.17,202.836,469.01,143.23,439.482,93.253z
                M290.952,345.279c-48.56,75.218-93.716,132.454-100.854,127.853c-7.119-4.609,26.484-69.305,75.078-144.515
                c48.577-75.218,93.734-132.455,100.862-127.854C373.177,205.373,339.556,270.069,290.952,345.279z" fill="currentColor"/>
            </svg>
          {%- endif -%}
        {%- endif -%}
      </div>

   
      <p class="lod-badge__text lod-badge__text--d">{{ bs.badge_text_d }}</p>
      <p class="lod-badge__text lod-badge__text--m">{{ bs.badge_text_m }}</p>
    </div>
  </div>
</div>




{%- when 'social_proof_inline' -%}
{%- assign s = block.settings -%}

{%- assign r_times = s.rating | times: 10 -%}
{%- assign r_round = r_times | round -%}
{%- assign r_norm  = r_round | divided_by: 10.0 -%}
{%- assign full    = r_norm | floor -%}
{%- assign frac    = r_norm | minus: full -%}
{%- assign half    = 0 -%}{% if frac >= 0.5 %}{% assign half = 1 %}{% endif %}
{%- assign next_i  = full | plus: 1 -%}

{% style %}
#SP-{{ block.id }}{
  margin: {{ s.mt_d | default: 8 }}px {{ s.pr_d | default: 0 }}px {{ s.mb_d | default: 8 }}px {{ s.pl_d | default: 0 }}px;
}
@media (max-width:749px){
  #SP-{{ block.id }}{
    margin: {{ s.mt_m | default: 6 }}px {{ s.pr_m | default: 0 }}px {{ s.mb_m | default: 6 }}px {{ s.pl_m | default: 0 }}px;
  }
}

#SP-{{ block.id }} .sp-wrap {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  justify-content: flex-start;
  gap: {{ s.gap_avatars_text | default: 8 }}px;
  background: {{ s.bg_color | default: 'transparent' }};
  border-radius: {{ s.bg_radius | default: 0 }}px;
  padding: {{ s.bg_padding_y | default: 0 }}px {{ s.bg_padding_x | default: 0 }}px;
}

/* Fix: when no text or avatars, remove the phantom gap */
#SP-{{ block.id }} .sp-wrap:empty,
#SP-{{ block.id }} .sp-wrap:has(.sp-stars:only-child) {
  justify-content: flex-start;
  gap: 0;
}

#SP-{{ block.id }} .sp-avatars {
  display: inline-flex;
  align-items: center;
}

#SP-{{ block.id }} .sp-avatar {
  width: {{ s.avatar_size | default: 22 }}px;
  height: {{ s.avatar_size | default: 22 }}px;
  border-radius: 999px;
  overflow: hidden;
  flex: 0 0 auto;
  background: #ddd;
  border: {{ s.avatar_border_width | default: 2 }}px solid {{ s.avatar_border_color | default: '#fff' }};
  box-sizing: content-box;
}

#SP-{{ block.id }} .sp-avatar + .sp-avatar {
  margin-left: calc(-1 * ({{ s.avatar_overlap | default: 55 }} / 100) * {{ s.avatar_size | default: 22 }}px);
}

#SP-{{ block.id }} .sp-text {
  margin: 0;
  line-height: 1.1;
  white-space: nowrap;
  color: {{ s.text_color | default: '#222222' }};
  font-size: {{ s.text_size | default: 16 }}px;
  font-weight: {{ s.text_weight | default: '600' }};
}

/* Stars alignment fix */
#SP-{{ block.id }} .sp-stars {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  margin-left: 0 !important;
}

#SP-{{ block.id }} .sp-star {
  width: {{ s.star_size | default: 18 }}px;
  height: {{ s.star_size | default: 18 }}px;
  display: inline-block;
}

#SP-{{ block.id }} .sp-star svg {
  width: 100%;
  height: 100%;
  display: block;
  fill: {{ s.star_color | default: '#F39C33' }};
}

#SP-{{ block.id }} .sp-star--empty svg {
  fill: #E6E6E6;
}

#SP-{{ block.id }} .sp-star--half {
  position: relative;
}

#SP-{{ block.id }} .sp-star--half svg {
  fill: #E6E6E6;
}

#SP-{{ block.id }} .sp-star--half::after {
  content: "";
  position: absolute;
  inset: 0;
  width: 50%;
  background: {{ s.star_color | default: '#F39C33' }};
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M12 3.7l2.1 4.25 4.7.68-3.4 3.31.8 4.64L12 14.96 7.8 16.58l.8-4.64L5.2 8.63l4.7-.68L12 3.7z"/></svg>') no-repeat center/contain;
          mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M12 3.7l2.1 4.25 4.7.68-3.4 3.31.8 4.64L12 14.96 7.8 16.58l.8-4.64L5.2 8.63l4.7-.68L12 3.7z"/></svg>') no-repeat center/contain;
}
{% endstyle %}

{%- assign ph_url = 'https://blocks.astratic.com/img/general-img-landscape.png0' -%}

<div id="SP-{{ block.id }}" {{ block.shopify_attributes }}>
  <div class="sp-wrap">
    {%- if s.show_avatars -%}
      <div class="sp-avatars" aria-hidden="true">
        {%- if s.a1_en -%}
          <span class="sp-avatar">
            {%- if s.a1 != blank -%}
              <img src="{{ s.a1 | image_url: width: 120 }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- else -%}
              <img src="{{ ph_url }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- endif -%}
          </span>
        {%- endif -%}
        {%- if s.a2_en -%}
          <span class="sp-avatar">
            {%- if s.a2 != blank -%}
              <img src="{{ s.a2 | image_url: width: 120 }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- else -%}
              <img src="{{ ph_url }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- endif -%}
          </span>
        {%- endif -%}
        {%- if s.a3_en -%}
          <span class="sp-avatar">
            {%- if s.a3 != blank -%}
              <img src="{{ s.a3 | image_url: width: 120 }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- else -%}
              <img src="{{ ph_url }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- endif -%}
          </span>
        {%- endif -%}
        {%- if s.a4_en -%}
          <span class="sp-avatar">
            {%- if s.a4 != blank -%}
              <img src="{{ s.a4 | image_url: width: 120 }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- else -%}
              <img src="{{ ph_url }}" alt="" style="width:100%;height:100%;object-fit:cover;" loading="lazy">
            {%- endif -%}
          </span>
        {%- endif -%}
      </div>
    {%- endif -%}

    <p class="sp-text">{{ s.label_text }}</p>

    {%- if s.show_stars -%}
      <span class="sp-stars" aria-hidden="true">
        {%- for i in (1..5) -%}
          {%- assign cls = '' -%}
          {%- if i <= full -%}
            {%- assign cls = '' -%}
          {%- elsif i == next_i and half == 1 -%}
            {%- assign cls = 'sp-star--half' -%}
          {%- else -%}
            {%- assign cls = 'sp-star--empty' -%}
          {%- endif -%}
          <span class="sp-star {{ cls }}">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3.7l2.1 4.25 4.7.68-3.4 3.31.8 4.64L12 14.96 7.8 16.58l.8-4.64L5.2 8.63l4.7-.68L12 3.7z"/>
            </svg>
          </span>
        {%- endfor -%}
      </span>
    {%- endif -%}
  </div>
</div>






{%- when 'pair_with_upsell' -%}
{%- assign s = block.settings -%}

{%- assign selected_products = '' -%}
{%- if s.p1 != blank -%}{%- assign selected_products = selected_products | append: 'p1,' -%}{%- endif -%}
{%- if s.p2 != blank -%}{%- assign selected_products = selected_products | append: 'p2,' -%}{%- endif -%}
{%- if s.p3 != blank -%}{%- assign selected_products = selected_products | append: 'p3,' -%}{%- endif -%}
{%- if s.p4 != blank -%}{%- assign selected_products = selected_products | append: 'p4,' -%}{%- endif -%}
{%- if s.p5 != blank -%}{%- assign selected_products = selected_products | append: 'p5,' -%}{%- endif -%}
{%- assign selected_products = selected_products | split: ',' | compact -%}

{%- if selected_products.size > 0 -%}
<style>
  #PairWith-{{ block.id }}{
    --pw-mt: {{ s.mt_d | default: 24 }}px;
    --pw-mb: {{ s.mb_d | default: 24 }}px;
    --pw-pl: {{ s.pl_d | default: 0 }}px;
    --pw-pr: {{ s.pr_d | default: 0 }}px;
    --pw-mt-m: {{ s.mt_m | default: 16 }}px;
    --pw-mb-m: {{ s.mb_m | default: 16 }}px;
    --pw-pl-m: {{ s.pl_m | default: 0 }}px;
    --pw-pr-m: {{ s.pr_m | default: 0 }}px;

    --pw-gap-d: {{ s.gap_d | default: 12 }}px;
    --pw-gap-m: {{ s.gap_m | default: 10 }}px;
    --pw-perrow-d: {{ s.per_row_d | default: 1.3 }};
    --pw-perrow-m: {{ s.per_row_m | default: 1.1 }};

    --pw-card-bg: {{ s.card_bg | default: '#ffffff' }};
    --pw-card-bc: {{ s.card_border_color | default: '#e5e5e5' }};
    --pw-card-bw: {{ s.card_border_width | default: 1 }}px;
    --pw-card-radius: {{ s.card_radius | default: 10 }}px;
    --pw-card-pad: {{ s.card_padding | default: 12 }}px;

    --pw-img-size: {{ s.image_size | default: 88 }}px;
    --pw-img-radius: {{ s.image_radius | default: 8 }}px;

    --pw-title-size: {{ s.title_size | default: 16 }}px;
    --pw-text-size: {{ s.text_size | default: 14 }}px;
    --pw-text-color: {{ s.text_color | default: '#111111' }};
    --pw-price-color: {{ s.price_color | default: '#111111' }};

    --pw-btn-radius: {{ s.btn_radius | default: 999 }}px;
    --pw-btn-bg: {{ s.btn_bg | default: '#f0f0f0' }};
    --pw-btn-text: {{ s.btn_text | default: '#111111' }};
    --pw-btn-border: {{ s.btn_border | default: '#d7d7d7' }};
    --pw-btn-bw: {{ s.btn_bw | default: 1 }}px;
    --pw-btn-bg-added: {{ s.btn_bg_added | default: '#2f6fe0' }};
    --pw-btn-text-added: {{ s.btn_text_added | default: '#ffffff' }};

    --pw-tab-bg: {{ s.tab_bg | default: '#ffffff' }};
    --pw-tab-border: {{ s.tab_border | default: '#e5e5e5' }};
    --pw-tab-radius: {{ s.tab_radius | default: 12 }}px;

    --pw-sel-h: 32px;
    --pw-sel-px: 10px;
    --pw-sel-fs: {{ s.text_size | default: 14 }}px;
  }

  #PairWith-{{ block.id }}{ margin: var(--pw-mt) var(--pw-pr) var(--pw-mb) var(--pw-pl); }
  @media (max-width:749px){
    #PairWith-{{ block.id }}{ margin: var(--pw-mt-m) var(--pw-pr-m) var(--pw-mb-m) var(--pw-pl-m); }
  }

  #PairWith-{{ block.id }} .pw-wrap{ color: var(--pw-text-color); }
  #PairWith-{{ block.id }} .pw-heading{ font: inherit; font-weight: inherit; margin: 0 0 10px; }


  #PairWith-{{ block.id }} .pw-track{ display:flex; gap:var(--pw-gap-d); overflow:hidden; }
  {% if s.layout == 'slider' %}
  #PairWith-{{ block.id }} .pw-track{ overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; scrollbar-width:none; padding-bottom:2px; }
  #PairWith-{{ block.id }} .pw-track::-webkit-scrollbar{display:none;}
  {% endif %}


 {% if s.layout == 'slider' %}
#PairWith-{{ block.id }} .pw-track-wrap{ position:relative; }
#PairWith-{{ block.id }} .pw-track-wrap::after{
  content:""; position:absolute; top:0; bottom:0; right:0; width:36px; pointer-events:none; display:none;
}

#PairWith-{{ block.id }} .pw-track-wrap.fade-white::after { 
  display:block; 
  background:linear-gradient(270deg, rgba(255,255,255,.9), rgba(255,255,255,0)); 
}

#PairWith-{{ block.id }} .pw-track-wrap.fade-black::after { 
  display:block; 
  background:linear-gradient(270deg, rgba(0,0,0,.08), rgba(0,0,0,0)); 
}
{% endif %}

  /* CARD */
  #PairWith-{{ block.id }} .pw-card{
    flex:0 0 calc((100%/var(--pw-perrow-d)) - (var(--pw-gap-d)*(var(--pw-perrow-d) - 1)/var(--pw-perrow-d)));
    min-width:calc((100%/var(--pw-perrow-d)) - (var(--pw-gap-d)*(var(--pw-perrow-d) - 1)/var(--pw-perrow-d)));
    background:var(--pw-card-bg);
    border:var(--pw-card-bw) solid var(--pw-card-bc);
    border-radius:var(--pw-card-radius);
    padding:var(--pw-card-pad);
    box-sizing:border-box;
    scroll-snap-align:start;
  }
  @media (max-width:749px){
    #PairWith-{{ block.id }} .pw-track{ gap:var(--pw-gap-m); }
    #PairWith-{{ block.id }} .pw-card{
      flex-basis:calc((100%/var(--pw-perrow-m)) - (var(--pw-gap-m)*(var(--pw-perrow-m) - 1)/var(--pw-perrow-m)));
      min-width:calc((100%/var(--pw-perrow-m)) - (var(--pw-gap-m)*(var(--pw-perrow-m) - 1)/var(--pw-perrow-m)));
    }
  }

  #PairWith-{{ block.id }} .pw-top{
    display:grid; grid-template-columns:var(--pw-img-size) 1fr; align-items:center; gap:12px;
    background:var(--pw-tab-bg); border:1px solid var(--pw-tab-border); border-radius:var(--pw-tab-radius); padding:10px;
  }
  #PairWith-{{ block.id }} .pw-img{ width:var(--pw-img-size); height:var(--pw-img-size); border-radius:var(--pw-img-radius); object-fit:cover; background:#f2f2f2; }
  #PairWith-{{ block.id }} .pw-title{ font-size:var(--pw-title-size); line-height:1.25; margin:0; font-weight: 600; }

  #PairWith-{{ block.id }} .pw-variant-wrap{ margin-top:8px; position:relative; }
  #PairWith-{{ block.id }} .pw-variant{
    appearance:none; -webkit-appearance:none; -moz-appearance:none;
    display:block; width:100%; height:var(--pw-sel-h);
    padding:0 calc(var(--pw-sel-px) + 16px) 0 var(--pw-sel-px);
    font-size:var(--pw-sel-fs);
    border:1px solid var(--pw-tab-border); border-radius:8px; background:#fff; color:var(--pw-text-color);
    line-height:var(--pw-sel-h); cursor:pointer;
  }
  #PairWith-{{ block.id }} .pw-variant-wrap::after{
    content:""; position:absolute; right:10px; top:50%; width:8px; height:8px;
    border-right:2px solid #666; border-bottom:2px solid #666; transform:translateY(-60%) rotate(45deg);
    pointer-events:none;
  }

  #PairWith-{{ block.id }} .pw-bottom{ margin-top:10px; display:flex; align-items:center; justify-content:space-between; gap:12px; }
  #PairWith-{{ block.id }} .pw-price{ color:var(--pw-price-color); font-size:var(--pw-text-size); font-weight:600; white-space:nowrap; }

  #PairWith-{{ block.id }} .pw-btn{
    border-radius:var(--pw-btn-radius);
    border:var(--pw-btn-bw) solid var(--pw-btn-border);
    background:var(--pw-btn-bg);
    color:var(--pw-btn-text);
    padding:8px 14px; font-size:var(--pw-text-size); line-height:1;
    cursor:pointer; transition:background .18s ease, color .18s ease, border-color .18s ease;
    white-space:nowrap;
  }
  #PairWith-{{ block.id }} .pw-btn.is-added{
    background:var(--pw-btn-bg-added);
    color:var(--pw-btn-text-added);
    border-color:var(--pw-btn-bg-added);
  }

  {% if s.layout == 'grid' %}
    #PairWith-{{ block.id }} .pw-track{ flex-wrap:wrap; overflow:visible; }
  {% endif %}

  {% if s.layout == 'slider' %}
  #PairWith-{{ block.id }} .pw-nav{ margin-top:10px; display:flex; justify-content:space-between; gap:8px; }
  #PairWith-{{ block.id }} .pw-arrow{ width:36px; height:36px; border-radius:999px; background:#fff; border:1px solid #dcdcdc; display:grid; place-items:center; cursor:pointer; }
  #PairWith-{{ block.id }} .pw-arrow svg{ width:18px; height:18px; }
  {% endif %}
</style>

<div id="PairWith-{{ block.id }}" {{ block.shopify_attributes }}>
  <div class="pw-wrap">
    {%- if s.heading != blank -%}
      <h3 class="pw-heading">{{ s.heading }}</h3>
    {%- endif -%}

    {% if s.layout == 'slider' %}<div class="pw-track-wrap" data-fade-wrap>{% endif %}
      <div class="pw-track" id="pw-track-{{ block.id }}" {% if s.layout == 'slider' %}data-track{% endif %}>
        {%- for key in selected_products -%}
          {%- assign product_obj = s[key] -%}
          {%- if product_obj != blank -%}
            {%- assign product_ref = all_products[product_obj] -%}
            {%- if product_ref != nil -%}
              {%- assign featured = product_ref.featured_image -%}
              <div class="pw-card" data-product-id="{{ product_ref.id }}">
                <div class="pw-top">
                  {%- if featured -%}
                    <img class="pw-img" src="{{ featured | image_url: width: 300 }}" alt="{{ featured.alt | escape }}">
                  {%- else -%}
                    <div class="pw-img" style="display:grid;place-items:center;color:#bbb;">No image</div>
                  {%- endif -%}
                  <div>
                    <p class="pw-title">{{ product_ref.title }}</p>

                    <div class="pw-variant-wrap">
                      <select class="pw-variant" data-variant-select aria-label="{{ product_ref.title }} variant">
                        {%- for v in product_ref.variants -%}
                          {%- capture v_label -%}
                            {%- if v.title == 'Default Title' -%}
                              {{ 'products.product.default' | t | default: 'Default' }}
                            {%- else -%}
                              {{ v.title }}
                            {%- endif -%}
                          {%- endcapture -%}
                          <option value="{{ v.id }}" {% unless v.available %}disabled{% endunless %}>
                            {{- v_label -}}
                          </option>
                        {%- endfor -%}
                      </select>
                    </div>
                  </div>
                </div>

                <div class="pw-bottom">
                  <span class="pw-price" data-price data-cents="{{ product_ref.variants.first.price }}"></span>
                  <button class="pw-btn" data-add-btn type="button" aria-live="polite">
                    {{ s.btn_label | default: 'Add product' }}
                  </button>
                </div>
              </div>
            {%- endif -%}
          {%- endif -%}
        {%- endfor -%}
      </div>
    {% if s.layout == 'slider' %}</div>{% endif %}

    {% if s.layout == 'slider' %}
    <div class="pw-nav">
      <button class="pw-arrow" type="button" data-prev aria-label="Previous">
        <svg viewBox="0 0 24 24"><path d="M15.4 6l-6 6 6 6 1.4-1.4L11.2 12l5.6-4.6L15.4 6z" fill="currentColor"/></svg>
      </button>
      <button class="pw-arrow" type="button" data-next aria-label="Next">
        <svg viewBox="0 0 24 24"><path d="M8.6 18l6-6-6-6-1.4 1.4L12.8 12l-5.6 4.6L8.6 18z" fill="currentColor"/></svg>
      </button>
    </div>
    {% endif %}
  </div>
</div>

<script>
(function(){
  var root  = document.getElementById('PairWith-{{ block.id }}');
  if(!root) return;

  var DISPLAY_CURRENCY = {{ s.price_currency | default: 'shop' | json }};
  var CURRENCY_CODE = (DISPLAY_CURRENCY === 'shop') ? {{ shop.currency | json }} : DISPLAY_CURRENCY;
  var RATE = (DISPLAY_CURRENCY === 'shop') ? 1 : ({{ s.currency_rate | default: 1.0 }});

  function formatMoneyFromCents(cents){
    var value = ((cents || 0) * RATE) / 100;
    try{
      return (new Intl.NumberFormat('{{ shop.locale }}', { style:'currency', currency: CURRENCY_CODE })).format(value);
    }catch(e){

      var fmt = {{ shop.money_format | json }};
      var str = value.toFixed(2);
      return (DISPLAY_CURRENCY === 'shop') ? fmt.replace('{{amount}}', str).replace('{{ amount }}', str)
        : (new Intl.NumberFormat('en', { style:'currency', currency: CURRENCY_CODE })).format(value);
    }
  }


  root.querySelectorAll('[data-price]').forEach(function(node){
    var cents = parseInt(node.getAttribute('data-cents'), 10);
    node.textContent = formatMoneyFromCents(cents);
  });


  root.querySelectorAll('[data-variant-select]').forEach(function(sel){
    var priceNode = sel.closest('.pw-card').querySelector('[data-price]');
    function updatePrice(){
      var v = sel.value; if(!v || !priceNode) return;
      fetch('/variants/'+v+'.js').then(function(r){ return r.json(); }).then(function(json){
        priceNode.setAttribute('data-cents', json.price);
        priceNode.textContent = formatMoneyFromCents(json.price);
        refreshAddedStateForCard(sel.closest('.pw-card'));
      }).catch(function(){});
    }
    updatePrice();
    sel.addEventListener('change', updatePrice);
  });


  root.querySelectorAll('[data-add-btn]').forEach(function(btn){
    btn.addEventListener('click', function(){
      var card = btn.closest('.pw-card');
      var sel  = card.querySelector('[data-variant-select]');
      if(!sel || !sel.value) return;
      var variantId = sel.value;

      if(btn.classList.contains('is-added')){
        btn.disabled = true;
        fetch('/cart/update.js',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({updates:{[variantId]:0}})})
        .then(function(r){ if(!r.ok) throw 0; return r.json(); })
        .then(function(){ btn.classList.remove('is-added'); btn.textContent='{{ s.btn_label | default: "Add product" }}'; })
        .catch(function(){ pulseError(btn); })
        .finally(function(){ btn.disabled=false; });
        return;
      }

      btn.disabled = true;
      fetch('/cart/add.js',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:variantId,quantity:1})})
      .then(function(r){ if(!r.ok) throw 0; return r.json(); })
      .then(function(){ btn.classList.add('is-added'); btn.textContent='{{ s.btn_label_added | default: "Added" }}'; })
      .catch(function(){ pulseError(btn); })
      .finally(function(){ btn.disabled=false; });
    });
  });

  function pulseError(btn){
    var old = btn.style.borderColor; btn.style.borderColor = '#e11d48';
    setTimeout(function(){ btn.style.borderColor = old || ''; }, 700);
  }


  var cartCache = null;
  function fetchCart(){ return cartCache ? Promise.resolve(cartCache) : fetch('/cart.js').then(function(r){return r.json();}).then(function(j){cartCache=j; return j;}); }
  function refreshAddedStateForCard(card){
    var btn = card.querySelector('[data-add-btn]'); var sel = card.querySelector('[data-variant-select]');
    if(!btn || !sel) return; var vid = sel.value;
    fetchCart().then(function(cart){
      var inCart = cart.items.some(function(it){ return String(it.id) === String(vid); });
      if(inCart){ btn.classList.add('is-added'); btn.textContent='{{ s.btn_label_added | default: "Added" }}'; }
      else { btn.classList.remove('is-added'); btn.textContent='{{ s.btn_label | default: "Add product" }}'; }
    });
  }
  fetchCart().then(function(){ root.querySelectorAll('.pw-card').forEach(refreshAddedStateForCard); });

  {% if s.layout == 'slider' %}

  var track = document.getElementById('pw-track-{{ block.id }}');
  var prev  = root.querySelector('[data-prev]');
  var next  = root.querySelector('[data-next]');
  if(track && prev && next){
    function itemWidth(){
      var first = track.querySelector('.pw-card'); var gap = parseInt(getComputedStyle(track).gap || '0',10);
      return first ? first.getBoundingClientRect().width + gap : 0;
    }
    prev.addEventListener('click', function(){ track.scrollBy({left:-itemWidth(), behavior:'smooth'}); });
    next.addEventListener('click', function(){ track.scrollBy({left: itemWidth(), behavior:'smooth'}); });
  }


  (function(){
    var wrap = root.querySelector('[data-fade-wrap]'); if(!wrap) return;
    function parseRGB(str){ var m = str.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i); if(!m) return [255,255,255]; return [parseInt(m[1],10), parseInt(m[2],10), parseInt(m[3],10)]; }
    function luminance(r,g,b){ r/=255; g/=255; b/=255; return 0.2126*r + 0.7152*g + 0.0722*b; }
    var bg = getComputedStyle(root).backgroundColor; if(!bg || bg==='rgba(0, 0, 0, 0)' || bg==='transparent'){ bg = getComputedStyle(document.body).backgroundColor; }
    var rgb = parseRGB(bg); var L = luminance(rgb[0], rgb[1], rgb[2]);
    wrap.classList.remove('fade-white','fade-black');
    if(L >= 0.92){ wrap.classList.add('fade-white'); }
    else if(L <= 0.08){ wrap.classList.add('fade-black'); }
  })();
  {% endif %}
})();
</script>


{%- for key in selected_products -%}
  {%- assign product_obj = s[key] -%}
  {%- if product_obj != blank and all_products[product_obj] -%}
    {%- assign product_ref = all_products[product_obj] -%}
    <script type="application/json" data-product-json>
      {{ product_ref | json }}
    </script>
  {%- endif -%}
{%- endfor -%}
{%- endif -%}

{%- when 'lod_rating_badge' -%}
{%- assign bs = block.settings -%}


{%- assign rating_times = bs.rating | times: 10 -%}
{%- assign rating_round = rating_times | round -%}
{%- assign rating_norm  = rating_round | divided_by: 10.0 -%}
{%- assign full_stars   = rating_norm | floor -%}
{%- assign frac         = rating_norm | minus: full_stars -%}
{%- assign show_half    = 0 -%}{% if frac >= 0.5 %}{% assign show_half = 1 %}{% endif %}
{%- assign next_index   = full_stars | plus: 1 -%}

{% style %}

#LodRatingBadge-{{ block.id }}{

  margin-top: {{ bs.section_mt_d }}px !important;
  margin-bottom: {{ bs.section_mb_d }}px !important;
  padding-left: {{ bs.section_pl_d }}px !important;
  padding-right: {{ bs.section_pr_d }}px !important;
  background: transparent !important;
  width: 100% !important;


  --lod-tile: {{ bs.star_tile_size_d }}px;
  --lod-glyph: {{ bs.star_icon_scale_d }}%;
  --lod-radius: {{ bs.star_radius }}px;
  --lod-tile-color: {{ bs.stars_color }};
  --lod-icon-color: {{ bs.star_icon_color }};
}


#LodRatingBadge-{{ block.id }} .lod-rating__wrap{
  display:inline-flex !important; align-items:center !important; gap:16px !important;
  text-decoration:none !important;
  cursor:{% if bs.enable_link and bs.link_url != blank %}pointer{% else %}default{% endif %} !important;
}


#LodRatingBadge-{{ block.id }} .lod-stars{
  display:inline-flex !important; align-items:center !important; gap:6px !important;
}


#LodRatingBadge-{{ block.id }} .lod-star{
  position:relative !important;
  width:var(--lod-tile) !important; height:var(--lod-tile) !important;
  border-radius:var(--lod-radius) !important;  
  overflow:hidden !important; flex:0 0 auto !important;
}


#LodRatingBadge-{{ block.id }} .lod-star__tile{
  position:absolute !important; inset:0 !important;
  background: var(--lod-tile-color) !important;
}


#LodRatingBadge-{{ block.id }} .lod-star__icon{
  position:absolute !important; inset:0 !important;
  display:grid !important; place-items:center !important;
}
#LodRatingBadge-{{ block.id }} .lod-star__icon svg{
  width: var(--lod-glyph) !important; height: var(--lod-glyph) !important;
  display:block !important;
  fill: var(--lod-icon-color) !important;
  stroke: none !important;
}


#LodRatingBadge-{{ block.id }} .lod-star--half::after{
  content:"" !important; position:absolute !important; top:0 !important; right:0 !important; bottom:0 !important;
  width:50% !important; background:#E6E6E6 !important;
}

#LodRatingBadge-{{ block.id }} .lod-star--empty .lod-star__tile{ background:#E6E6E6 !important; }


#LodRatingBadge-{{ block.id }} .lod-rating__text{
  margin:0 !important; color:{{ bs.text_color }} !important;
  font-family:inherit !important; font-weight:{{ bs.font_weight }} !important;
  font-size:{{ bs.text_size }}px !important; line-height:1 !important;
}


@media (max-width:749px){
  #LodRatingBadge-{{ block.id }}{
    margin-top: {{ bs.section_mt_m }}px !important;
    margin-bottom: {{ bs.section_mb_m }}px !important;
    padding-left: {{ bs.section_pl_m }}px !important;
    padding-right: {{ bs.section_pr_m }}px !important;

    --lod-tile: {{ bs.star_tile_size_m }}px;
    --lod-glyph: {{ bs.star_icon_scale_m }}%;
  }
  #LodRatingBadge-{{ block.id }} .lod-rating__text{
    font-size: {{ bs.text_size | minus: 2 | at_least: 10 }}px !important;
  }
}
{% endstyle %}

{%- capture _badge -%}
  <div class="lod-rating__wrap" {% if bs.enable_link and bs.link_url != blank %}data-lod-link="{{ bs.link_url | escape }}"{% endif %}>
    <div class="lod-stars" aria-hidden="true">
      {%- for i in (1..5) -%}
        {%- assign star_class = '' -%}
        {%- if i <= full_stars -%}
          {%- assign star_class = '' -%}
        {%- elsif i == next_index and show_half == 1 -%}
          {%- assign star_class = 'lod-star--half' -%}
        {%- else -%}
          {%- assign star_class = 'lod-star--empty' -%}
        {%- endif -%}
        <span class="lod-star {{ star_class }}">
          <span class="lod-star__tile"></span>
          <span class="lod-star__icon">
            <svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
              <path d="M12 3.7l2.1 4.25 4.7.68-3.4 3.31.8 4.64L12 14.96 7.8 16.58l.8-4.64L5.2 8.63l4.7-.68L12 3.7z"/>
            </svg>
          </span>
        </span>
      {%- endfor -%}
    </div>
    <p class="lod-rating__text">{{ bs.label_text }}</p>
  </div>
{%- endcapture -%}

<div id="LodRatingBadge-{{ block.id }}" {{ block.shopify_attributes }}>
  {%- if bs.enable_link and bs.link_url != blank -%}
    <a href="{{ bs.link_url }}" style="text-decoration:none!important;color:inherit!important;display:inline-block!important;">{{ _badge }}</a>
  {%- else -%}
    {{ _badge }}
  {%- endif -%}
</div>

<script>

(function(){
  var root=document.getElementById('LodRatingBadge-{{ block.id }}'); if(!root) return;
  var wrap=root.querySelector('.lod-rating__wrap'); if(!wrap) return;
  var href=wrap.getAttribute('data-lod-link');
  if(href){ wrap.addEventListener('click', function(){ window.location.href = href; }); }
})();
</script>




{%- when 'product_videos' -%}
{%- assign s = block.settings -%}
{%- assign vids = '' -%}
{%- for i in (1..6) -%}
{%- assign en = 'v' | append: i | append: '_enable' -%}
{%- if s[en] -%}{%- assign vids = vids | append: i | append: ',' -%}{%- endif -%}
{%- endfor -%}
{%- assign vids = vids | split: ',' | compact -%}
{%- if vids.size > 0 -%}

<style> #PV-{{ block.id }}{ --pv-mt: {{ s.mt_d | default: 16 }}px; --pv-mb: {{ s.mb_d | default: 16 }}px; --pv-pl: {{ s.pl_d | default: 0 }}px; --pv-pr: {{ s.pr_d | default: 0 }}px; --pv-mt-m: {{ s.mt_m | default: 12 }}px; --pv-mb-m: {{ s.mb_m | default: 12 }}px; --pv-pl-m: {{ s.pl_m | default: 0 }}px; --pv-pr-m: {{ s.pr_m | default: 0 }}px; --pv-gap-d: {{ s.gap_d | default: 16 }}px; --pv-gap-m: {{ s.gap_m | default: 12 }}px; --pv-bg: {{ s.bg | default: '#F5EFE8' }}; --pv-radius: {{ s.section_radius | default: 24 }}px; --pv-play-color: {{ s.play_color | default: '#d08b2e' }}; --pv-card-radius: {{ s.video_radius | default: 16 }}px; --pv-w: {{ s.video_w | default: 280 }}px; --pv-h: {{ s.video_h | default: 158 }}px; } #PV-{{ block.id }}{ margin: var(--pv-mt) var(--pv-pr) var(--pv-mb) var(--pv-pl); } @media (max-width:749px){ #PV-{{ block.id }}{ margin: var(--pv-mt-m) var(--pv-pr-m) var(--pv-mb-m) var(--pv-pl-m); } } .pv-inner{ display:inline-block; max-width:100%; background:var(--pv-bg); border-radius:var(--pv-radius); padding:14px; overflow:hidden; } @media (max-width:749px){ .pv-inner{ padding:10px; } } .pv-wrap{ position:relative; } .pv-row{ display:flex; gap:var(--pv-gap-d); overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none; } .pv-row::-webkit-scrollbar{ display:none; } @media (max-width:749px){ .pv-row{ gap:var(--pv-gap-m); } } .pv-card{ position:relative; flex:0 0 auto; overflow:hidden; border-radius:var(--pv-card-radius); background:#ddd; {% if s.enable_custom_size %} width:var(--pv-w); height:var(--pv-h); {% else %} width:300px; aspect-ratio:16/9; {% endif %} } .pv-thumb{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block; } .pv-play{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; transition:opacity .18s ease, visibility .18s ease; opacity:1; visibility:visible; } .pv-play::before{ content:""; width:84px; height:84px; border-radius:999px; background: radial-gradient( rgba(255,255,255,.6) 0%, rgba(255,255,255,.35) 55%, rgba(255,255,255,0) 70% ); transition: opacity .18s ease; } .pv-card:hover .pv-play::before{ opacity:.9; } .pv-play svg{ position:absolute; width:28px; height:28px; } .pv-play svg path{ fill: var(--pv-play-color); } .pv-play.is-hidden{ opacity:0; visibility:hidden; } .pv-hit{ position:absolute; inset:0; cursor:pointer; z-index:9; } body > .pv-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.45); backdrop-filter:blur(3px); -webkit-backdrop-filter:blur(3px); display:flex; align-items:center; justify-content:center; opacity:0; visibility:hidden; pointer-events:none; transition: opacity .24s ease, visibility .24s ease; z-index:2147483647 !important; isolation:isolate; } body > .pv-overlay.is-open{ opacity:1; visibility:visible; pointer-events:auto; } .pv-modal{ position:relative; max-width:92vw; max-height:92vh; overflow:hidden; border-radius:16px; background:#000; display:block; z-index:2147483646 !important; transform: translateY(6px) scale(.985); opacity:.98; transition: transform .24s ease, opacity .24s ease; } body > .pv-overlay.is-open .pv-modal{ transform: translateY(0) scale(1); opacity:1; } .pv-modal > iframe, .pv-modal > video{ display:block; width:100%; height:100%; z-index:2147483645 !important; } .pv-close{ position:absolute; top:8px; right:8px; width:36px; height:36px; border:0; border-radius:999px; display:grid; place-items:center; background:rgba(255,255,255,.9); cursor:pointer; z-index:2147483647 !important; transition: opacity .18s ease, transform .18s ease; } .pv-close:hover{ transform:scale(1.04); } .pv-close:active{ transform:.98; opacity:.9; } .pv-inline{ position:absolute; inset:0; z-index:2; } .pv-inline > iframe, .pv-inline > video{ display:block; width:100%; height:100%; } html.no-scroll, body.no-scroll{ overflow:hidden; } .pv-slider-wrap{ display:none; padding:12px 6px 4px; } @media (min-width:750px){ .pv-slider-wrap{ display:block; } } .pv-slider{ -webkit-appearance:none; appearance:none; width:100%; height:6px; border-radius:999px; background:#e5e5e5; outline:none; } .pv-slider::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:16px; height:16px; border-radius:999px; background:#bdbdbd; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,.08); } .pv-slider::-moz-range-thumb{ width:16px; height:16px; border:0; border-radius:999px; background:#bdbdbd; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,.08); } .pv-slider::-moz-range-track{ height:6px; background:#e5e5e5; border-radius:999px; } </style> <div id="PV-{{ block.id }}" {{ block.shopify_attributes }}> <div class="pv-inner"> <div class="pv-wrap" data-wrap> <div class="pv-row" role="list" data-row> {%- for _i in vids -%} {%- assign i = _i | plus: 0 -%} {%- assign vid_key = 'v' | append: i -%} {%- assign url_key = 'v' | append: i | append: '_url' -%} {%- assign vid_obj = s[vid_key] -%} {%- assign url_val = s[url_key] | strip -%} {%- assign thumb = '' -%} {%- if vid_obj != blank and vid_obj.preview_image -%} {%- assign thumb = vid_obj.preview_image | image_url: width: 900 -%} {%- endif -%} <div class="pv-card" role="listitem" data-item {% if vid_obj and vid_obj.aspect_ratio %}data-aspect="{{ vid_obj.aspect_ratio | times: 1000 | round | divided_by: 1000.0 }}"{% endif %}> {%- if thumb != blank -%} <img class="pv-thumb" src="{{ thumb }}" alt="Video thumbnail"> {%- else -%} <div class="pv-thumb" style="background:#d7d7d7;"></div> {%- endif -%} <span class="pv-play" aria-hidden="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg> </span> {%- if vid_obj != blank -%} <template data-hosted> {{ vid_obj | video_tag: autoplay: s.autoplay, controls: true, loop: false, muted: s.autoplay, playsinline: true, preload: 'metadata', image_size: '1440x' }} </template> {%- endif -%} <span class="pv-hit" data-hit {% if url_val != blank %}data-url="{{ url_val | escape }}"{% endif %} {% if vid_obj != blank %}data-type="hosted"{% else %}data-type="external"{% endif %} role="button" tabindex="0" aria-label="Play video"></span> </div> {%- endfor -%} </div> <div class="pv-slider-wrap"> <input class="pv-slider" type="range" min="0" value="0" step="1" data-slider> </div> </div> </div>

{% if s.enable_popup %}

<div class="pv-overlay" data-overlay> <div class="pv-modal" data-modal> <button class="pv-close" type="button" data-close aria-label="Close"> <svg viewBox="0 0 24 24"><path d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3 10.6 10.6 16.9 4.3z" fill="#111"/></svg> </button> </div> </div> {% endif %} </div> <script> (function(){ var root = document.getElementById('PV-{{ block.id }}'); if(!root) return; var POPUP = {{ s.enable_popup | json }}; var AUTOPLAY = {{ s.autoplay | json }}; function yt(u){ var m=(u||'').match(/(?:youtu\.be\/|v=|embed\/)([A-Za-z0-9_-]{6,})/i); return m?m[1]:null; } function vim(u){ var m=(u||'').match(/vimeo\.com\/(?:video\/)?(\d+)/i); return m?m[1]:null; } function buildIframe(url, auto){ var id = yt(url), src=null; if(id){ src = 'https://www.youtube.com/embed/'+id+'?autoplay='+(auto?1:0)+'&mute='+(auto?1:0)+'&rel=0&playsinline=1'; } if(!src){ var vid = vim(url); if(vid){ src = 'https://player.vimeo.com/video/'+vid+'?autoplay='+(auto?1:0)+'&muted='+(auto?1:0)+'&title=0&byline=0&portrait=0'; } } if(!src) return null; var ifr = document.createElement('iframe'); ifr.src = src; ifr.allow = 'autoplay; encrypted-media; picture-in-picture'; ifr.setAttribute('allowfullscreen',''); ifr.style.display='block'; ifr.style.width='100%'; ifr.style.height='100%'; return ifr; } function getOverlay(){ return document.querySelector('body > .pv-overlay[data-overlay]') || root.querySelector('.pv-overlay[data-overlay]'); } function getModal(overlay){ return overlay ? overlay.querySelector('[data-modal]') : null; } function bindOverlayOnce(overlay){ if(!overlay || overlay.dataset.bound) return; overlay.addEventListener('click', function(e){ if(e.target === overlay) closePopup(); }); var closeBtn = overlay.querySelector('[data-close]'); closeBtn && closeBtn.addEventListener('click', closePopup); document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closePopup(); }); overlay.dataset.bound = '1'; } function openPopupWith(node, aspect){ var overlay = getOverlay(); if(!overlay) return; var modal = getModal(overlay); if(!modal) return; if(overlay.parentElement !== document.body){ document.body.appendChild(overlay); } bindOverlayOnce(overlay); Array.from(modal.children).forEach(function(ch){ if(ch.matches && ch.matches('[data-close]')) return; if(ch.tagName === 'IFRAME'){ try{ ch.src = ch.src; }catch(e){} } if(ch.tagName === 'VIDEO'){ try{ ch.pause(); }catch(e){} } ch.remove(); }); modal.style.aspectRatio = aspect ? String(aspect) : '16 / 9'; modal.appendChild(node); overlay.classList.add('is-open'); document.documentElement.classList.add('no-scroll'); } function closePopup(){ var overlay = getOverlay(); if(!overlay) return; var modal = getModal(overlay); if(!modal) return; function cleanup(){ Array.from(modal.children).forEach(function(ch){ if(ch.matches && ch.matches('[data-close]')) return; if(ch.tagName === 'IFRAME'){ try{ ch.src = ch.src; }catch(e){} } if(ch.tagName === 'VIDEO'){ try{ ch.pause(); }catch(e){} } ch.remove(); }); document.documentElement.classList.remove('no-scroll'); } overlay.classList.remove('is-open'); var done = false; var tidy = function(){ if(done) return; done = true; cleanup(); }; overlay.addEventListener('transitionend', function(e){ if(e.target === overlay && (e.propertyName === 'opacity' || e.propertyName === 'visibility')) tidy(); }, { once:true }); setTimeout(tidy, 320); } function destroyInline(card){ var container = card.querySelector('.pv-inline'); if(!container) return; var media = container.querySelector('video,iframe'); if(media && media.tagName === 'VIDEO'){ try{ media.pause(); }catch(e){} } container.remove(); var play = card.querySelector('.pv-play'); var thumb = card.querySelector('.pv-thumb'); if(play){ play.classList.remove('is-hidden'); } if(thumb){ thumb.style.visibility = ''; } } function playInline(card){ if(card.querySelector('.pv-inline')) return; var aspect = card.getAttribute('data-aspect') || '16 / 9'; var thumb = card.querySelector('.pv-thumb'); var play = card.querySelector('.pv-play'); if(thumb) thumb.style.visibility = 'hidden'; var holder = document.createElement('div'); holder.className = 'pv-inline'; holder.style.aspectRatio = aspect; var tpl = card.querySelector('template[data-hosted]'); if(tpl){ var frag = document.createElement('div'); frag.innerHTML = tpl.innerHTML.trim(); var vid = frag.querySelector('video'); if(vid){ vid.autoplay = AUTOPLAY; if(AUTOPLAY){ vid.muted = true; } vid.playsInline = true; vid.controls = true; vid.style.display='block'; vid.style.width='100%'; vid.style.height='100%'; holder.appendChild(vid); card.appendChild(holder); function sync(){ if(!vid.paused && !vid.ended){ if(play) play.classList.add('is-hidden'); } else { if(play) play.classList.remove('is-hidden'); } } vid.addEventListener('play', sync); vid.addEventListener('pause', sync); vid.addEventListener('ended', sync); vid.addEventListener('click', function(){ if(vid.paused) vid.play(); else vid.pause(); }); sync(); return; } } var url = card.querySelector('[data-hit]').getAttribute('data-url'); var ifr = buildIframe(url, AUTOPLAY); if(ifr){ holder.appendChild(ifr); card.appendChild(holder); if(play) play.classList.add('is-hidden'); } } function handleCardOpen(card){ var aspect = card.getAttribute('data-aspect') || '16 / 9'; if(POPUP){ var tpl = card.querySelector('template[data-hosted]'); if(tpl){ var wrap = document.createElement('div'); wrap.innerHTML = tpl.innerHTML.trim(); var vid = wrap.querySelector('video'); if(vid){ vid.autoplay = AUTOPLAY; if(AUTOPLAY){ vid.muted = true; } vid.playsInline = true; vid.controls = true; vid.style.display='block'; vid.style.width='100%'; vid.style.height='100%'; openPopupWith(vid, aspect); return; } } var hit = card.querySelector('[data-hit]'); var url = hit && hit.getAttribute('data-url'); var ifr = url ? buildIframe(url, AUTOPLAY) : null; if(ifr){ openPopupWith(ifr, aspect); } } else { var inline = card.querySelector('.pv-inline'); if(inline){ var video = inline.querySelector('video'); if(video){ if(video.paused) video.play(); else video.pause(); return; } destroyInline(card); return; } playInline(card); } } var wrap = root.querySelector('[data-wrap]'); var row = root.querySelector('[data-row]'); var slider = root.querySelector('[data-slider]'); if(row){ row.querySelectorAll('[data-item]').forEach(function(card){ var hit = card.querySelector('[data-hit]'); if(hit){ hit.addEventListener('click', function(e){ e.preventDefault(); e.stopPropagation(); handleCardOpen(card); }, {passive:false}); hit.addEventListener('keydown', function(e){ if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); handleCardOpen(card); } }); } card.addEventListener('click', function(e){ if(e.target.closest('.pv-inline')) return; handleCardOpen(card); }); }); function updateSliderLimits(){ if(!slider) return; var max = Math.max(0, row.scrollWidth - row.clientWidth); slider.max = String(max); slider.value = String(row.scrollLeft); } function onRowScroll(){ if(!slider) return; slider.value = String(row.scrollLeft); } function onSliderInput(){ var val = parseFloat(slider.value || '0'); row.scrollTo({ left: val, behavior: 'smooth' }); } row.addEventListener('scroll', onRowScroll, {passive:true}); slider && slider.addEventListener('input', onSliderInput); var ro; if('ResizeObserver' in window){ ro = new ResizeObserver(function(){ updateSliderLimits(); }); ro.observe(row); } window.addEventListener('resize', updateSliderLimits); updateSliderLimits(); var isDown=false, startX=0, startScroll=0; row.addEventListener('mousedown', function(e){ isDown=true; startX=e.pageX; startScroll=row.scrollLeft; row.style.cursor='grabbing'; }); window.addEventListener('mousemove', function(e){ if(!isDown) return; var dx=e.pageX-startX; row.scrollLeft=startScroll-dx; }); window.addEventListener('mouseup', function(){ if(!isDown) return; isDown=false; row.style.cursor=''; }); row.addEventListener('touchstart', function(e){ if(!e.touches||!e.touches[0]) return; isDown=true; startX=e.touches[0].pageX; startScroll=row.scrollLeft; }, {passive:true}); row.addEventListener('touchmove', function(e){ if(!isDown||!e.touches||!e.touches[0]) return; var dx=e.touches[0].pageX-startX; row.scrollLeft=startScroll-dx; }, {passive:true}); row.addEventListener('touchend', function(){ isDown=false; }, {passive:true}); row.addEventListener('touchcancel',function(){ isDown=false; }, {passive:true}); } })(); </script>

{%- endif -%}


{%- when 'stock_pulse_notice' -%}
{%- assign s = block.settings -%}

{%- assign current_variant = product.selected_or_first_available_variant -%}


{%- assign auto_enabled = s.auto_qty -%}
{%- assign auto_source = s.auto_source -%}
{%- assign init_qty = nil -%}

{%- if auto_enabled -%}
  {%- if auto_source == 'specific' and s.ref_product != blank -%}
    {%- assign ref = all_products[s.ref_product] -%}
    {%- if ref -%}
      {%- assign init_qty = ref.selected_or_first_available_variant.inventory_quantity | default: 0 -%}
    {%- else -%}
      {%- assign init_qty = 0 -%}
    {%- endif -%}
  {%- else -%}
    {%- assign init_qty = current_variant.inventory_quantity | default: 0 -%}
  {%- endif -%}
{%- endif -%}


{%- assign line = s.text_template -%}
{%- if auto_enabled -%}
  {%- assign line = line | replace: '{{qty}}', init_qty -%}
{%- endif -%}


{%- capture qty_map -%}{
  {%- for v in product.variants -%}
    "{{ v.id }}": {{ v.inventory_quantity | default: 0 }}{% unless forloop.last %},{% endunless %}
  {%- endfor -%}
}{%- endcapture -%}

<div id="SPN-{{ block.id }}" class="spn" {{ block.shopify_attributes }}
     style="
      /* colors & pulse */
      --spn-color: {{ s.dot_color | default: '#F3B233' }};
      --spn-text: {{ s.text_color | default: '#1a1a1a' }};
      --spn-size: {{ s.dot_size | default: 10 }}px;
      --spn-gap: {{ s.gap | default: 10 }}px;
      --spn-speed: {{ s.pulse_ms | default: 1400 }}ms;
      --spn-scale: {{ s.pulse_scale | default: 2.4 }};
      --spn-opacity: {{ s.pulse_opacity | default: 0.45 }};

      /* typography */
      --spn-fs-d: {{ s.font_size_d | default: 14 }}px;
      --spn-fs-m: {{ s.font_size_m | default: 14 }}px;
      --spn-fw: {{ s.font_weight | default: '500' }};

      /* layout */
      --spn-mt-d: {{ s.mt_d | default: 0 }}px;
      --spn-mb-d: {{ s.mb_d | default: 8 }}px;
      --spn-mt-m: {{ s.mt_m | default: 0 }}px;
      --spn-mb-m: {{ s.mb_m | default: 8 }}px;
      --spn-align: {{ s.align | default: 'flex-start' }};
     ">
  <div class="spn__wrap" role="status" aria-live="polite">
    <span class="spn__dot" aria-hidden="true"><i></i></span>
    <span class="spn__text"
          data-template="{{ s.text_template | escape }}"
          data-auto="{{ auto_enabled }}"
          data-source="{{ auto_source }}"
          data-fixedqty="{% if auto_enabled and auto_source == 'specific' %}{{ init_qty | default: 0 }}{% else %}{% endif %}">{{ line }}</span>
  </div>


  <script type="application/json" id="SPNMap-{{ block.id }}">
    {
      "auto": {{ auto_enabled | json }},
      "source": {{ auto_source | json }},
      "qtyMap": {{ qty_map | strip }},
      "currentVariantId": {{ current_variant.id | default: 0 }}
    }
  </script>
</div>

<style>

  #SPN-{{ block.id }}{ margin-top: var(--spn-mt-d); margin-bottom: var(--spn-mb-d); }
  @media (max-width:768px){
    #SPN-{{ block.id }}{ margin-top: var(--spn-mt-m); margin-bottom: var(--spn-mb-m); }
  }
  #SPN-{{ block.id }} .spn__wrap{
    display: inline-flex;
    align-items: center;
    justify-content: var(--spn-align);
    gap: var(--spn-gap);
    color: var(--spn-text);
    font-size: var(--spn-fs-d);
    font-weight: var(--spn-fw);
    line-height: 1.3;
  }
  @media (max-width:768px){
    #SPN-{{ block.id }} .spn__wrap{ font-size: var(--spn-fs-m); }
  }


  #SPN-{{ block.id }} .spn__dot{
    position: relative;
    width: var(--spn-size); height: var(--spn-size); min-width: var(--spn-size);
    border-radius: 999px; background: var(--spn-color); display: inline-block;
  }
  #SPN-{{ block.id }} .spn__dot i{
    position: absolute; inset: 0; border-radius: 999px;
    box-shadow: 0 0 0 0 var(--spn-color);
    animation: spnPulse-{{ block.id }} var(--spn-speed) ease-out infinite;
    opacity: var(--spn-opacity);
  }
  @keyframes spnPulse-{{ block.id }}{
    0%   { transform: scale(1); box-shadow: 0 0 0 0 var(--spn-color); opacity: var(--spn-opacity); }
    70%  { transform: scale(var(--spn-scale)); box-shadow: 0 0 0 calc(var(--spn-size) * .6) transparent; opacity: 0; }
    100% { transform: scale(1); box-shadow: 0 0 0 0 transparent; opacity: 0; }
  }
</style>

<script>
(function(){
  const root  = document.getElementById('SPN-{{ block.id }}');
  if(!root) return;

  const text  = root.querySelector('.spn__text');
  const cfgEl = document.getElementById('SPNMap-{{ block.id }}');
  const cfg = cfgEl ? JSON.parse(cfgEl.textContent) : {auto:false, source:'manual', qtyMap:{}};

  function render(qty){
    const tpl = text.dataset.template || '';
    const auto = text.dataset.auto === 'true';
    if (!auto){
     
      text.textContent = tpl;
      return;
    }
 
    text.textContent = tpl.replace('{{qty}}', qty ?? 0);
  }

  function updateFromCurrentVariant(variantId){
    const q = (cfg.qtyMap && typeof cfg.qtyMap[variantId] !== 'undefined') ? cfg.qtyMap[variantId] : 0;
    render(q);
  }


  if (cfg.auto){
    if (cfg.source === 'specific'){
      const fixed = parseInt(text.dataset.fixedqty || '0', 10);
      render(isNaN(fixed) ? 0 : fixed);
    } else {
      updateFromCurrentVariant(parseInt(cfg.currentVariantId || 0, 10));
    }
  } else {
    render(); 
  }


  if (cfg.auto && cfg.source === 'current'){

    document.addEventListener('variant:change', function(e){
      const v = e.detail && (e.detail.variant || e.detail);
      if (!v || !v.id) return;
      updateFromCurrentVariant(v.id);
    });

    const select = document.querySelector('form[action*="/cart/add"] select[name="id"]');
    if (select){
      select.addEventListener('change', function(){
        const vid = parseInt(this.value, 10);
        if (!isNaN(vid)) updateFromCurrentVariant(vid);
      });
    }
  }
})();
</script>












{%- when 'size_chart_popup' -%}
{%- assign sc = block.settings -%}

<div id="SC-{{ block.id }}"
     class="scp"
     {{ block.shopify_attributes }}
     data-sc
     style="
       /* trigger */
       --sc-trig-fs: {{ sc.trig_font_size | default: 16 }}px;
       --sc-trig-fw: {{ sc.trig_font_weight | default: '600' }};
       --sc-trig-color: {{ sc.trig_color | default: '#111111' }};
       --sc-trig-gap: {{ sc.trig_gap | default: 8 }}px;
       --sc-trig-pad-t: {{ sc.trig_pad_t_d | default: 8 }}px;
       --sc-trig-pad-b: {{ sc.trig_pad_b_d | default: 8 }}px;
       --sc-trig-pad-l: {{ sc.trig_pad_l_d | default: 0 }}px;
       --sc-trig-pad-r: {{ sc.trig_pad_r_d | default: 0 }}px;

       /* modal */
       --sc-modal-bg: {{ sc.modal_bg | default: '#FFFFFF' }};
       --sc-modal-radius: {{ sc.modal_radius | default: 12 }}px;
       --sc-modal-pad: {{ sc.modal_padding | default: 20 }}px;
       --scw-d: {{ sc.modal_width_d | default: 880 }}px;
       --scw-t: {{ sc.modal_width_t | default: 720 }}px;
       --scw-m: {{ sc.modal_width_m | default: 360 }}px;

       /* title */
       --sc-title-color: {{ sc.title_color | default: '#111111' }};
       --sc-title-fs: {{ sc.title_size | default: 18 }}px;
       --sc-title-fw: {{ sc.title_weight | default: '700' }};

       /* icon */
       --sc-icon-size: {{ sc.icon_size | default: 18 }}px;
       --sc-icon-color: {{ sc.icon_color | default: '#111111' }};
     ">
  
  <button type="button"
          class="scp__trigger{% if sc.underline_text %} scp__trigger--underline{% endif %}"
          aria-haspopup="dialog"
          aria-expanded="false"
          aria-controls="SCDialog-{{ block.id }}">
    {%- if sc.show_icon -%}
    <span class="scp__icn" aria-hidden="true">
     
      <svg viewBox="0 0 50 50" class="icn" xmlns="http://www.w3.org/2000/svg" transform="rotate(45)">
        <path fill="currentColor" stroke="currentColor" stroke-width="0.0005"
              d="M29.063,40.313c0.552,0,1-0.447,1-1V10.75c0-0.553-0.448-1-1-1h-8.851c-0.552,0-1,0.447-1,1v28.563
                 c0,0.553,0.448,1,1,1H29.063z M28.063,11.75v26.563h-6.851v-1.938h1.664c0.552,0,1-0.447,1-1s-0.448-1-1-1h-1.664v-2h1.664
                 c0.552,0,1-0.447,1-1s-0.448-1-1-1h-1.664v-2h1.664c0.552,0,1-0.447,1-1s-0.448-1-1-1h-1.664v-2h1.664c0.552,0,1-0.447,1-1
                 s-0.448-1-1-1h-1.664v-2h1.664c0.552,0,1-0.447,1-1s-0.448-1-1-1h-1.664v-2h1.664c0.552,0,1-0.447,1-1s-0.448-1-1-1h-1.664V11.75H28.063z"/>
      </svg>
    </span>
    {%- endif -%}
    <span class="scp__label">{{ sc.trig_text | default: 'Size Guide' }}</span>
  </button>

 
  <div class="scp__overlay" data-overlay hidden></div>

  <div id="SCDialog-{{ block.id }}"
       class="scp__dialog"
       role="dialog"
       aria-modal="true"
       aria-labelledby="SCTitle-{{ block.id }}"
       data-dialog
       hidden>

    <div class="scp__modal" data-modal>

      <div class="scp__head">
        <h3 id="SCTitle-{{ block.id }}" class="scp__title">{{ sc.modal_title | default: 'Size Guide' }}</h3>
        <button type="button" class="scp__close" aria-label="Close (Esc)" data-close>
          <svg viewBox="0 0 24 24" class="icn" xmlns="http://www.w3.org/2000/svg">
            <path fill="currentColor" d="M18.3 5.71L12 12l6.3 6.29-1.41 1.41L10.59 13.41 4.29 19.7 2.88 18.29 9.17 12 2.88 5.71 4.29 4.29 10.59 10.59 16.89 4.29z"/>
          </svg>
        </button>
      </div>

      {%- if sc.enable_size_popup -%}
        <!-- Tabs -->
        <div class="scp__tabs">
          <button type="button" class="scp__tab is-active" data-tab="sizes-{{ block.id }}">{{ sc.tab_sizes_label | default: 'Sizes' }}</button>
          <button type="button" class="scp__tab" data-tab="measure-{{ block.id }}">{{ sc.tab_measure_label | default: 'How to measure' }}</button>
        </div>


        <div id="sizes-{{ block.id }}" class="scp__panel is-active">
          <div class="scp__page-wrap">
            {%- if sc.sizes_page != blank -%}
              {{ sc.sizes_page.content }}
            {%- else -%}
              <p style="margin:0;">Assign a “Page containing size chart” in the block settings.</p>
            {%- endif -%}
          </div>
        </div>

    
        <div id="measure-{{ block.id }}" class="scp__panel">
          <div class="scp__measure-grid">
            <div class="scp__measure-img">
              {%- if sc.measure_image != blank -%}
                {{ sc.measure_image | image_url: width: 1440 | image_tag: loading: 'lazy', alt: 'How to measure', class: 'img' }}
              {%- else -%}
                <div class="scp__placeholder" aria-hidden="true">
                  <svg viewBox="0 0 64 48" xmlns="http://www.w3.org/2000/svg" class="ph">
                    <rect x="1" y="1" width="62" height="46" rx="4" fill="#d9d9d9"/>
                    <path d="M8 34l10-12 10 11 8-8 12 13H8z" fill="#c6c6c6"/>
                    <circle cx="23" cy="17" r="4" fill="#c6c6c6"/>
                  </svg>
                </div>
              {%- endif -%}
            </div>
            <div class="scp__measure-text">
              <div class="row">
                <p class="mtitle">A. {{ sc.h_a_title | default: 'CHEST' }}:</p>
                <p class="mbody">{{ sc.h_a_text | default: 'Measure around the fullest part of your chest, keeping the measuring tape horizontal.' }}</p>
              </div>
              <div class="row">
                <p class="mtitle">B. {{ sc.h_b_title | default: 'WAIST' }}:</p>
                <p class="mbody">{{ sc.h_b_text | default: 'Measure around the narrowest part of your waist, keeping the tape horizontal.' }}</p>
              </div>
              <div class="row">
                <p class="mtitle">C. {{ sc.h_c_title | default: 'HIPS' }}:</p>
                <p class="mbody">{{ sc.h_c_text | default: 'Measure around the fullest part of your hips, keeping the tape horizontal.' }}</p>
              </div>
            </div>
          </div>
        </div>
      {%- else -%}
  
        <div class="scp__imgwrap
                    {%- case sc.image_ratio -%}
                      {%- when '1_1' -%} ar-1-1
                      {%- when '4_5' -%} ar-4-5
                      {%- when '3_4' -%} ar-3-4
                      {%- when '2_3' -%} ar-2-3
                      {%- when '4_3' -%} ar-4-3
                      {%- when '3_2' -%} ar-3-2
                      {%- when '16_9' -%} ar-16-9
                      {%- when '9_16' -%} ar-9-16
                    {%- endcase -%}">
          {%- if sc.chart_image != blank -%}
            <img
              src="{{ sc.chart_image | image_url: width: 1440 }}"
              srcset="
                {{ sc.chart_image | image_url: width: 480 }} 480w,
                {{ sc.chart_image | image_url: width: 800 }} 800w,
                {{ sc.chart_image | image_url: width: 1200 }} 1200w,
                {{ sc.chart_image | image_url: width: 1440 }} 1440w
              "
              sizes="(max-width: 768px) 90vw, (max-width: 1024px) 70vw, 50vw"
              alt="{{ sc.modal_title | escape }}"
              class="scp__img"
              loading="lazy"
              decoding="async">
          {%- else -%}
            <div class="scp__placeholder" aria-hidden="true">
              <svg viewBox="0 0 64 48" xmlns="http://www.w3.org/2000/svg" class="ph">
                <rect x="1" y="1" width="62" height="46" rx="4" fill="#d9d9d9"/>
                <path d="M8 34l10-12 10 11 8-8 12 13H8z" fill="#c6c6c6"/>
                <circle cx="23" cy="17" r="4" fill="#c6c6c6"/>
              </svg>
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
  </div>
</div>

<style>

  #SC-{{ block.id }} .icn { width: 1em; height: 1em; display: inline-block; }

 
  #SC-{{ block.id }} .scp__trigger{
    display: inline-flex;
    align-items: center;
    gap: var(--sc-trig-gap);
    padding: var(--sc-trig-pad-t) var(--sc-trig-pad-r) var(--sc-trig-pad-b) var(--sc-trig-pad-l);
    background: transparent;
    border: 0;
    cursor: pointer;
    font-size: var(--sc-trig-fs);
    font-weight: var(--sc-trig-fw);
    color: var(--sc-trig-color);
    line-height: 1.2;
    text-decoration: none;
  }
  #SC-{{ block.id }} .scp__trigger--underline{ text-decoration: underline; text-underline-offset: 2px; }
  #SC-{{ block.id }} .scp__trigger .scp__icn .icn{
    width: var(--sc-icon-size);
    height: var(--sc-icon-size);
    color: var(--sc-icon-color);
  }
  #SC-{{ block.id }} .scp__trigger:focus-visible{ outline: 2px solid #000; outline-offset: 2px; }


  @media (max-width:1024px){
    #SC-{{ block.id }}{
      --sc-trig-pad-t: {{ sc.trig_pad_t_t | default: 8 }}px;
      --sc-trig-pad-b: {{ sc.trig_pad_b_t | default: 8 }}px;
      --sc-trig-pad-l: {{ sc.trig_pad_l_t | default: 0 }}px;
      --sc-trig-pad-r: {{ sc.trig_pad_r_t | default: 0 }}px;
    }
  }
 
  @media (max-width:768px){
    #SC-{{ block.id }}{
      --sc-trig-pad-t: {{ sc.trig_pad_t_m | default: 8 }}px;
      --sc-trig-pad-b: {{ sc.trig_pad_b_m | default: 8 }}px;
      --sc-trig-pad-l: {{ sc.trig_pad_l_m | default: 0 }}px;
      --sc-trig-pad-r: {{ sc.trig_pad_r_m | default: 0 }}px;
    }
  }


  #SC-{{ block.id }} .scp__overlay{
    position: fixed; inset: 0;
    background: rgba(0,0,0,.45);
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
    opacity: 0; pointer-events: none;
    transition: opacity .18s ease;
    z-index: 100000;
  }
  #SC-{{ block.id }} .scp__overlay.is-open{ opacity: 1; pointer-events: auto; }


  #SC-{{ block.id }} .scp__dialog{
    position: fixed; inset: 0; display: grid; place-items: center;
    z-index: 100001;
  }

  
  #SC-{{ block.id }} .scp__modal{
    width: var(--scw-d);
    max-width: calc(100vw - 32px);
    background: var(--sc-modal-bg);
    border-radius: var(--sc-modal-radius);
    box-shadow: 0 10px 30px rgba(0,0,0,.18);
    padding: var(--sc-modal-pad);
    transform: translateY(6px) scale(.98);
    opacity: 0;
    transition: transform .18s ease, opacity .18s ease;
  }
  #SC-{{ block.id }} .scp__dialog.is-open .scp__modal{
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  
  @media (max-width:1024px){
    #SC-{{ block.id }} .scp__modal{ width: var(--scw-t); }
  }
  
  @media (max-width:768px){
    #SC-{{ block.id }} .scp__modal{ width: var(--scw-m); }
  }


  #SC-{{ block.id }} .scp__head{
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    margin-bottom: 16px;
  }
  #SC-{{ block.id }} .scp__title{
    margin: 0;
    color: var(--sc-title-color);
    font-size: var(--sc-title-fs);
    font-weight: var(--sc-title-fw);
    line-height: 1.25;
  }
  #SC-{{ block.id }} .scp__close{
    border: 0; background: transparent; cursor: pointer;
    width: 36px; height: 36px; display: grid; place-items: center;
    border-radius: 999px;
  }
  #SC-{{ block.id }} .scp__close:focus-visible{ outline: 2px solid #000; outline-offset: 2px; }
  #SC-{{ block.id }} .scp__close .icn{ width: 20px; height: 20px; }


  #SC-{{ block.id }} .scp__tabs{ display: flex; gap: 12px; border-bottom: 1px solid #eaeaea; margin-bottom: 18px; }
  #SC-{{ block.id }} .scp__tab{
    background: transparent; border: 0; padding: 8px 14px; cursor: pointer; border-radius: 8px 8px 0 0;
    color: #111; font-weight: 600;
  }
  #SC-{{ block.id }} .scp__tab.is-active{ background: #f6f6f6; }

  #SC-{{ block.id }} .scp__panel{ display: none; }
  #SC-{{ block.id }} .scp__panel.is-active{ display: block; }


  #SC-{{ block.id }} .scp__page-wrap{ width: 100%; overflow-x: auto; }


  #SC-{{ block.id }} .scp__measure-grid{
    display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: start;
  }
  #SC-{{ block.id }} .scp__measure-img .img{ width: 100%; height: auto; border-radius: 8px; display: block; }
  #SC-{{ block.id }} .scp__measure-text .row{ margin-bottom: 18px; }
  #SC-{{ block.id }} .scp__measure-text .mtitle{ margin: 0 0 6px 0; font-weight: 700; }
  #SC-{{ block.id }} .scp__measure-text .mbody{ margin: 0; line-height: 1.6; color: #333; }

  @media (max-width: 900px){
    #SC-{{ block.id }} .scp__measure-grid{ grid-template-columns: 1fr; }
  }


  #SC-{{ block.id }} .scp__imgwrap{ width: 100%; border-radius: {{ sc.image_radius | default: 8 }}px; overflow: hidden; }
  #SC-{{ block.id }} .scp__imgwrap.ar-1-1   { aspect-ratio: 1 / 1; }
  #SC-{{ block.id }} .scp__imgwrap.ar-4-5   { aspect-ratio: 4 / 5; }
  #SC-{{ block.id }} .scp__imgwrap.ar-3-4   { aspect-ratio: 3 / 4; }
  #SC-{{ block.id }} .scp__imgwrap.ar-2-3   { aspect-ratio: 2 / 3; }
  #SC-{{ block.id }} .scp__imgwrap.ar-4-3   { aspect-ratio: 4 / 3; }
  #SC-{{ block.id }} .scp__imgwrap.ar-3-2   { aspect-ratio: 3 / 2; }
  #SC-{{ block.id }} .scp__imgwrap.ar-16-9  { aspect-ratio: 16 / 9; }
  #SC-{{ block.id }} .scp__imgwrap.ar-9-16  { aspect-ratio: 9 / 16; }

  #SC-{{ block.id }} .scp__img,
  #SC-{{ block.id }} .scp__placeholder{ width: 100%; height: 100%; display: block; }
  #SC-{{ block.id }} .scp__img{
    object-fit: {{ sc.image_fit | default: 'contain' }};
    background: #f5f5f5;
    border-radius: inherit;
  }
  #SC-{{ block.id }} .scp__placeholder{ display: grid; place-items: center; background: #d0d0d0; }
  #SC-{{ block.id }} .scp__placeholder .ph{ width: 70%; height: auto; }

  /* Open state helpers */
  #SC-{{ block.id }} [data-dialog].is-open{ display: grid; }
  #SC-{{ block.id }} [data-dialog][hidden]{ display: none !important; }
  #SC-{{ block.id }} [data-overlay][hidden]{ display: none !important; }

  /* Prevent body scroll when open */
  html.scp-lock { overflow: hidden; }
</style>

<script>
(function(){
  var root = document.getElementById('SC-{{ block.id }}');
  if(!root) return;


  {% if sc.pin_above_buy %}
    try {
      var mount = document.querySelector('.product-form, .ProductForm__BuyButtons, form[action$="/cart/add"], .product .product-form, .product-single__add-to-cart, .shopify-payment-button, .add-to-cart');
      if(mount && root.parentNode){
        var wrap = document.createElement('div');
        wrap.style.display = 'flex';
        wrap.style.justifyContent = 'flex-end';
        wrap.style.marginBottom = '6px';
        mount.parentNode.insertBefore(wrap, mount);
        wrap.appendChild(root);
      }
    } catch(e) {}
  {% endif %}

  var trigger = root.querySelector('.scp__trigger');
  var overlay = root.querySelector('[data-overlay]');
  var dialog  = root.querySelector('[data-dialog]');
  var modal   = root.querySelector('[data-modal]');
  var closeBtn= root.querySelector('[data-close]');
  var lastFocus = null;

  function open(){
    lastFocus = document.activeElement;
    overlay.hidden = false;
    dialog.hidden = false;
    requestAnimationFrame(function(){
      overlay.classList.add('is-open');
      dialog.classList.add('is-open');
      trigger.setAttribute('aria-expanded','true');
      document.documentElement.classList.add('scp-lock');
      var f = getFocusable(modal);
      if(f.length){ f[0].focus(); } else if (closeBtn) { closeBtn.focus(); }
    });
    document.addEventListener('keydown', onKeydown);
    dialog.addEventListener('click', onOutside);
  }
  function close(){
    overlay.classList.remove('is-open');
    dialog.classList.remove('is-open');
    trigger.setAttribute('aria-expanded','false');
    document.documentElement.classList.remove('scp-lock');
    setTimeout(function(){
      overlay.hidden = true;
      dialog.hidden = true;
      if(lastFocus && typeof lastFocus.focus === 'function'){ lastFocus.focus({preventScroll:true}); }
    }, 180);
    document.removeEventListener('keydown', onKeydown);
    dialog.removeEventListener('click', onOutside);
  }
  function onOutside(e){ if(!modal.contains(e.target)) close(); }
  function onKeydown(e){
    if(e.key === 'Escape'){ e.preventDefault(); close(); return; }
    if(e.key === 'Tab'){ trapTab(e); }
  }
  function getFocusable(el){
    return Array.prototype.slice.call(el.querySelectorAll(
      'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), [contenteditable="true"]'
    )).filter(function(n){ return n.offsetParent !== null; });
  }
  function trapTab(e){
    var focusable = getFocusable(modal);
    if(!focusable.length) return;
    var first = focusable[0];
    var last  = focusable[focusable.length - 1];
    var active = document.activeElement;
    if(e.shiftKey){
      if(active === first){ e.preventDefault(); last.focus(); }
    }else{
      if(active === last){ e.preventDefault(); first.focus(); }
    }
  }

  trigger.addEventListener('click', open);
  closeBtn.addEventListener('click', close);


  {% if sc.enable_size_popup %}
  var tabBtns = root.querySelectorAll('.scp__tab');
  var panels  = root.querySelectorAll('.scp__panel');
  tabBtns.forEach(function(btn){
    btn.addEventListener('click', function(){
      var id = btn.getAttribute('data-tab');
      tabBtns.forEach(function(b){ b.classList.remove('is-active'); });
      panels.forEach(function(p){ p.classList.remove('is-active'); });
      btn.classList.add('is-active');
      var panel = root.querySelector('#' + id);
      if(panel){ panel.classList.add('is-active'); }
    });
  });
  {% endif %}
})();
</script>



{%- when 'product_addon' -%}
{%- assign as = block.settings -%}
{%- assign addon = as.addon_product -%}
{%- if addon == blank and as.addon_product != blank -%}
  {%- assign addon = all_products[as.addon_product] -%}
{%- endif -%}

{%- if addon -%}
  {%- assign first_variant = addon.selected_or_first_available_variant -%}
  {%- assign display_variant = first_variant -%}
{%- endif -%}

<div id="PA-{{ block.id }}" class="pa" {{ block.shopify_attributes }}
     style="
      /* section box */
      --pa-bg: {{ as.bg_color | default: '#F6F7F9' }};
      --pa-border: {{ as.border_color | default: '#E3E5EA' }};
      --pa-radius: {{ as.border_radius | default: 12 }}px;

      /* section spacing desktop */
      --pa-pt: {{ as.pad_top_d | default: 8 }}px;
      --pa-pb: {{ as.pad_bottom_d | default: 8 }}px;
      --pa-pl: {{ as.pad_left_d | default: 8 }}px;
      --pa-pr: {{ as.pad_right_d | default: 8 }}px;
      --pa-w:  {{ as.section_width_d | default: 640 }}px;
      --pa-mt: {{ as.margin_top_d | default: 8 }}px;
      --pa-mb: {{ as.margin_bottom_d | default: 8 }}px;

      /* section spacing mobile */
      --pa-pt-m: {{ as.pad_top_m | default: 8 }}px;
      --pa-pb-m: {{ as.pad_bottom_m | default: 8 }}px;
      --pa-pl-m: {{ as.pad_left_m | default: 8 }}px;
      --pa-pr-m: {{ as.pad_right_m | default: 8 }}px;
      --pa-w-m:  {{ as.section_width_m | default: 340 }}px;
      --pa-mt-m: {{ as.margin_top_m | default: 8 }}px;
      --pa-mb-m: {{ as.margin_bottom_m | default: 8 }}px;

      /* text */
      --pa-text-color: {{ as.text_color | default: '#111111' }};
      --pa-text-fw: {{ as.text_weight | default: '600' }};
      --pa-text-fs: {{ as.text_size | default: 16 }}px;
      --pa-add-fw: {{ as.add_text_weight | default: '700' }};

      /* price */
      --pa-price-color: {{ as.price_color | default: '#111111' }};
      --pa-price-fs: {{ as.price_size | default: 16 }}px;
      --pa-price-fw: {{ as.price_weight | default: '600' }};
      --pa-compare-color: {{ as.compare_color | default: '#9aa0a6' }};
      --pa-compare-fs: {{ as.compare_size | default: 14 }}px;
      --pa-compare-fw: {{ as.compare_weight | default: '400' }};

      /* image */
      --pa-img-size: {{ as.image_size | default: 54 }}px;
      --pa-img-radius: {{ as.image_radius | default: 10 }}px;

      /* checkbox */
      --pa-chk-bg: {{ as.chk_bg | default: '#111111' }};
      --pa-chk-bg-checked: {{ as.chk_bg_checked | default: '#111111' }};
      --pa-chk-check: {{ as.chk_check_color | default: '#ffffff' }};

      /* active/verified */
      --pa-active-border: {{ as.active_border_color | default: '#FFD54A' }};
      --pa-active-border-w: {{ as.active_border_width | default: 2 }}px;
      --pa-verified-checked: {{ as.verified_checked_color | default: '#23C55E' }};

      /* variant selector spacing */
      --pa-var-mt: {{ as.variant_space_top | default: 8 }}px;
      --pa-var-mb: {{ as.variant_space_bottom | default: 8 }}px;
     ">

  <div class="pa__card" data-card>
    <label class="pa__left">
      <input type="checkbox" class="pa__chk" data-addon-check aria-label="Add {{ addon.title | default: 'Product' }}">
      <span class="pa__box" aria-hidden="true"></span>
      <span class="pa__texts">
        <span class="pa__title">
          <strong class="pa__add">Add</strong>
          <span class="pa__name">{{ addon.title }}</span>

          {%- if as.show_verified -%}
          <span class="pa__verified" aria-hidden="true" title="Added">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2l2.39 1.2 2.67-.05 1.6 2.2 2.44 1.14-.5 2.63.98 2.45-2.06 1.82-.9 2.48-2.62-.3-2.3 1.32-2.3-1.32-2.62.3-.9-2.48-2.06-1.82.98-2.45-.5-2.63L6.34 5.35l1.6-2.2 2.67.05L12 2zm-1.2 12.4l5-5-1.4-1.4-3.6 3.6-1.6-1.6-1.4 1.4 3 3z"/>
            </svg>
          </span>
          {%- endif -%}
        </span>

        {%- assign v = display_variant -%}
        <span class="pa__prices">
          <span class="pa__price">{{ v.price | money }}</span>
          {%- if v.compare_at_price > v.price -%}
          <span class="pa__compare">{{ v.compare_at_price | money }}</span>
          {%- endif -%}
        </span>
      </span>
    </label>

    <div class="pa__right">
      <div class="pa__img">
        {%- assign img = v.featured_media | default: addon.featured_media -%}
        {%- if img -%}
          <img
            src="{{ img | image_url: width: 200, height: 200, crop: 'center' }}"
            alt="{{ addon.title | escape }}"
            loading="lazy" decoding="async">
        {%- else -%}
          <div class="pa__ph" aria-hidden="true"></div>
        {%- endif -%}
      </div>
    </div>
  </div>

  {%- if as.enable_variant_selector and addon.variants.size > 1 -%}
    <div class="pa__variant-row">
      <select class="pa__select" data-variant>
        {%- for var in addon.variants -%}
          <option value="{{ var.id }}" {% if var.id == v.id %}selected{% endif %} {% unless var.available %}disabled{% endunless %}>
            {{ var.title }}{% unless var.available %} – {{ 'products.product.sold_out' | t }}{% endunless %}
          </option>
        {%- endfor -%}
      </select>
    </div>
  {%- endif -%}
</div>

<style>

  #PA-{{ block.id }}{
    width: var(--pa-w);
    max-width: 100%;
    margin: var(--pa-mt) 0 var(--pa-mb);
  }
  #PA-{{ block.id }} .pa__card{
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    background: var(--pa-bg);
    border: 1.5px solid var(--pa-border);
    border-radius: var(--pa-radius);
    padding: var(--pa-pt) var(--pa-pr) var(--pa-pb) var(--pa-pl);
    box-shadow: inset 0 0 0 var(--pa-active-border-w) rgba(0,0,0,0); 
    transition: box-shadow .16s ease, border-color .16s ease, background .16s ease;
  }
  #PA-{{ block.id }} .pa__card.is-active{
    box-shadow: inset 0 0 0 var(--pa-active-border-w) var(--pa-active-border);
  }


  @media (max-width:768px){
    #PA-{{ block.id }}{ width: var(--pa-w-m); margin: var(--pa-mt-m) 0 var(--pa-mb-m); }
    #PA-{{ block.id }} .pa__card{
      padding: var(--pa-pt-m) var(--pa-pr-m) var(--pa-pb-m) var(--pa-pl-m);
    }
  }

  
  #PA-{{ block.id }} .pa__left{
    display:flex; align-items:center; gap:10px; flex: 1 1 auto; cursor: pointer;
  }
  #PA-{{ block.id }} .pa__chk{ position:absolute; opacity:0; pointer-events:none; }


  #PA-{{ block.id }} .pa__box{
    width: 22px; height: 22px; border-radius: 6px; background: var(--pa-chk-bg);
    position: relative; display:block; flex: 0 0 22px;
  }
  #PA-{{ block.id }} .pa__box::after{
    content:''; position:absolute; top:50%; left:50%;
    width: 10px; height: 6px;
    border:2px solid var(--pa-chk-check); border-top:0; border-right:0;
    transform: translate(-50%, -60%) rotate(-45deg) scale(0);
    transform-origin: center;
    transition: transform .14s ease;
  }
  #PA-{{ block.id }} input.pa__chk:checked + .pa__box{
    background: var(--pa-chk-bg-checked);
  }
  #PA-{{ block.id }} input.pa__chk:checked + .pa__box::after{
    transform: translate(-50%, -60%) rotate(-45deg) scale(1);
  }

  #PA-{{ block.id }} .pa__texts{ display:flex; flex-direction:column; gap:2px; }
  #PA-{{ block.id }} .pa__title{
    color: var(--pa-text-color); font-size: var(--pa-text-fs); line-height:1.2; display:flex; align-items:center; gap:6px; flex-wrap:wrap;
  }
  #PA-{{ block.id }} .pa__title .pa__add{ font-weight: var(--pa-add-fw); }
  #PA-{{ block.id }} .pa__title .pa__name{ font-weight: var(--pa-text-fw); }

  #PA-{{ block.id }} .pa__verified{
    display:none; /* shown when active */
  }
  #PA-{{ block.id }} .pa__card.is-active .pa__verified{
    display:inline-flex; color: var(--pa-verified-checked);
  }

  #PA-{{ block.id }} .pa__prices{ display:flex; align-items:center; gap:10px; }
  #PA-{{ block.id }} .pa__price{ color: var(--pa-price-color); font-size: var(--pa-price-fs); font-weight: var(--pa-price-fw); }
  #PA-{{ block.id }} .pa__compare{ color: var(--pa-compare-color); font-size: var(--pa-compare-fs); font-weight: var(--pa-compare-fw); text-decoration: line-through; }

  /* right side */
  #PA-{{ block.id }} .pa__right{ display:flex; align-items:center; gap:10px; }
  #PA-{{ block.id }} .pa__img{
    width: var(--pa-img-size); height: var(--pa-img-size);
    border-radius: var(--pa-img-radius); overflow:hidden; background:#fff; border:1px solid var(--pa-border);
  }
  #PA-{{ block.id }} .pa__img img{ width:100%; height:100%; object-fit: cover; }
  #PA-{{ block.id }} .pa__ph{ width:100%; height:100%; background:#e6e6e6; }

  /* variant selector: left aligned under the card, minimal */
  #PA-{{ block.id }} .pa__variant-row{
    margin: var(--pa-var-mt) 0 var(--pa-var-mb);
    display:block;
  }
  #PA-{{ block.id }} .pa__select{
    font-size: 12px; padding: 6px 8px;
    border:1px solid var(--pa-border); border-radius: 8px; background:#fff;
  }
</style>

<script>
(function(){
  const root = document.getElementById('PA-{{ block.id }}');
  if(!root) return;

  const checkbox = root.querySelector('[data-addon-check]');
  const card     = root.querySelector('[data-card]');
  const selectEl = root.querySelector('[data-variant]');
  let variantId  = {{ display_variant.id | default: 'null' }};
  const addonTitle = {{ addon.title | json }};

  function getVariantId(){
    if (selectEl) return parseInt(selectEl.value,10);
    return variantId;
  }

  async function ajax(url, payload){
    const res = await fetch(url, {
      method: 'POST',
      headers: {'Content-Type': 'application/json', 'Accept': 'application/json'},
      body: JSON.stringify(payload)
    });
    return res.json().catch(()=> ({}));
  }

  async function addAddon(){
    const vid = getVariantId();
    if(!vid) return;
    card.classList.add('is-active');
    checkbox.setAttribute('aria-busy','true');
    await ajax('/cart/add.js', { items: [{ id: vid, quantity: 1 }] });
    checkbox.removeAttribute('aria-busy');
    dispatchEvent(new CustomEvent('cart:refresh', {bubbles:true}));
  }

  async function removeAddon(){
    const vid = getVariantId();
    if(!vid) return;
    card.classList.remove('is-active');
    checkbox.setAttribute('aria-busy','true');
    await ajax('/cart/change.js', { id: vid, quantity: 0 });
    checkbox.removeAttribute('aria-busy');
    dispatchEvent(new CustomEvent('cart:refresh', {bubbles:true}));
  }


  async function onVariantChange(){
    if(!checkbox.checked) return;
    await removeAddon();
    await addAddon();
  }

  checkbox.addEventListener('change', (e)=>{
    if(e.target.checked){ addAddon(); }
    else { removeAddon(); }
  });

  if(selectEl){
    selectEl.addEventListener('change', onVariantChange);
  }


  const productForm = root.closest('form[action*="/cart/add"]');
  if (productForm){
    productForm.addEventListener('submit', async (ev)=>{
      if(!checkbox.checked) return;
      await addAddon();
    }, {capture:true});
  }
})();
</script>


{%- when 'lod_testimonials_block' -%}
{%- assign bs = block.settings -%}

{%- assign _has_any = false -%}
{%- if bs.t1_enable or bs.t2_enable or bs.t3_enable or bs.t4_enable or bs.t5_enable -%}{%- assign _has_any = true -%}{%- endif -%}

{%- if _has_any -%}
{% style %}
.lod-testimonial-section-{{ block.id }}{
  --items-per-row: {{ bs.cards_per_row }} !important;
  --items-gap: {{ bs.cards_gap }}px !important;
  --mobile-peek-width: {{ bs.mobile_peek_percentage }}% !important;

  /* Trustpilot-style star variables (desktop) */
  --lod-star-tile: {{ bs.star_size }}px;
  --lod-star-glyph: {{ bs.star_icon_scale_d }}%;
  --lod-star-radius: {{ bs.star_radius }}px;

  width:100% !important;
  margin-top: {{ bs.section_margin_top }}px !important;
  margin-bottom: {{ bs.section_margin_bottom }}px !important;
  background-color: transparent !important;
}

.lod-testimonial-wrapper-{{ block.id }}{ position:relative !important; width:100% !important; }

/* RIGHT EDGE FADE (adapts to background color via --fade-color) */
.lod-testimonial-wrapper-{{ block.id }}::after{
  content:"" !important;
  position:absolute !important;
  top:0 !important;
  right:0 !important;
  width:60px !important;
  height:100% !important;
  pointer-events:none !important;
  background: linear-gradient(to left, var(--fade-color, #ffffff) 0%, rgba(0,0,0,0) 70%) !important;
  transition: opacity .3s ease !important;
}

.lod-testimonial-container-{{ block.id }}{
  display:flex !important; flex-wrap:nowrap !important;
  overflow-x:hidden !important; scroll-behavior:smooth !important;
  scrollbar-width:none !important; -ms-overflow-style:none !important;
  gap: var(--items-gap) !important; padding:0 !important; user-select:none !important;
  width:100% !important; box-sizing:border-box !important; scroll-snap-type:x mandatory !important;
  transition: padding .3s ease !important;
}
.lod-testimonial-container-{{ block.id }}::-webkit-scrollbar{ display:none !important; }
.lod-testimonial-container-{{ block.id }}.grabbing{ cursor:grabbing !important; scroll-behavior:auto !important; }

/* Desktop: add +20px right padding and keep it even when last card is active */
@media (min-width:750px){
  .lod-testimonial-container-{{ block.id }}{
    padding-right: 20px !important;
    scroll-padding-right: 20px !important;
  }
}

.lod-testimonial-wrapper-{{ block.id }}.last-card-active-{{ block.id }} .lod-testimonial-container-{{ block.id }}{
  padding-left: var(--mobile-peek-width) !important;
  padding-right: 0 !important;
  scroll-padding-left: var(--mobile-peek-width) !important;
  scroll-padding-right: 0 !important;
  scroll-snap-type: none !important;
}
/* Override last-card on desktop so the extra 20px still applies */
@media (min-width:750px){
  .lod-testimonial-wrapper-{{ block.id }}.last-card-active-{{ block.id }} .lod-testimonial-container-{{ block.id }}{
    padding-right: 20px !important;
    scroll-padding-right: 20px !important;
  }
}

.lod-testimonial-block-{{ block.id }}{
  min-width: calc((100% / var(--items-per-row)) - (var(--items-gap) * (var(--items-per-row) - 1) / var(--items-per-row))) !important;
  width:     calc((100% / var(--items-per-row)) - (var(--items-gap) * (var(--items-per-row) - 1) / var(--items-per-row))) !important;
  flex: 0 0  calc((100% / var(--items-per-row)) - (var(--items-gap) * (var(--items-per-row) - 1) / var(--items-per-row))) !important;
  scroll-snap-align:start !important; scroll-snap-stop:always !important;
  padding: {{ bs.card_padding }}px !important;
  background: {{ bs.card_background_color }} !important;
  border-radius: {{ bs.card_border_radius }}px !important;
  box-sizing:border-box !important;
  box-shadow:none !important;
  transform:none !important; transition:none !important;
}
media (min-width: 1024px){
  .lod-testimonial-block-{{ block.id }}{
    max-width: 280px !important; /* adjust this value until it looks right */
  }
}
.lod-testimonial-block-{{ block.id }}:hover{ transform:none !important; transition:none !important; box-shadow:none !important; }

.lod-testimonial-header-{{ block.id }}{ display:flex !important; flex-wrap:wrap !important; align-items:center !important; gap:10px !important; margin-bottom:12px !important; }

/* ==== TRUSTPILOT-STYLE STARS ==== */
.lod-testimonial-stars-{{ block.id }}{ display:inline-flex !important; align-items:center !important; gap: {{ bs.star_gap }}px !important; }

.lod-testimonial-stars-{{ block.id }} .lod-star{
  position:relative !important; flex:0 0 auto !important;
  width:var(--lod-star-tile) !important; height:var(--lod-star-tile) !important;
  border-radius:var(--lod-star-radius) !important; overflow:hidden !important;
}

.lod-testimonial-stars-{{ block.id }} .lod-star__tile{
  position:absolute !important; inset:0 !important;
  background: {{ bs.star_background_color }} !important;
}

.lod-testimonial-stars-{{ block.id }} .lod-star--empty .lod-star__tile{
  background: {{ bs.star_empty_background_color }} !important;
}

.lod-testimonial-stars-{{ block.id }} .lod-star__icon{
  position:absolute !important; inset:0 !important; display:grid !important; place-items:center !important;
}
.lod-testimonial-stars-{{ block.id }} .lod-star__icon svg{
  width:var(--lod-star-glyph) !important; height:var(--lod-star-glyph) !important;
  fill: {{ bs.star_color }} !important; display:block !important;
}
/* ==== /STARS ==== */

.lod-testimonial-verified-{{ block.id }}{
  display:{% if bs.show_verified_badge %}inline-flex{% else %}none{% endif %} !important;
  align-items:center !important; justify-content:center !important;
  color: {{ bs.verified_text_color }} !important; font-size: {{ bs.verified_text_size }}px !important;
  background-color: {{ bs.verified_icon_bg_color }} !important;
  padding: {{ bs.verified_badge_padding_y }}px {{ bs.verified_badge_padding_x }}px !important;
  border-radius: {{ bs.verified_badge_radius }}px !important; line-height:1 !important;
}

.lod-testimonial-content-{{ block.id }}{ margin-bottom:10px !important; }
.lod-testimonial-title-{{ block.id }}{ font-size:{{ bs.title_size }}px !important; font-weight:600 !important; margin:0 0 10px 0 !important; word-break:break-word !important; line-height:1 !important; color:{{ bs.title_text_color }} !important; }
.lod-testimonial-text-{{ block.id }} { font-size:{{ bs.text_size }}px !important; line-height:1.5 !important; color:{{ bs.testimonial_text_color }} !important; word-break:break-word !important; }
.lod-testimonial-author-{{ block.id }}{ font-size:{{ bs.author_size }}px !important; font-weight:500 !important; color:{{ bs.author_text_color }} !important; word-break:break-word !important; line-height:1 !important; }

.lod-testimonial-nav-container-{{ block.id }}{
  position:absolute !important; top:50% !important; left:0 !important; right:0 !important; transform:translateY(-50%) !important;
  pointer-events:none !important; opacity:0 !important; transition:opacity .3s ease !important;
}
.lod-testimonial-wrapper-{{ block.id }}:hover .lod-testimonial-nav-container-{{ block.id }}{ opacity:1 !important; }

.lod-testimonial-nav-button-{{ block.id }}.prev{ position:absolute !important; left:10px !important; }
.lod-testimonial-nav-button-{{ block.id }}.next{ position:absolute !important; right:10px !important; }
.lod-testimonial-nav-button-{{ block.id }}{
  background: {{ bs.nav_background_color }} !important; color: {{ bs.nav_arrow_color }} !important;
  border:1px solid {{ bs.nav_arrow_color }} !important; width:30px !important; height:30px !important;
  display:flex !important; align-items:center !important; justify-content:center !important;
  border-radius:50% !important; cursor:pointer !important; transition:all .3s ease !important; pointer-events:auto !important; padding:0 !important; position:relative !important;
}
.lod-testimonial-nav-button-{{ block.id }} > svg{ width:24px !important; height:24px !important; fill:{{ bs.nav_arrow_color }} !important; position:absolute !important; left:50% !important; top:50% !important; transform:translate(-50%,-50%) !important; }
.lod-testimonial-nav-button-{{ block.id }}.prev > svg{ margin-left:-1px !important; }
.lod-testimonial-nav-button-{{ block.id }}.next > svg{ margin-left: 1px !important; }
.lod-testimonial-nav-button-{{ block.id }}.hidden{ opacity:0 !important; pointer-events:none !important; }

@media (max-width:749px){
  .lod-testimonial-block-{{ block.id }}{ min-width:calc(100% - var(--mobile-peek-width)) !important; width:calc(100% - var(--mobile-peek-width)) !important; flex:0 0 calc(100% - var(--mobile-peek-width)) !important; }
  .lod-testimonial-block-{{ block.id }}:last-child{ scroll-snap-align:end !important; }
  .lod-testimonial-container-{{ block.id }}{ overflow-x:auto !important; padding:10px var(--mobile-peek-width) 10px 0 !important; scroll-padding-left:0 !important; scroll-padding-right:var(--mobile-peek-width) !important; scroll-snap-type:x mandatory !important; touch-action:pan-x !important; -webkit-overflow-scrolling:touch !important; cursor:grab !important; }

  .lod-testimonial-section-{{ block.id }}{
    --lod-star-tile: {{ bs.star_size_mobile }}px;
    --lod-star-glyph: {{ bs.star_icon_scale_m }}%;
  }

  .lod-testimonial-nav-container-{{ block.id }}{ display:none !important; }
  .lod-testimonial-title-{{ block.id }}{ font-size:{{ bs.title_size_mobile }}px !important; }
  .lod-testimonial-text-{{ block.id }} { font-size:{{ bs.text_size_mobile }}px !important; }
  .lod-testimonial-author-{{ block.id }}{ font-size:{{ bs.author_size_mobile }}px !important; }
}
{% endstyle %}

<div class="lod-testimonial-section-{{ block.id }}">
  <div class="lod-testimonial-wrapper-{{ block.id }}">
    <div class="lod-testimonial-container-{{ block.id }}" id="lod-testimonial-container-{{ block.id }}">
      {%- capture _items -%}
        {%- if bs.t1_enable -%}1,{%- endif -%}
        {%- if bs.t2_enable -%}2,{%- endif -%}
        {%- if bs.t3_enable -%}3,{%- endif -%}
        {%- if bs.t4_enable -%}4,{%- endif -%}
        {%- if bs.t5_enable -%}5,{%- endif -%}
      {%- endcapture -%}
      {%- assign _items = _items | split: ',' -%}

      {%- for idx in _items -%}
        {%- if idx != blank -%}
          {%- assign key_title  = 't' | append: idx | append: '_title'  -%}
          {%- assign key_text   = 't' | append: idx | append: '_text'   -%}
          {%- assign key_author = 't' | append: idx | append: '_author' -%}
          {%- assign key_rating = 't' | append: idx | append: '_rating' -%}

          {%- assign rating_int = bs[key_rating] | default: 5 | plus: 0 -%}
          {%- if rating_int < 2 -%}{%- assign rating_int = 2 -%}{%- endif -%}
          {%- if rating_int > 5 -%}{%- assign rating_int = 5 -%}{%- endif -%}

          <div class="lod-testimonial-block-{{ block.id }}">
            <div class="lod-testimonial-header-{{ block.id }}">
              <div class="lod-testimonial-stars-{{ block.id }}">
                {%- for i in (1..5) -%}
                  {%- assign is_empty = false -%}
                  {%- if i > rating_int -%}{%- assign is_empty = true -%}{%- endif -%}
                  <span class="lod-star{% if is_empty %} lod-star--empty{% endif %}">
                    <span class="lod-star__tile"></span>
                    <span class="lod-star__icon">
                      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3.7l2.1 4.25 4.7.68-3.4 3.31.8 4.64L12 14.96 7.8 16.58l.8-4.64L5.2 8.63l4.7-.68L12 3.7z"/></svg>
                    </span>
                  </span>
                {%- endfor -%}
              </div>
            </div>

            <div class="lod-testimonial-content-{{ block.id }}">
              <div class="lod-testimonial-title-{{ block.id }}">{{ bs[key_title] }}</div>
              <div class="lod-testimonial-text-{{ block.id }}">{{ bs[key_text] }}</div>
            </div>

            <div class="lod-testimonial-author-wrapper-{{ block.id }}" style="display:flex!important;align-items:baseline!important;gap:10px!important;">
              <div class="lod-testimonial-author-{{ block.id }}">{{ bs[key_author] }}</div>
              <div class="lod-testimonial-verified-{{ block.id }}"><span>{{ bs.verified_text }}</span></div>
            </div>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>

    <div class="lod-testimonial-nav-container-{{ block.id }}">
      <button class="lod-testimonial-nav-button-{{ block.id }} prev" id="prev-{{ block.id }}">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
      </button>
      <button class="lod-testimonial-nav-button-{{ block.id }} next" id="next-{{ block.id }}">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
      </button>
    </div>
  </div>
</div>

<script>
(function(){
  function setupLodTestimonialCarousel_{{ block.id }}(){
    var carousel=document.getElementById('lod-testimonial-container-{{ block.id }}'); if(!carousel) return;
    var prev=document.getElementById('prev-{{ block.id }}'); var next=document.getElementById('next-{{ block.id }}');
    var wrap=carousel.closest('.lod-testimonial-wrapper-{{ block.id }}'); if(!prev||!next||!wrap) return;

    /* Detect actual background color behind the section and apply to fade */
    function getBgColor(el){
      while(el && el !== document.documentElement){
        var bg=getComputedStyle(el).backgroundColor;
        if(bg && bg!=='rgba(0, 0, 0, 0)' && bg!=='transparent') return bg;
        el=el.parentElement;
      }
      return 'rgb(255,255,255)';
    }
    function applyFadeColor(){
      var bg=getBgColor(wrap);
      wrap.style.setProperty('--fade-color', bg);
    }
    applyFadeColor();
    window.addEventListener('resize', applyFadeColor);

    function updateNav(){
      var atStart=carousel.scrollLeft<=1;
      var atEnd=carousel.scrollLeft>=(carousel.scrollWidth-carousel.clientWidth-1);
      prev.classList.toggle('hidden',atStart); next.classList.toggle('hidden',atEnd);
      wrap.classList.toggle('last-card-active-{{ block.id }}',atEnd);
    }
    function itemWidth(){
      var first=carousel.querySelector('.lod-testimonial-block-{{ block.id }}'); if(!first) return 0;
      var gap=parseInt(getComputedStyle(carousel).getPropertyValue('gap'))||{{ bs.cards_gap }};
      return first.offsetWidth+gap;
    }
    function goTo(idx){
      var iw=itemWidth(); var x=idx*iw;
      x=Math.min(x,carousel.scrollWidth-carousel.clientWidth); x=Math.max(0,x);
      carousel.scrollTo({left:x,behavior:'smooth'}); setTimeout(updateNav,320);
    }
    prev.addEventListener('click',function(){ carousel.style.scrollSnapType='none'; var iw=itemWidth(); var i=Math.round(carousel.scrollLeft/iw); goTo(Math.max(i-1,0)); });
    next.addEventListener('click',function(){ carousel.style.scrollSnapType='none'; var iw=itemWidth(); var i=Math.round(carousel.scrollLeft/iw); goTo(Math.min(i+1,carousel.children.length-1)); });

    var down=false,sx=0,sl=0,st=0,sp=0; var DESK=function(){return window.innerWidth>749;}; var V=0.45;
    function start(e){ if(e.type.startsWith('touch')||!DESK()){ down=true; sx=(e.type==='mousedown'?e.pageX:e.touches[0].pageX); sl=carousel.scrollLeft; st=Date.now(); sp=sx; carousel.classList.add('grabbing'); carousel.style.scrollBehavior='auto'; carousel.style.scrollSnapType='none'; } }
    function move(e){ if(!down) return; e.preventDefault(); var x=(e.type==='mousemove'?e.pageX:e.touches[0].pageX); carousel.scrollLeft=sl+(sx-x); }
    function end(e){ if(!down) return; down=false; carousel.classList.remove('grabbing'); var et=Date.now(); var ex=(e.type==='mouseup'?e.pageX:(e.changedTouches?e.changedTouches[0].pageX:sp)); var v=Math.abs((sp-ex)/(et-st)); var iw=itemWidth(); var i=Math.round(carousel.scrollLeft/iw); if(v>V) i+=( (sp-ex)>0 ? 1 : -1 ); i=Math.max(0,Math.min(i,carousel.children.length-1)); goTo(i); }
    if(!DESK()){ carousel.addEventListener('mousedown',start); document.addEventListener('mousemove',move); document.addEventListener('mouseup',end); }
    carousel.addEventListener('touchstart',start,{passive:true}); carousel.addEventListener('touchmove',move,{passive:false}); carousel.addEventListener('touchend',end);
    carousel.addEventListener('contextmenu',function(e){e.preventDefault();});
    window.addEventListener('resize',function(){ if(DESK()){ carousel.removeEventListener('mousedown',start); document.removeEventListener('mousemove',move); document.removeEventListener('mouseup',end);} else { carousel.addEventListener('mousedown',start);} updateNav(); });

    updateNav();
  }
  if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded',setupLodTestimonialCarousel_{{ block.id }}); } else { setupLodTestimonialCarousel_{{ block.id }}(); }
})();
</script>
{%- endif -%}



{%- when 'bundle_save' -%}  
{%- assign bs = block.settings -%}

{%- assign tiers = '' -%}
{%- if bs.enable_tier_1 -%}{% assign tiers = tiers | append: '1,' %}{%- endif -%}
{%- if bs.enable_tier_2 -%}{% assign tiers = tiers | append: '2,' %}{%- endif -%}
{%- if bs.enable_tier_3 -%}{% assign tiers = tiers | append: '3,' %}{%- endif -%}
{%- if bs.enable_tier_4 -%}{% assign tiers = tiers | append: '4,' %}{%- endif -%}
{%- assign tiers = tiers | split: ',' -%}

<div id="BundleSave-{{ block.id }}" class="bundle-save {% if bs.enable_animations %}has-anim{% endif %}" {{ block.shopify_attributes }}
     style="
       --bs-accent: {{ bs.accent | default: '#E93B3B' }};
       --bs-title:  {{ bs.heading_color | default: '#111111' }};
       --bs-title-size-d: {{ bs.heading_size_d | default: 22 }}px;
       --bs-title-size-m: {{ bs.heading_size_m | default: 18 }}px;
       --bs-title-w: {{ bs.heading_weight | default: 800 }};
       --bs-title-align: {{ bs.heading_align | default: 'center' }};
       --bs-price-size-d: {{ bs.price_size_d | default: 18 }}px;
       --bs-price-size-m: {{ bs.price_size_m | default: 16 }}px;
       --bs-price-w: {{ bs.price_weight | default: 800 }};
       --bs-label-w: {{ bs.label_weight | default: 700 }};
       --bs-idx-w: {{ bs.idx_weight | default: 700 }};
       --bs-unit-size-d:  {{ bs.unit_size_d  | default: 14 }}px;
       --bs-unit-size-m:  {{ bs.unit_size_m  | default: 13 }}px;
       --bs-unit-color:   {{ bs.unit_text_color | default: '#666666' }};
       --bs-selected-border: {{ bs.selected_border_color | default: bs.accent }};
       --bs-selected-dot:    {{ bs.selected_dot_color    | default: bs.accent }};
       --bs-dot-ring:        {{ bs.dot_ring_color        | default: '#FFFFFF' }};
       --bs-ribbon-bg:   {{ bs.ribbon_bg | default: bs.accent }};
       --bs-ribbon-text: {{ bs.ribbon_text | default: '#FFFFFF' }};
       --bs-maxw: {{ bs.maxw_d | default: 1200 }}px;
       --bs-pl:   {{ bs.pl_d   | default: 0 }}px;
       --bs-pr:   {{ bs.pr_d   | default: 0 }}px;
       --bs-pt:   {{ bs.pt_d   | default: 0 }}px;
       --bs-pb:   {{ bs.pb_d   | default: 0 }}px;
       --bs-pl-m: {{ bs.pl_m   | default: 0 }}px;
       --bs-pr-m: {{ bs.pr_m   | default: 0 }}px;
       --bs-pt-m: {{ bs.pt_m   | default: 0 }}px;
       --bs-pb-m: {{ bs.pb_m   | default: 0 }}px;
       --bs-scale-d: {{ bs.scale_d | default: 1 }};
       --bs-scale-m: {{ bs.scale_m | default: 1 }};
       --bs-gap-heading: {{ bs.gap_heading_tiers | default: 12 }}px;
     ">
  <div class="bundle-save__inner">
    <div class="bundle-save__scale">
      <h3 class="bundle-save__title">{{ bs.heading }}</h3>

      <div class="bundle-save__group" role="radiogroup" aria-label="Bundle & Save options">
        {%- for t in tiers -%}{% if t != blank %}
          {%- assign k_qty      = 't' | append: t | append: '_qty' -%}
          {%- assign k_label    = 't' | append: t | append: '_label' -%}
          {%- assign k_disc     = 't' | append: t | append: '_discount_percent' -%}
          {%- assign k_popular  = 't' | append: t | append: '_popular' -%}
          {%- assign k_freeship = 't' | append: t | append: '_free_shipping' -%}

          {%- assign qty       = bs[k_qty] | plus: 0 -%}
          {%- assign label     = bs[k_label] -%}
          {%- assign disc_pct  = bs[k_disc] | plus: 0 -%}
          {%- assign is_pop    = bs[k_popular] -%}
          {%- assign has_free  = bs[k_freeship] -%}
          {%- assign eff_qty   = qty | minus: 1 -%}
          {%- if eff_qty < 0 -%}{% assign eff_qty = 0 %}{%- endif -%}

          <label class="bundle-card" data-tier="{{ t }}" data-qty="{{ qty }}" data-disc="{{ disc_pct }}" data-eff-qty="{{ eff_qty }}">
            <input class="bundle-card__radio" type="radio" name="bundle_tier_{{ section.id }}" value="{{ t }}" {% if forloop.first %}checked{% endif %}>
            <span class="bundle-card__body">
              <span class="bundle-card__left">
                <span class="bundle-card__dot" aria-hidden="true"></span>
                <span class="bundle-card__label">{{ label }}</span>
                {% if has_free %}<span class="bundle-card__badge">Free Shipping</span>{% endif %}
              </span>

              <span class="bundle-card__right">
                <span class="bundle-card__price" data-price>—</span>
                <span class="bundle-card__compare" data-compare></span>
                <span class="bundle-card__unit" data-unit>—</span>
              </span>

              {% if is_pop %}<span class="bundle-card__ribbon">Most Popular</span>{% endif %}
            </span>

            <div class="bundle-card__variants" hidden>
              {%- for i in (1..10) -%}{% if i <= eff_qty %}
                <div class="bundle-variant">
                  <span class="bundle-variant__idx">#{{ i }}</span>
                  <select class="bundle-variant__select" aria-label="Variant for extra item {{ i }}">
                    {%- for v in product.variants -%}
                      <option value="{{ v.id }}" {% unless v.available %}disabled{% endunless %}>
                        {{ v.title }} {% unless v.available %}- {{ 'products.product.sold_out' | t }}{% endunless %}
                      </option>
                    {%- endfor -%}
                  </select>
                </div>
              {% endif %}{%- endfor -%}
            </div>
          </label>
        {% endif %}{%- endfor -%}
      </div>
    </div>
  </div>
</div>

<script type="application/json" id="BundleVariantPrices-{{ block.id }}">
{
  "currency": {{ cart.currency.iso_code | json }},
  "money_format": {{ shop.money_format | json }},
  "variants": [
    {%- for v in product.variants -%}
      {"id":{{ v.id }},"price":{{ v.price }},"compare_at_price":{{ v.compare_at_price | default: v.price }},"available":{{ v.available | json }}}
      {%- unless forloop.last -%},{% endunless -%}
    {%- endfor -%}
  ],
  "fallback_price": {{ product.price }},
  "fallback_compare": {{ product.compare_at_price | default: product.price }},
  "product_title": {{ product.title | json }}
}
</script>

<style>
  #BundleSave-{{ block.id }} .bundle-save__inner{
    max-width: var(--bs-maxw);
    margin-inline: auto;
    padding-left: var(--bs-pl);
    padding-right: var(--bs-pr);
    padding-top: var(--bs-pt);
    padding-bottom: var(--bs-pb);
  }
  @media (max-width: 768px){
    #BundleSave-{{ block.id }} .bundle-save__inner{
      padding-left: var(--bs-pl-m);
      padding-right: var(--bs-pr-m);
      padding-top: var(--bs-pt-m);
      padding-bottom: var(--bs-pb-m);
    }
  }
  #BundleSave-{{ block.id }} .bundle-save__scale{
    transform-origin: top center;
    transform: scale(var(--bs-scale-d));
  }
  @media (max-width:768px){
    #BundleSave-{{ block.id }} .bundle-save__scale{
      transform: scale(var(--bs-scale-m));
    }
  }
  #BundleSave-{{ block.id }} .bundle-save__title{
    margin: 0 0 var(--bs-gap-heading);
    font-weight: var(--bs-title-w);
    color: var(--bs-title) !important;
    text-align: var(--bs-title-align);
    font-size: var(--bs-title-size-d);
    letter-spacing:.02em;
  }
  @media (max-width:768px){
    #BundleSave-{{ block.id }} .bundle-save__title{ font-size: var(--bs-title-size-m); }
  }
  #BundleSave-{{ block.id }} .bundle-save__group{ display:flex; flex-direction:column; gap:14px; }
  #BundleSave-{{ block.id }} .bundle-card{ position:relative; display:block; }
  #BundleSave-{{ block.id }} .bundle-card__radio{ position:absolute; opacity:0; pointer-events:none; }
  #BundleSave-{{ block.id }} .bundle-card__body{
    display:grid; grid-template-columns: 1fr auto; gap:12px;
    padding:16px; border:2px solid #ffd1d1; border-radius:14px; background:#fff;
    transition: border-color .2s ease, background-color .2s ease, box-shadow .2s ease;
  }
  #BundleSave-{{ block.id }}.has-anim .bundle-card__body:hover{
    box-shadow: 0 3px 10px rgba(0,0,0,.05);
    border-color: #ffc9c9;
  }
  #BundleSave-{{ block.id }} .bundle-card__radio:checked + .bundle-card__body{
    border-color: var(--bs-selected-border);
    background: #fff8f8;
  }
  #BundleSave-{{ block.id }} .bundle-card__left{ display:flex; align-items:center; gap:10px; min-width:0; }
  #BundleSave-{{ block.id }} .bundle-card__dot{
    width: 18px; height: 18px; border-radius: 50%;
    box-sizing: content-box;
    border:2px solid var(--bs-accent); background:#fff; display:inline-block;
    position: relative; flex:0 0 auto;
  }
  #BundleSave-{{ block.id }} .bundle-card__radio:checked + .bundle-card__body .bundle-card__dot{
    background: var(--bs-selected-dot);
    border-color: var(--bs-selected-border);
    box-shadow: 0 0 0 2px var(--bs-dot-ring) inset;
  }
  #BundleSave-{{ block.id }} .bundle-card__label{ font-weight: var(--bs-label-w); color:#111; }
  #BundleSave-{{ block.id }} .bundle-card__badge{
    margin-left:8px; font-size:.8rem; padding:4px 8px; border-radius:999px; background:#ffecec; color:var(--bs-accent); border:1px solid #ffd7d7; white-space:nowrap;
  }
  #BundleSave-{{ block.id }} .bundle-card__right{ text-align:right; display:flex; flex-direction:column; align-items:flex-end; }
  #BundleSave-{{ block.id }} .bundle-card__price{
    color: var(--bs-accent); font-weight: var(--bs-price-w); line-height:1; font-size: var(--bs-price-size-d);
  }
  #BundleSave-{{ block.id }} .bundle-card__compare{ color:#999; text-decoration:line-through; margin-top:4px; line-height:1; }
  #BundleSave-{{ block.id }} .bundle-card__unit{
    color: var(--bs-unit-color);
    margin-top:6px; font-size: var(--bs-unit-size-d);
  }
  @media (max-width:768px){
    #BundleSave-{{ block.id }} .bundle-card__price{ font-size: var(--bs-price-size-m); }
    #BundleSave-{{ block.id }} .bundle-card__unit{  font-size: var(--bs-unit-size-m); }
  }
  #BundleSave-{{ block.id }} .bundle-card__ribbon{
    position:absolute; right:14px; top:-10px;
    background: var(--bs-ribbon-bg); color: var(--bs-ribbon-text);
    font-size:.8rem; font-weight:700; padding:4px 10px; border-radius:7px; transform:rotate(7deg);
  }
  #BundleSave-{{ block.id }} .bundle-card__variants{ border-top:1px dashed #f0c6c6; margin: -6px 16px 12px; padding-top:10px; }
  #BundleSave-{{ block.id }} .bundle-variant{ display:flex; align-items:center; gap:8px; margin:6px 0; }
  #BundleSave-{{ block.id }} .bundle-variant__idx{ font-weight: var(--bs-idx-w); color:#333; }
  #BundleSave-{{ block.id }} .bundle-variant__select{
    height: 30px; line-height:30px; padding: 0 8px; border:1px solid #ddd; border-radius:8px; background:#fff;
    font-size: 14px; min-width: 120px;
    transition: border-color .15s ease, box-shadow .15s ease;
  }
  #BundleSave-{{ block.id }}.has-anim .bundle-variant__select:focus{
    border-color: var(--bs-selected-border); box-shadow: 0 0 0 3px rgba(233,59,59,.15);
    outline: none;
  }
  @media (max-width: 768px){
    #BundleSave-{{ block.id }} .bundle-card__body{ padding:14px; }
    #BundleSave-{{ block.id }} .bundle-variant__select{ min-width: 110px; }
  }
</style>

<script>
(function(){
  const root = document.getElementById('BundleSave-{{ block.id }}');
  if(!root) return;

  const priceJSON = document.getElementById('BundleVariantPrices-{{ block.id }}');
  const cfg = priceJSON ? JSON.parse(priceJSON.textContent) : {variants:[],fallback_price:0,fallback_compare:0,product_title:'unit',currency:'USD'};
  const vmap = new Map(cfg.variants.map(v => [String(v.id), v]));

  function firstAvailable(){
    return cfg.variants.find(v => v.available) || cfg.variants[0] || {id:null,price:cfg.fallback_price, compare_at_price:cfg.fallback_compare || cfg.fallback_price};
  }
  function formatMoney(cents){
    try { return new Intl.NumberFormat(undefined, { style: 'currency', currency: cfg.currency }).format(cents/100); }
    catch(_){ return (cents/100).toFixed(2); }
  }

  const cards  = Array.from(root.querySelectorAll('.bundle-card'));
  const radios = Array.from(root.querySelectorAll('.bundle-card__radio'));
  const isSelected = card => card.querySelector('.bundle-card__radio')?.checked;

  function updateCardPrices(card){
    const qty     = parseInt(card.dataset.qty || '1', 10);           // full bundle qty (label)
    const effQty  = Math.max(0, parseInt(card.dataset.effQty || card.dataset.eff-qty || (qty-1), 10)); // extras to add
    const totalQtyForPrice = Math.max(1, qty);                        // show full bundle totals

    let totalBase = 0;
    let totalCompare = 0;
    const def = firstAvailable();

    if(isSelected(card)){
      const rows = Array.from(card.querySelectorAll('.bundle-variant')).slice(0, effQty);
      rows.forEach(row=>{
        const sel = row.querySelector('.bundle-variant__select');
        const v = vmap.get(String(sel?.value));
        const price   = v ? v.price : def.price;
        const compare = v ? (v.compare_at_price || v.price) : (def.compare_at_price || def.price);
        totalBase    += price;
        totalCompare += compare;
      });
      const missingExtras = Math.max(effQty - rows.length, 0);
      if(missingExtras > 0){
        totalBase    += missingExtras * def.price;
        totalCompare += missingExtras * (def.compare_at_price || def.price);
      }
      // add the first/base unit (the already-added one) for display math
      totalBase    += def.price;
      totalCompare += (def.compare_at_price || def.price);
    } else {
      totalBase    = totalQtyForPrice * def.price;
      totalCompare = totalQtyForPrice * (def.compare_at_price || def.price);
    }

    const disc = parseFloat(card.dataset.disc || '0');
    const discounted = Math.round(totalBase * (1 - (disc/100)));
    const unitPrice = Math.round(discounted / totalQtyForPrice);

    const priceEl   = card.querySelector('[data-price]');
    const compareEl = card.querySelector('[data-compare]');
    const unitEl    = card.querySelector('[data-unit]');

    if(priceEl)   priceEl.textContent   = formatMoney(discounted);
    if(compareEl) compareEl.textContent = totalCompare > discounted ? formatMoney(totalCompare) : '';
    /* CHANGED: remove product name from unit text */
    if(unitEl)    unitEl.textContent    = unitPrice ? (formatMoney(unitPrice) + ' / per unit') : '';
  }

  function showCardVariants(card){
    const lists = Array.from(root.querySelectorAll('.bundle-card__variants'));
    lists.forEach(l => l.setAttribute('hidden',''));
    card.querySelector('.bundle-card__variants')?.removeAttribute('hidden');
  }

  function buildItemsForCard(card){
    const qty    = parseInt(card.dataset.qty || '1', 10);
    const effQty = Math.max(0, parseInt(card.dataset.effQty || card.dataset.eff-qty || (qty-1), 10)); // only extras

    const rows = Array.from(card.querySelectorAll('.bundle-variant')).slice(0, effQty);
    const itemsMap = new Map();
    const fallback = firstAvailable();

    for(let i=0;i<effQty;i++){
      let id = null;
      if(rows[i]){
        const sel = rows[i].querySelector('.bundle-variant__select');
        const chosen = vmap.get(String(sel?.value));
        id = chosen?.id || fallback.id;
      } else {
        id = fallback.id;
      }
      if(!id) continue;
      itemsMap.set(id, (itemsMap.get(id) || 0) + 1);
    }

    return Array.from(itemsMap.entries()).map(([id, quantity]) => ({id: Number(id), quantity}));
  }

  async function addToCartForCard(card){
    const items = buildItemsForCard(card);
    if(!items.length) return;

    root.setAttribute('data-adding','1');
    try{
      const res = await fetch('/cart/add.js', {
        method:'POST',
        headers:{'Content-Type':'application/json','Accept':'application/json','X-Requested-With':'XMLHttpRequest'},
        body: JSON.stringify({items})
      });
      const data = await res.json().catch(()=>null);

      document.dispatchEvent(new CustomEvent('cart:refresh', {detail:{source:'bundle', data}}));
      window.dispatchEvent(new CustomEvent('cart:refresh', {detail:{source:'bundle', data}}));
      if(window.Shopify && window.Shopify.theme && window.Shopify.theme.publish){
        document.dispatchEvent(new CustomEvent('cart:updated', {detail:{source:'bundle', data}}));
      }
      if(typeof window.openCart === 'function'){ window.openCart(); }
      if(window.MATERIA && typeof window.MATERIA.openCart === 'function'){ window.MATERIA.openCart(); }
    }catch(e){}
    root.removeAttribute('data-adding');
  }

  const selected = cards.find(c => isSelected(c)) || cards[0];
  if(selected) showCardVariants(selected);
  cards.forEach(updateCardPrices);

  radios.forEach(r => r.addEventListener('change', ()=>{
    const card = cards.find(c => isSelected(c));
    if(card){ showCardVariants(card); }
    cards.forEach(updateCardPrices);
    if(card){ addToCartForCard(card); } // adds only (qty - 1)
  }));

  cards.forEach(card => {
    card.addEventListener('change', e=>{
      if(e.target.matches('.bundle-variant__select') || e.target.matches('.bundle-card__radio')){
        updateCardPrices(card);
      }
    });
  });
})();
</script>




{%- when 'payment_badges' -%}
{%- assign bs = block.settings -%}

{%- liquid
  assign text_align_d = bs.text_align | default: 'left'
  assign text_align_m = bs.text_align_m | default: bs.text_align

  assign justify_d = 'flex-start'
  if text_align_d == 'center'
    assign justify_d = 'center'
  elsif text_align_d == 'right'
    assign justify_d = 'flex-end'
  endif

  assign justify_m = 'flex-start'
  if text_align_m == 'center'
    assign justify_m = 'center'
  elsif text_align_m == 'right'
    assign justify_m = 'flex-end'
  endif
-%}

<div id="PaymentBadges-{{ block.id }}"
     class="pb-wrap"
     role="region"
     aria-label="{{ bs.a11y_label | escape | default: 'Payment badges' }}"
     {{ block.shopify_attributes }}
     style="
       --pb-maxw: {{ bs.sec_maxw | default: 100 }}rem;
       --pb-pl:   {{ bs.sec_pl | default: 0 }}px;
       --pb-pr:   {{ bs.sec_pr | default: 0 }}px;
       --pb-pt:   {{ bs.sec_pt | default: 0 }}px;
       --pb-pb:   {{ bs.sec_pb | default: 0 }}px;
       --pb-mt:   {{ bs.sec_mt | default: 0 }}px;
       --pb-mb:   {{ bs.sec_mb | default: 0 }}px;
       --pb-bg:   {{ bs.sec_bg | default: 'transparent' }};
       --pb-radius: {{ bs.sec_radius | default: 0 }}px;

       --pb-maxw-m: {{ bs.sec_maxw_m | default: 100 }}rem;
       --pb-pl-m:   {{ bs.sec_pl_m | default: 0 }}px;
       --pb-pr-m:   {{ bs.sec_pr_m | default: 0 }}px;

       --pb-justify-d: {{ justify_d }};
       --pb-justify-m: {{ justify_m }};

       /* text */
       --pb-label-color: {{ bs.sub_color | default: '#9CA3AF' }};
       --pb-label-size: 13px;
       --pb-title-size: {{ bs.h_main_size | default: 16 }}px;
       --pb-title-color: {{ bs.h_main_color | default: '#111111' }};
       --pb-title-mb: {{ bs.h_main_mb | default: 12 }}px;

       /* badge sizing + gaps */
       --pb-gap-x: 10px;
       --pb-icon-h: {{ bs.badge_h | default: 20 }}px;
       --pb-icon-h-m: {{ bs.badge_h_m | default: 18 }}px;
     ">
  <div class="pb-inner">


    <div class="pb-head">
      {%- if bs.sub_text != blank -%}
        {%- if bs.sub_url != blank -%}
          <a class="pb-label" href="{{ bs.sub_url }}" {% if bs.sub_newtab %}target="_blank" rel="noopener noreferrer"{% endif %}>{{ bs.sub_text }}</a>
        {%- else -%}
          <span class="pb-label">{{ bs.sub_text }}</span>
        {%- endif -%}
      {%- endif -%}

      {%- if bs.h_main != blank -%}
        <h2 class="pb-title">{{ bs.h_main }}</h2>
      {%- endif -%}
    </div>

    {% if bs.toggle_icons %}
      <div class="ecomz-paymentbadges-{{ section.id }}">

        <ul class="pb-list list-unstyled">


          {% if bs.show_amex %}
          <li class="pb-item">
            <svg class="pb-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="pi-american_express" viewBox="0 0 38 24">
              <title id="pi-american_express">American Express</title>
              <path fill="#000" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3Z" opacity=".07"></path>
              <path fill="#006FCF" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32Z"></path>
              <path fill="#FFF" d="M22.012 19.936v-8.421L37 11.528v2.326l-1.732 1.852L37 17.573v2.375h-2.766l-1.47-1.622-1.46 1.628-9.292-.02Z"></path>
              <path fill="#006FCF" d="M23.013 19.012v-6.57h5.572v1.513h-3.768v1.028h3.678v1.488h-3.678v1.01h3.768v1.531h-5.572Z"></path>
              <path fill="#006FCF" d="m28.557 19.012 3.083-3.289-3.083-3.282h2.386l1.884 2.083 1.89-2.082H37v.051l-3.017 3.23L37 18.92v.093h-2.307l-1.917-2.103-1.898 2.104h-2.321Z"></path>
              <path fill="#FFF" d="M22.71 4.04h3.614l1.269 2.881V4.04h4.46l.77 2.159.771-2.159H37v8.421H19l3.71-8.421Z"></path>
              <path fill="#006FCF" d="m23.395 4.955-2.916 6.566h2l.55-1.315h2.98l.55 1.315h2.05l-2.904-6.566h-2.31Zm.25 3.777.875-2.09.873 2.09h-1.748Z"></path>
              <path fill="#006FCF" d="M28.581 11.52V4.953l2.811.01L32.84 9l1.456-4.046H37v6.565l-1.74.016v-4.51l-1.644 4.494h-1.59L30.35 7.01v4.51h-1.768Z"></path>
            </svg>
          </li>
          {% endif %}

{% if bs.show_apple_pay %}
          <li class="pb-item">
            <svg
              class="pb-svg"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              role="img"
              x="0" y="0"
              viewBox="0 0 165.521 105.965">
              <title>Apple Pay</title>
              <path fill="#D3D3D3" d="M150.698 0H14.823c-.566 0-1.133 0-1.698.003-.477.004-.953.009-1.43.022-1.039.028-2.087.09-3.113.274a10.51 10.51 0 0 0-2.958.975 9.932 9.932 0 0 0-4.35 4.35 10.463 10.463 0 0 0-.975 2.96C.113 9.611.052 10.658.024 11.696a70.22 70.22 0 0 0-.022 1.43C0 13.69 0 14.256 0 14.823v76.318c0 .567 0 1.132.002 1.699.003.476.009.953.022 1.43.028 1.036.09 2.084.275 3.11a10.46 10.46 0 0 0 .974 2.96 9.897 9.897 0 0 0 1.83 2.52 9.874 9.874 0 0 0 2.52 1.83c.947.483 1.917.79 2.96.977 1.025.183 2.073.245 3.112.273.477.011.953.017 1.43.02.565.004 1.132.004 1.698.004h135.875c.565 0 1.132 0 1.697-.004.476-.002.952-.009 1.431-.02 1.037-.028 2.085-.09 3.113-.273a10.478 10.478 0 0 0 2.958-.977 9.955 9.955 0 0 0 4.35-4.35c.483-.947.789-1.917.974-2.96.186-1.026.246-2.074.274-3.11.013-.477.02-.954.022-1.43.004-.567.004-1.132.004-1.699V14.824c0-.567 0-1.133-.004-1.699a63.067 63.067 0 0 0-.022-1.429c-.028-1.038-.088-2.085-.274-3.112a10.4 10.4 0 0 0-.974-2.96 9.94 9.94 0 0 0-4.35-4.35A10.52 10.52 0 0 0 156.939.3c-1.028-.185-2.076-.246-3.113-.274a71.417 71.417 0 0 0-1.431-.022C151.83 0 151.263 0 150.698 0z"></path>
              <path fill="#FFF" d="M150.698 3.532l1.672.003c.452.003.905.008 1.36.02.793.022 1.719.065 2.583.22.75.135 1.38.34 1.984.648a6.392 6.392 0 0 1 2.804 2.807c.306.6.51 1.226.645 1.983.154.854.197 1.783.218 2.58.013.45.019.9.02 1.36.005.557.005 1.113.005 1.671v76.318c0 .558 0 1.114-.004 1.682-.002.45-.008.9-.02 1.35-.022.796-.065 1.725-.221 2.589a6.855 6.855 0 0 1-.645 1.975 6.397 6.397 0 0 1-2.808 2.807c-.6.306-1.228.511-1.971.645-.881.157-1.847.2-2.574.22-.457.01-.912.017-1.379.019-.555.004-1.113.004-1.669.004H14.801c-.55 0-1.1 0-1.66-.004a74.993 74.993 0 0 1-1.35-.018c-.744-.02-1.71-.064-2.584-.22a6.938 6.938 0 0 1-1.986-.65 6.337 6.337 0 0 1-1.622-1.18 6.355 6.355 0 0 1-1.178-1.623 6.935 6.935 0 0 1-.646-1.985c-.156-.863-.2-1.788-.22-2.578a66.088 66.088 0 0 1-.02-1.355l-.003-1.327V14.474l.002-1.325a66.7 66.7 0 0 1 .02-1.357c.022-.792.065-1.717.222-2.587a6.924 6.924 0 0 1 .646-1.981c.304-.598.7-1.144 1.18-1.623a6.386 6.386 0 0 1 1.624-1.18 6.96 6.96 0 0 1 1.98-.646c.865-.155 1.792-.198 2.586-.22.452-.012.905-.017 1.354-.02l1.677-.003h135.875"></path>
              <g>
                <g>
                  <path fill="#000" d="M43.508 35.77c1.404-1.755 2.356-4.112 2.105-6.52-2.054.102-4.56 1.355-6.012 3.112-1.303 1.504-2.456 3.959-2.156 6.266 2.306.2 4.61-1.152 6.063-2.858"></path>
                  <path fill="#000" d="M45.587 39.079c-3.35-.2-6.196 1.9-7.795 1.9-1.6 0-4.049-1.8-6.698-1.751-3.447.05-6.645 2-8.395 5.1-3.598 6.2-.95 15.4 2.55 20.45 1.699 2.5 3.747 5.25 6.445 5.151 2.55-.1 3.549-1.65 6.647-1.65 3.097 0 3.997 1.65 6.696 1.6 2.798-.05 4.548-2.5 6.247-5 1.95-2.85 2.747-5.6 2.797-5.75-.05-.05-5.396-2.101-5.446-8.251-.05-5.15 4.198-7.6 4.398-7.751-2.399-3.548-6.147-3.948-7.447-4.048"></path>
                </g>
                <g>
                  <path fill="#000" d="M78.973 32.11c7.278 0 12.347 5.017 12.347 12.321 0 7.33-5.173 12.373-12.529 12.373h-8.058V69.62h-5.822V32.11h14.062zm-8.24 19.807h6.68c5.07 0 7.954-2.729 7.954-7.46 0-4.73-2.885-7.434-7.928-7.434h-6.706v14.894z"></path>
                  <path fill="#000" d="M92.764 61.847c0-4.809 3.665-7.564 10.423-7.98l7.252-.442v-2.08c0-3.04-2.001-4.704-5.562-4.704-2.938 0-5.07 1.507-5.51 3.82h-5.252c.157-4.86 4.731-8.395 10.918-8.395 6.654 0 10.995 3.483 10.995 8.89v18.663h-5.38v-4.497h-.13c-1.534 2.937-4.914 4.782-8.579 4.782-5.406 0-9.175-3.222-9.175-8.057zm17.675-2.417v-2.106l-6.472.416c-3.64.234-5.536 1.585-5.536 3.95 0 2.288 1.975 3.77 5.068 3.77 3.95 0 6.94-2.522 6.94-6.03z"></path>
                  <path fill="#000" d="M120.975 79.652v-4.496c.364.051 1.247.103 1.715.103 2.573 0 4.029-1.09 4.913-3.899l.52-1.663-9.852-27.293h6.082l6.863 22.146h.13l6.862-22.146h5.927l-10.216 28.67c-2.34 6.577-5.017 8.735-10.683 8.735-.442 0-1.872-.052-2.261-.157z"></path>
                </g>
              </g>
            </svg>
          </li>
          {% endif %}


          {% if bs.show_google_pay %}
          <li class="pb-item">
            <svg class="pb-svg" xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 38 24">
              <title>Google Pay</title>
              <path d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z" fill="#000" opacity=".07"></path>
              <path d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32" fill="#FFF"></path>
              <path d="M18.093 11.976v3.2h-1.018v-7.9h2.691a2.447 2.447 0 0 1 1.747.692 2.28 2.28 0 0 1 .11 3.224l-.11.116c-.47.447-1.098.69-1.747.674l-1.673-.006zm0-3.732v2.788h1.698c.377.012.741-.135 1.005-.404a1.391 1.391 0 0 0-1.005-2.354l-1.698-.03zm6.484 1.348c.65-.03 1.286.188 1.778.613.445.43.682 1.03.65 1.649v3.334h-.969v-.766h-.049a1.93 1.93 0 0 1-1.673.931 2.17 2.17 0 0 1-1.496-.533 1.667 1.667 0 0 1-.613-1.324 1.606 1.606 0 0 1 .613-1.336 2.746 2.746 0 0 1 1.698-.515c.517-.02 1.03.093 1.49.331v-.208a1.134 1.134 0 0 0-.417-.901 1.416 1.416 0 0 0-.98-.368 1.545 1.545 0 0 0-1.319.717l-.895-.564a2.488 2.488 0 0 1 2.182-1.06zM23.29 13.52a.79.79 0 0 0 .337.662c.223.176.5.269.785.263.429-.001.84-.17 1.146-.472.305-.286.478-.685.478-1.103a2.047 2.047 0 0 0-1.324-.374 1.716 1.716 0 0 0-1.03.294.883.883 0 0 0-.392.73zm9.286-3.75l-3.39 7.79h-1.048l1.281-2.728-2.224-5.062h1.103l1.612 3.885 1.569-3.885h1.097z"></path>
              <path d="M13.986 11.284c0-.308-.024-.616-.073-.92h-4.29v1.747h2.451a2.096 2.096 0 0 1-.9 1.373v1.134h1.464a4.433 4.433 0 0 0 1.348-3.334z" fill="#4285F4"></path>
              <path d="M9.629 15.721a4.352 4.352 0 0 0 3.01-1.097l-1.466-1.14a2.752 2.752 0 0 1-4.094-1.44H5.577v1.17a4.53 4.53 0 0 0 4.052 2.507z" fill="#34A853"></path>
              <path d="M7.079 12.05a2.709 2.709 0 0 1 0-1.735v-1.17H5.577a4.505 4.505 0 0 0 0 4.075l1.502-1.17z" fill="#FBBC04"></path>
              <path d="M9.629 8.44a2.452 2.452 0 0 1 1.74.68l1.3-1.293a4.37 4.37 0 0 0-3.065-1.183 4.53 4.53 0 0 0-4.027 2.5l1.502 1.171a2.715 2.715 0 0 1 2.55-1.875z" fill="#EA4335"></path>
            </svg>
          </li>
          {% endif %}

        

        
          {% if bs.show_mastercard %}
          <li class="pb-item">
            <svg class="pb-svg" viewBox="0 0 38 24" xmlns="http://www.w3.org/2000/svg" role="img">
              <title>Mastercard</title>
              <path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"></path>
              <path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"></path>
              <circle fill="#EB001B" cx="15" cy="12" r="7"></circle>
              <circle fill="#F79E1B" cx="23" cy="12" r="7"></circle>
              <path fill="#FF5F00" d="M22 12c0-2.4-1.2-4.5-3-5.7-1.8 1.3-3 3.4-3 5.7s1.2 4.5 3 5.7c1.8-1.2 3-3.3 3-5.7z"></path>
            </svg>
          </li>
          {% endif %}

          {% comment %} PayPal {% endcomment %}
          {% if bs.show_paypal %}
          <li class="pb-item">
            <svg class="pb-svg" viewBox="0 0 38 24" xmlns="http://www.w3.org/2000/svg" role="img">
              <title>PayPal</title>
              <path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"></path>
              <path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"></path>
              <path fill="#003087" d="M23.9 8.3c.2-1 0-1.7-.6-2.3-.6-.7-1.7-1-3.1-1h-4.1c-.3 0-.5.2-.6.5L14 15.6c0 .2.1.4.3.4H17l.4-3.4 1.8-2.2 4.7-2.1z"></path>
              <path fill="#3086C8" d="M23.9 8.3l-.2.2c-.5 2.8-2.2 3.8-4.6 3.8H18c-.3 0-.5.2-.6.5l-.6 3.9-.2 1c0 .2.1.4.3.4H19c.3 0 .5-.2.5-.4v-.1l.4-2.4v-.1c0-.2.3-.4.5-.4h.3c2.1 0 3.7-.8 4.1-3.2.2-1 .1-1.8-.4-2.4-.1-.5-.3-.7-.5-.8z"></path>
              <path fill="#012169" d="M23.3 8.1c-.1-.1-.2-.1-.3-.1-.1 0-.2 0-.3-.1-.3-.1-.7-.1-1.1-.1h-3c-.1 0-.2 0-.2.1-.2.1-.3.2-.3.4l-.7 4.4v.1c0-.3.3-.5.6-.5h1.3c2.5 0 4.1-1 4.6-3.8v-.2c-.1-.1-.3-.2-.5-.2h-.1z"></path>
            </svg>
          </li>
          {% endif %}

          {% comment %} Visa {% endcomment %}
          {% if bs.show_visa %}
          <li class="pb-item">
            <svg class="pb-svg" viewBox="0 0 38 24" xmlns="http://www.w3.org/2000/svg" role="img">
              <title>Visa</title>
              <path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"></path>
              <path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"></path>
              <path d="M28.3 10.1H28c-.4 1-.7 1.5-1 3h1.9c-.3-1.5-.3-2.2-.6-3zm2.9 5.9h-1.7c-.1 0-.1 0-.2-.1l-.2-.9-.1-.2h-2.4c-.1 0-.2 0-.2.2l-.3.9c0 .1-.1.1-.1.1h-2.1l.2-.5L27 8.7c0-.5.3-.7.8-.7h1.5c.1 0 .2 0 .2.2l1.4 6.5c.1.4.2.7.2 1.1.1.1.1.1.1.2zm-13.4-.3l.4-1.8c.1 0 .2.1.2.1.7.3 1.4.5 2.1.4.2 0 .5-.1.7-.2.5-.2.5-.7.1-1.1-.2-.2-.5-.3-.8-.5-.4-.2-.8-.4-1.1-.7-1.2-1-.8-2.4-.1-3.1.6-.4.9-.8 1.7-.8 1.2 0 2.5 0 3.1.2h.1c-.1.6-.2 1.1-.4 1.7-.5-.2-1-.4-1.5-.4-.3 0-.6 0-.9.1-.2 0-.3.1-.4.2-.2.2-.2.5 0 .7l.5.4c.4.2.8.4 1.1.6.5.3 1 .8 1.1 1.4.2.9-.1 1.7-.9 2.3-.5.4-.7.6-1.4.6-1.4 0-2.5.1-3.4-.2-.1.2-.1.2-.2.1zm-3.5.3c.1-.7.1-.7.2-1 .5-2.2 1-4.5 1.4-6.7.1-.2.1-.3.3-.3H18c-.2 1.2-.4 2.1-.7 3.2-.3 1.5-.6 3-1 4.5 0 .2-.1.2-.3.2M5 8.2c0-.1.2-.2.3-.2h3.4c.5 0 .9.3 1 .8l.9 4.4c0 .1 0 .1.1.2 0-.1.1-.1.1-.1l2.1-5.1c-.1-.1 0-.2.1-.2h2.1c0 .1 0 .1-.1.2l-3.1 7.3c-.1.2-.1.3-.2.4-.1.1-.3 0-.5 0H9.7c-.1 0-.2 0-.2-.2L7.9 9.5c-.2-.2-.5-.5-.9-.6-.6-.3-1.7-.5-1.9-.5L5 8.2z" fill="#142688"></path>
            </svg>
          </li>
          {% endif %}

        </ul>
      </div>
    {% endif %}
  </div>

  <style>
    #PaymentBadges-{{ block.id }}{
      background: var(--pb-bg);
      border-radius: var(--pb-radius);
      padding-top: var(--pb-pt);
      padding-bottom: var(--pb-pb);
      margin-top: var(--pb-mt);
      margin-bottom: var(--pb-mb);
    }
    #PaymentBadges-{{ block.id }} .pb-inner{
      max-width: var(--pb-maxw);
      padding-left: var(--pb-pl);
      padding-right: var(--pb-pr);
      margin-inline: auto;
    }

    /* TEXT */
    #PaymentBadges-{{ block.id }} .pb-head{ display:flex; flex-direction:column; gap:6px; }
    #PaymentBadges-{{ block.id }} .pb-label{
      color: var(--pb-label-color) !important ;
      font-size: var(--pb-label-size);
      font-weight: 500;
        font-family: inherit; /* uses the theme's font you chose in General/Typography */
      text-decoration: none;
      width: max-content;
    }
    #PaymentBadges-{{ block.id }} .pb-title{
      margin: 0 0 var(--pb-title-mb) 0;
      color: var(--pb-title-color) !important;
      font-size: var(--pb-title-size);
        font-family: inherit; /* uses the theme's font you chose in General/Typography */
      line-height: 1.45;
      font-weight: 550; /* use theme’s default weight */
      text-align: {{ text_align_d }};
    }

    /* BADGES: single-row, no extra border, consistent height */
    #PaymentBadges-{{ block.id }} .pb-list{
      display:flex;
      flex-wrap: nowrap;               /* force one line */
      gap: var(--pb-gap-x);
      margin:0; padding:0; list-style:none;
      justify-content: var(--pb-justify-d);
      overflow-x: auto;                /* stays one row on small screens */
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
    }
    #PaymentBadges-{{ block.id }} .pb-item{ display:inline-flex; align-items:center; }
    #PaymentBadges-{{ block.id }} .pb-svg{
      display:block;
      height: var(--pb-icon-h);
      width: auto;
    }

    @media (max-width:768px){
      #PaymentBadges-{{ block.id }} .pb-inner{
        max-width: var(--pb-maxw-m);
        padding-left: var(--pb-pl-m);
        padding-right: var(--pb-pr-m);
      }
      #PaymentBadges-{{ block.id }} .pb-title{ text-align: {{ text_align_m }}; }
      #PaymentBadges-{{ block.id }} .pb-list{ justify-content: var(--pb-justify-m); }
      #PaymentBadges-{{ block.id }} .pb-svg{ height: var(--pb-icon-h-m); }
    }
  </style>
</div>

{%- when 'infotables' -%}
{%- assign bs = block.settings -%}

{%- assign any_row_enabled = false -%}
{%- if bs.row1_enable or bs.row2_enable or bs.row3_enable -%}{%- assign any_row_enabled = true -%}{%- endif -%}

{%- if any_row_enabled -%}
<div id="InfoTables-{{ block.id }}" class="it-card" {{ block.shopify_attributes }}
     style="
      --it-bg: {{ bs.bg_color | default: '#ffffff' }};
      --it-text: {{ bs.text_color | default: '#222222' }};
      --it-icon: {{ bs.icon_color | default: '#222222' }};
      --it-border: {{ bs.border_color | default: '#e9e9e9' }};
      --it-divider: {{ bs.divider_color | default: bs.border_color | default: '#eeeeee' }};
      --it-fs-d: {{ bs.font_size_d | default: 16 }}px;
      --it-fs-m: {{ bs.font_size_m | default: 15 }}px;
      --it-lh: {{ bs.line_height | default: 150 }};
      --it-fw: {{ bs.font_weight | default: 400 }};
      --it-fw-1: {{ bs.row1_highlight_weight | default: 700 }};
      --it-fw-2: {{ bs.row2_highlight_weight | default: 700 }};
      --it-fw-3: {{ bs.row3_highlight_weight | default: 700 }};
      --it-icon-size: {{ bs.icon_size | default: 22 }}px;

      --it-pl-d: {{ bs.pl_d | default: 18 }}px;
      --it-pr-d: {{ bs.pr_d | default: 18 }}px;
      --it-pt-d: {{ bs.pt_d | default: 16 }}px;
      --it-pb-d: {{ bs.pb_d | default: 16 }}px;

      --it-pl-m: {{ bs.pl_m | default: 14 }}px;
      --it-pr-m: {{ bs.pr_m | default: 14 }}px;
      --it-pt-m: {{ bs.pt_m | default: 12 }}px;
      --it-pb-m: {{ bs.pb_m | default: 12 }}px;

      --it-gap: {{ bs.icon_gap | default: 18 }}px;

      --it-radius: 12px;
      --it-border-style: {{ bs.border_style | default: 'solid' }};
      --it-divider-style: {{ bs.divider_style | default: 'solid' }};

      /* NEW: section (outside) spacing sliders */
      --it-sec-pt-d: {{ bs.section_pt_d | default: 0 }}px;
      --it-sec-pb-d: {{ bs.section_pb_d | default: 0 }}px;
      --it-sec-pt-m: {{ bs.section_pt_m | default: 0 }}px;
      --it-sec-pb-m: {{ bs.section_pb_m | default: 0 }}px;
     ">
  <div class="it-width" style="max-width: {{ bs.max_width | default: 760 }}px; {% if bs.center_card %}margin-left:auto;margin-right:auto;{% endif %}">
    <div class="it-inner">

      {%- if bs.row1_enable -%}
      <div class="it-row it-row-1" role="listitem">
        <div class="it-icon" aria-hidden="true">
          {%- if bs.row1_custom_icon and bs.row1_svg != blank -%}
            <div class="it-svgwrap">{{ bs.row1_svg | strip }}</div>
          {%- else -%}
            <!-- Default: DELIVERY TRUCK (stroke 1.5) -->
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="3" y="6.5" width="11" height="8.5" rx="1" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
              <path d="M14 7h3.6a1 1 0 0 1 .8.4l2.6 3.4a1 1 0 0 1 .2.6V15H14V7Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
              <circle cx="7.5" cy="16.75" r="1.75" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="18" cy="16.75" r="1.75" stroke="currentColor" stroke-width="1.5"/>
              <path d="M3 15v1.75M23 15h-1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M17.25 10.5H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          {%- endif -%}
        </div>
        <div class="it-text">
          <span class="it-lead">{{ bs.row1_lead | default: 'Estimate delivery times:' }}</span>
          <span class="it-strong it-strong-1">{{ bs.row1_strong | default: '3–5 days International.' }}</span>
        </div>
      </div>
      {%- endif -%}

      {%- if bs.row2_enable -%}
      <div class="it-row it-row-2" role="listitem">
        <div class="it-icon" aria-hidden="true">
          {%- if bs.row2_custom_icon and bs.row2_svg != blank -%}
            <div class="it-svgwrap">{{ bs.row2_svg | strip }}</div>
          {%- else -%}
            <!-- Default: DISCOUNT -->
            <svg viewBox="-0.5 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M18 3.91992H6C3.79086 3.91992 2 5.71078 2 7.91992V17.9199C2 20.1291 3.79086 21.9199 6 21.9199H18C20.2091 21.9199 22 20.1291 22 17.9199V7.91992C22 5.71078 20.2091 3.91992 18 3.91992Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M7 17.9199L17 7.91992" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M8 11.9199A2 2 0 1 0 8 7.91992a2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M16 17.9199A2 2 0 1 0 16 13.9199a2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          {%- endif -%}
        </div>
        <div class="it-text">
          <span class="it-lead">{{ bs.row2_lead | default: 'Use code' }}</span>
          <span class="it-strong it-strong-2">“{{ bs.row2_code | default: 'WELCOME15' }}”</span>
          <span class="it-tail">{{ bs.row2_tail | default: 'for discount 15% on your first order.' }}</span>
        </div>
      </div>
      {%- endif -%}

      {%- if bs.row3_enable -%}
      <div class="it-row it-row-3" role="listitem">
        <div class="it-icon" aria-hidden="true">
          {%- if bs.row3_custom_icon and bs.row3_svg != blank -%}
            <div class="it-svgwrap">{{ bs.row3_svg | strip }}</div>
          {%- else -%}
            <!-- Default: FREE SHIPPING & RETURNS -->
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M15.5777 3.38197L17.5777 4.43152C19.7294 5.56066 20.8052 6.12523 21.4026 7.13974C22 8.15425 22 9.41667 22 11.9415V12.0585C22 14.5833 22 15.8458 21.4026 16.8603C20.8052 17.8748 19.7294 18.4393 17.5777 19.5685L15.5777 20.618C13.8221 21.5393 12.9443 22 12 22C11.0557 22 10.1779 21.5393 8.42229 20.618L6.42229 19.5685C4.27063 18.4393 3.19479 17.8748 2.5974 16.8603C2 15.8458 2 14.5833 2 12.0585V11.9415C2 9.41667 2 8.15425 2.5974 7.13974C3.19479 6.12523 4.27063 5.56066 6.42229 4.43152L8.42229 3.38197C10.1779 2.46066 11.0557 2 12 2C12.9443 2 13.8221 2.46066 15.5777 3.38197Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
              <path d="M21 7.5L17 9.5M12 12L3 7.5M12 12V21.5M12 12C12 12 14.7426 10.6287 16.5 9.75C16.6953 9.65237 17 9.5 17 9.5M17 9.5V13M17 9.5L7.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
          {%- endif -%}
        </div>
        <div class="it-text">
          <span class="it-lead">{{ bs.row3_lead | default: 'Free shipping & returns:' }}</span>
          <span class="it-strong it-strong-3">{{ bs.row3_strong | default: 'On all orders over $150.' }}</span>
        </div>
      </div>
      {%- endif -%}

    </div>
  </div>

  <style>
    /* Section (outside) spacing — desktop defaults; mobile overrides below */
    #InfoTables-{{ block.id }}{
      margin-top: var(--it-sec-pt-d);
      margin-bottom: var(--it-sec-pb-d);
      background: var(--it-bg);
      border: 1px var(--it-border-style) var(--it-border);
      border-radius: var(--it-radius);
      color: var(--it-text);
    }
    #InfoTables-{{ block.id }} .it-inner{
      padding: var(--it-pt-d) var(--it-pr-d) var(--it-pb-d) var(--it-pl-d);
    }

    /* 2-col grid keeps icon left of text at all sizes */
    #InfoTables-{{ block.id }} .it-row{
      display: grid;
      grid-template-columns: var(--it-icon-size) 1fr;
      column-gap: var(--it-gap);
      align-items: start;
      padding: 14px 0;
      font-size: var(--it-fs-d);
      line-height: calc(var(--it-lh) / 100);
      font-weight: var(--it-fw);
    }
    #InfoTables-{{ block.id }} .it-row + .it-row{
      border-top: 1px var(--it-divider-style) var(--it-divider);
    }

    /* ICON */
    #InfoTables-{{ block.id }} .it-icon{
      width: var(--it-icon-size);
      height: var(--it-icon-size);
      color: var(--it-icon);
      display: grid;
      place-items: center;
    }
    #InfoTables-{{ block.id }} .it-icon svg{
      width: 100%;
      height: 100%;
      display: block;
      fill: none;
      opacity: 1;
    }
    #InfoTables-{{ block.id }} .it-icon svg *,
    #InfoTables-{{ block.id }} .it-icon .it-svgwrap svg *{
      stroke: currentColor !important;
    }

    /* TEXT */
    #InfoTables-{{ block.id }} .it-text{ min-width: 0; word-break: break-word; }
    #InfoTables-{{ block.id }} .it-lead{ margin-right: 6px; }
    #InfoTables-{{ block.id }} .it-tail{ margin-left: 6px; }
    #InfoTables-{{ block.id }} .it-strong-1{ font-weight: var(--it-fw-1); }
    #InfoTables-{{ block.id }} .it-strong-2{ font-weight: var(--it-fw-2); }
    #InfoTables-{{ block.id }} .it-strong-3{ font-weight: var(--it-fw-3); }

    @media (max-width: 768px){
      #InfoTables-{{ block.id }}{
        margin-top: var(--it-sec-pt-m);
        margin-bottom: var(--it-sec-pb-m);
      }
      #InfoTables-{{ block.id }} .it-inner{
        padding: var(--it-pt-m) var(--it-pr-m) var(--it-pb-m) var(--it-pl-m);
      }
      #InfoTables-{{ block.id }} .it-row{
        font-size: var(--it-fs-m);
        column-gap: var(--it-gap);
      }
    }
  </style>
</div>
{%- endif -%}






{%- when 'horizontal_benefits' -%}
{%- assign bs = block.settings -%}

{%- liquid
  assign hb_template = bs.hb_template | default: 'standard'

  assign boxed_class = ''
  if hb_template == 'boxed'
    assign boxed_class = ' hb--boxed'
  endif

  assign shadow = ''
  if bs.hb_shadow == 'low'
    assign shadow = '0 4px 14px rgba(0,0,0,.06)'
  elsif bs.hb_shadow == 'medium'
    assign shadow = '0 8px 24px rgba(0,0,0,.10)'
  elsif bs.hb_shadow == 'hard'
    assign shadow = '0 12px 32px rgba(0,0,0,.18)'
  endif
-%}

<div id="HorizontalBenefits-{{ block.id }}" class="hb{% if bs.hb_vertical_on_mobile %} hb--m-vertical{% endif %}" {{ block.shopify_attributes }}
  style="
    --hb-bg: {{ bs.hb_bg | default: 'transparent' }};
    --hb-item-bg: {{ bs.hb_item_bg | default: 'transparent' }};
    --hb-icon: {{ bs.hb_icon_color | default: '#EB5A59' }};
    --hb-title: {{ bs.hb_title_color | default: '#111111' }};
    --hb-sub: {{ bs.hb_sub_color | default: '#777777' }};
    --hb-gap-media-title-d: {{ bs.hb_gap_media_title_d | default: 10 }}px;
--hb-gap-media-title-m: {{ bs.hb_gap_media_title_m | default: 8 }}px;

    --hb-icon-d: {{ bs.hb_icon_size_d | default: 26 }}px;
    --hb-icon-m: {{ bs.hb_icon_size_m | default: 24 }}px;

    --hb-img-d: {{ bs.hb_image_size_d | default: 42 }}px;
    --hb-img-m: {{ bs.hb_image_size_m | default: 40 }}px;

    --hb-title-d: {{ bs.hb_title_size_d | default: 16 }}px;
    --hb-title-m: {{ bs.hb_title_size_m | default: 15 }}px;

    --hb-sub-d: {{ bs.hb_sub_size_d | default: 13 }}px;
    --hb-sub-m: {{ bs.hb_sub_size_m | default: 12 }}px;

    --hb-gap-d: {{ bs.hb_items_gap_d | default: 28 }}px;
    --hb-gap-m: {{ bs.hb_items_gap_m | default: 18 }}px;

    --hb-vgap-d: {{ bs.hb_vgap_title_sub_d | default: 6 }}px;
    --hb-vgap-m: {{ bs.hb_vgap_title_sub_m | default: 4 }}px;

    --hb-pt: {{ bs.hb_pt | default: 0 }}px;
    --hb-pb: {{ bs.hb_pb | default: 0 }}px;
    --hb-mt: {{ bs.hb_mt | default: 0 }}px;
    --hb-mb: {{ bs.hb_mb | default: 0 }}px;

    --hb-item-w-d: {{ bs.hb_item_width_d | default: 33.333 }}%;
    --hb-item-w-m: {{ bs.hb_item_width_m | default: 100 }}%;

    --hb-radius: {{ bs.hb_radius | default: 14 }}px;
    --hb-shadow: {{ shadow }};

    /* NEW: per-element paddings */
    --hb-title-pl: {{ bs.hb_title_pl | default: 0 }}px;
    --hb-title-pr: {{ bs.hb_title_pr | default: 0 }}px;
    --hb-sub-pl:   {{ bs.hb_sub_pl   | default: 0 }}px;
    --hb-sub-pr:   {{ bs.hb_sub_pr   | default: 0 }}px;
  "
>
  <div class="hb__inner">
    <ul class="hb__row" role="list">
      {%- assign idxs = '1,2,3' | split: ',' -%}
      {%- for i in idxs -%}
        {%- capture useimg_key -%}item{{ i }}_use_image{%- endcapture -%}
        {%- capture img_key -%}item{{ i }}_image{%- endcapture -%}
        {%- capture imgsize_key -%}item{{ i }}_image_size{%- endcapture -%}
        {%- capture svg_key -%}item{{ i }}_svg{%- endcapture -%}
        {%- capture t_key -%}item{{ i }}_title{%- endcapture -%}
        {%- capture s_key -%}item{{ i }}_subtitle{%- endcapture -%}
        {%- capture ic_key -%}item{{ i }}_icon_color{%- endcapture -%}

        {%- assign use_img = bs[useimg_key] -%}
        {%- assign img = bs[img_key] -%}
        {%- assign img_size = bs[imgsize_key] | default: bs.hb_image_size_d -%}
        {%- assign svg = bs[svg_key] -%}
        {%- assign title = bs[t_key] -%}
        {%- assign sub = bs[s_key] -%}
        {%- assign icon_color_override = bs[ic_key] -%}

        {%- if title != blank or sub != blank or svg != blank or img != blank -%}
        <li class="hb__item{{ boxed_class }}">
          <span class="hb__media" style="--hb-icon-current: {{ icon_color_override | default: bs.hb_icon_color }};">
            {%- if use_img and img != blank -%}
              {{ img
                | image_url: width: img_size
                | image_tag: width: img_size, height: img_size, alt: '', class: 'hb__img' }}
            {%- else -%}
              <span class="hb__svg">
                {%- if svg != blank -%}{{ svg }}{%- else -%}
                  <!-- default small card icon -->
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
                    <rect x="3" y="6" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.75"/>
                    <path d="M3 10H21" stroke="currentColor" stroke-width="1.75" stroke-linecap="round"/>
                  </svg>
                {%- endif -%}
              </span>
            {%- endif -%}
          </span>
          <div class="hb__txt">
          {%- if title != blank -%}
  <div class="hb__title" style="padding-left:var(--hb-title-pl);padding-right:var(--hb-title-pr);">
    {{ title }}
  </div>
{%- endif -%}
           {%- if sub != blank -%}
  <div class="hb__sub" style="padding-left:var(--hb-sub-pl);padding-right:var(--hb-sub-pr);">
    {{ sub }}
  </div>
{%- endif -%}
          </div>
        </li>
        {%- endif -%}
      {%- endfor -%}
    </ul>
  </div>

 <style>
  #HorizontalBenefits-{{ block.id }}{
    background: var(--hb-bg);
    padding-top: var(--hb-pt); padding-bottom: var(--hb-pb);
    margin-top: var(--hb-mt);  margin-bottom: var(--hb-mb);
  }

  /* --- ROW: one line on desktop --- */
  #HorizontalBenefits-{{ block.id }} .hb__row{
    display:flex;
    flex-wrap: nowrap;              /* one row on desktop */
    gap: var(--hb-gap-d);
    list-style:none; margin:0; padding:0;
    align-items:stretch;
    justify-content: space-between;
  }

  /* --- ITEM: icon on top, text centered --- */
  #HorizontalBenefits-{{ block.id }} .hb__item{
    width: var(--hb-item-w-d);
    display:flex;
    flex-direction: column;         /* stack icon above text */
    align-items: center;            /* center horizontally */
    text-align: center;             /* center text */
    gap: 0;
    padding: 14px 16px;
    background: transparent;
    border-radius: var(--hb-radius);
  }
  #HorizontalBenefits-{{ block.id }} .hb__item.hb--boxed{
    background: var(--hb-item-bg);
    box-shadow: var(--hb-shadow);
  }

  /* --- ICON --- */
  #HorizontalBenefits-{{ block.id }} .hb__media{
    display:inline-flex; align-items:center; justify-content:center;
    width: var(--hb-icon-d); height: var(--hb-icon-d);
    min-width: var(--hb-icon-d);
    color: var(--hb-icon-current, var(--hb-icon));
    margin-bottom: var(--hb-vgap-d); /* space between icon and title */
  }
  #HorizontalBenefits-{{ block.id }} .hb__svg svg{
    width:100%; height:100%;
    display:block; vector-effect: non-scaling-stroke;
  }
  #HorizontalBenefits-{{ block.id }} .hb__img{
   
    display:block; object-fit: cover; border-radius: 9999px;
    display:block;
   transform: scale(1.3); /* 1 = normal, 1.1 = 10% bigger, 0.9 = 10% smaller */
  height:100%;
  margin-bottom: 7px;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 50% !important;
  overflow: hidden;
  }

  /* --- TEXT --- */
  #HorizontalBenefits-{{ block.id }} .hb__txt{
    display:flex; flex-direction:column; align-items:center;
  }
  #HorizontalBenefits-{{ block.id }} .hb__title{
    color: var(--hb-title);
    font-size: var(--hb-title-d);
    line-height: 1.25;
    font-weight: 600;
    margin:0 0 var(--hb-vgap-d) 0;
    /* NEW: per-element paddings */
    padding-left: var(--hb-title-pl);
    padding-right: var(--hb-title-pr);
  }
  #HorizontalBenefits-{{ block.id }} .hb__sub{
    color: var(--hb-sub);
    font-size: var(--hb-sub-d);
    line-height: 1.35;
    font-weight: 400;
    margin:0;
    /* NEW: per-element paddings */
    padding-left: var(--hb-sub-pl);
    padding-right: var(--hb-sub-pr);
  }

  /* --- MOBILE --- */
  @media (max-width: 768px){
    /* Default on mobile: ONE ROW (3 items), no wrap */
    #HorizontalBenefits-{{ block.id }} .hb__row{ 
      gap: var(--hb-gap-m);
      flex-wrap: nowrap;                   /* keep single row */
      justify-content: space-between;
    }
    /* 3 items in a single row */
    #HorizontalBenefits-{{ block.id }} .hb__item{
      width: calc((100% - (var(--hb-gap-m) * 2)) / 3);
      padding: 12px 14px;
   /* Perfect circle + independent media→title gap */
}


#HorizontalBenefits-{{ block.id }} .hb__media{
  display:inline-flex; align-items:center; justify-content:center;
  width: var(--hb-icon-d); height: var(--hb-icon-d);
  min-width: var(--hb-icon-d);
 
  color: var(--hb-icon-current, var(--hb-icon));
  margin-bottom: var(--hb-gap-media-title-d); /* NEW: dedicated gap between image/icon and title */
}

/* When using an image instead of SVG, force a clean circle */
#HorizontalBenefits-{{ block.id }} .hb__img{
    display:block; object-fit: cover; border-radius: 9999px;
    display:block;
   transform: scale(1.3); /* 1 = normal, 1.1 = 10% bigger, 0.9 = 10% smaller */
  height:100%;
  margin-bottom: 7px;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 50% !important;
  overflow: hidden;

    }
    #HorizontalBenefits-{{ block.id }} .hb__title{ font-size: var(--hb-title-m); margin-bottom: var(--hb-vgap-m); }
    #HorizontalBenefits-{{ block.id }} .hb__sub{ font-size: var(--hb-sub-m); }

    /* If toggle is ON → stack vertically on mobile */
    #HorizontalBenefits-{{ block.id }}.hb--m-vertical .hb__row{
      flex-wrap: wrap;
    }
    #HorizontalBenefits-{{ block.id }}.hb--m-vertical .hb__item{
      width: 100%;
    }
  }
</style>

</div>


{%- when 'vertical_benefits' -%}
{%- assign bs = block.settings -%}
<div id="VerticalBenefits-{{ block.id }}"
  class="vb"
  {{ block.shopify_attributes }}
  style="
    --vb-bg: {{ bs.vb_bg | default: 'transparent' }};
    --vb-icon-color: {{ bs.vb_icon_color | default: '#2A2A2A' }};
    --vb-text-color: {{ bs.vb_text_color | default: '#242424' }};
    --vb-icon-size: {{ bs.vb_icon_size | default: 48 }}px;
    --vb-icon-size-m: {{ bs.vb_icon_size_m | default: 44 }}px;
    --vb-gap: {{ bs.vb_icon_gap | default: 8 }}px;
    --vb-gap-m: {{ bs.vb_icon_gap_m | default: 6 }}px;
    --vb-font-d: {{ bs.vb_text_size_d | default: 16 }}px;
    --vb-font-m: {{ bs.vb_text_size_m | default: 14 }}px;
    --vb-pt: {{ bs.vb_pt | default: 0 }}px;
    --vb-pb: {{ bs.vb_pb | default: 0 }}px;
    --vb-mt: {{ bs.vb_mt | default: 0 }}px;
    --vb-mb: {{ bs.vb_mb | default: 0 }}px;
    --vb-space: {{ bs.vb_item_space | default: 8 }}px;
    --vb-maxw: {{ bs.vb_maxw | default: 105 }}rem;
    --vb-pl: {{ bs.vb_pl | default: 0 }}px;
    --vb-pr: {{ bs.vb_pr | default: 0 }}px;
  "
>
  <div class="vb__inner" style="max-width:var(--vb-maxw);padding-left:var(--vb-pl);padding-right:var(--vb-pr);">
    <ul class="vb__list" role="list">
      {%- assign idxs = '1,2,3' | split: ',' -%}
      {%- for i in idxs -%}
        {%- capture t_key -%}item{{ i }}_title{%- endcapture -%}
        {%- capture svg_key -%}item{{ i }}_svg{%- endcapture -%}
        {%- capture useimg_key -%}item{{ i }}_use_image{%- endcapture -%}
        {%- capture img_key -%}item{{ i }}_image{%- endcapture -%}
        {%- capture imgsize_key -%}item{{ i }}_image_size{%- endcapture -%}

        {%- assign item_title = bs[t_key] -%}
        {%- assign use_img = bs[useimg_key] -%}
        {%- assign item_img = bs[img_key] -%}
        {%- assign item_img_size = bs[imgsize_key] | default: bs.vb_icon_size -%}
        {%- assign item_svg = bs[svg_key] -%}

        {%- if item_title != blank or item_svg != blank or item_img != blank -%}
        <li class="vb__item">
          <span class="vb__icon" aria-hidden="true">
            {%- if use_img and item_img != blank -%}
              {{ item_img
                | image_url: width: item_img_size
                | image_tag: width: item_img_size, height: item_img_size, alt: '', class: 'vb__img' }}
            {%- else -%}
              {%- comment -%}
                Sanitize pasted SVG so inline fill/stroke/style can't override theme color.
                Then wrap with `.svg-colorize` and feed --icon-color from --vb-icon-color.
              {%- endcomment -%}
 <span class="vb__svg svg-colorize" style="--icon-color: var(--vb-icon-color);">
  {%- if item_svg != blank -%}
    {%- comment -%} Color only the stroke; keep original fills (incl. fill="none"). {%- endcomment -%}
    {%- assign svg_cc = item_svg
      | replace: '<svg', '<svg stroke="currentColor"' -%}
    {{ svg_cc }}
  {%- else -%}
    <!-- fallback check icon -->
 <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M16.0303 10.0303C16.3232 9.73744 16.3232 9.26256 16.0303 8.96967C15.7374 8.67678 15.2626 8.67678 14.9697 8.96967L10.5 13.4393L9.03033 11.9697C8.73744 11.6768 8.26256 11.6768 7.96967 11.9697C7.67678 12.2626 7.67678 12.7374 7.96967 13.0303L9.96967 15.0303C10.2626 15.3232 10.7374 15.3232 11.0303 15.0303L16.0303 10.0303Z" fill="#1C274C"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12C1.25 17.9371 6.06294 22.75 12 22.75C17.9371 22.75 22.75 17.9371 22.75 12C22.75 6.06294 17.9371 1.25 12 1.25ZM2.75 12C2.75 6.89137 6.89137 2.75 12 2.75C17.1086 2.75 21.25 6.89137 21.25 12C21.25 17.1086 17.1086 21.25 12 21.25C6.89137 21.25 2.75 17.1086 2.75 12Z" fill="#1C274C"></path> </g></svg>
  {%- endif -%}
</span>
            {%- endif -%}
          </span>
          {%- if item_title != blank -%}
            <span class="vb__text">{{ item_title }}</span>
          {%- endif -%}
        </li>
        {%- endif -%}
      {%- endfor -%}
    </ul>
  </div>

  <style>
    /* scoped styles */
    #VerticalBenefits-{{ block.id }}{
      background:var(--vb-bg);
      padding-top:var(--vb-pt);padding-bottom:var(--vb-pb);
      margin-top:var(--vb-mt);margin-bottom:var(--vb-mb);
    }
    #VerticalBenefits-{{ block.id }} .vb__list{
      list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:var(--vb-space);
    }
    #VerticalBenefits-{{ block.id }} .vb__item{
      display:flex;align-items:center;gap:var(--vb-gap);
    }
    #VerticalBenefits-{{ block.id }} .vb__icon{
      width:var(--vb-icon-size);height:var(--vb-icon-size);
      min-width:var(--vb-icon-size);
      display:inline-flex;align-items:center;justify-content:center;
      border-radius:9999px;overflow:hidden;color:var(--vb-icon-color);
      background: transparent;
      /* ensure stroke never clips even if some parent sets overflow */
      padding-left:4px;box-sizing:content-box;
    }

    #VerticalBenefits-{{ block.id }} .svg-colorize { color: var(--icon-color); }
/* Only color the stroke — leaves fill (including fill="none") intact */
#VerticalBenefits-{{ block.id }} .svg-colorize svg,
#VerticalBenefits-{{ block.id }} .svg-colorize svg * {
  stroke: currentColor !important;
}

    /* Clean scaling for outlines */
    #VerticalBenefits-{{ block.id }} .vb__svg svg{
      width: 100%;
      height: 100%;
      vector-effect: non-scaling-stroke;
      display: block;
    }
    /* your original sizing preference for the inner svg */
    #VerticalBenefits-{{ block.id }} .vb__svg svg{display:block;width:70%;height:70%}

    #VerticalBenefits-{{ block.id }} .vb__img{
      display:block;
      width:100%;
      height:100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      border-radius: 50% !important;
      overflow: hidden;
    }

    #VerticalBenefits-{{ block.id }} .vb__text{
      color:var(--vb-text-color);font-size:var(--vb-font-d);line-height:1.35;font-weight:500;
    }

    @media (max-width: 768px){
      #VerticalBenefits-{{ block.id }} .vb__item{gap:var(--vb-gap-m)}
      #VerticalBenefits-{{ block.id }} .vb__icon{
        width:var(--vb-icon-size-m);height:var(--vb-icon-size-m);min-width:var(--vb-icon-size-m);
      }
      #VerticalBenefits-{{ block.id }} .vb__text{font-size:var(--vb-font-m)}
    }
  </style>
</div>


          {%- when 'title' -%}
            {% comment %} Title {% endcomment %}
            {% if block_st.show_vendor and product.vendor != blank %}
            <p
              class="product-detail__meta-value heading-color mt-0 mb-2 no-underline {% if enable_skeleton_loading %} skeleton-loading{% endif %}"
              style="color: {{ section_st.vendor_text_color }};"
            >
              {{- product.vendor | link_to_vendor -}}
            </p>
            {% endif %}
            <h1
  id="ProductTitle-{{ block.id }}"
  class="product-detail__title heading-letter-spacing mt-0 mb-10{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
  style="
    color: {{ section_st.product_title_color }};
    font-size: clamp({{ block.settings.title_size_m | default: 22 }}px, 2.5vw, {{ block.settings.title_size_d | default: 26 }}px);
    font-weight: {{ block.settings.title_weight | default: 600 }};
  "
  {{ block.shopify_attributes }}
>
              {%- if product.title != blank -%}
                {{ product.title | escape }}
              {%- else -%}
                {{ 'onboarding.product_title_example' | t }}
              {% endif %}
            </h1>

{%- when 'price' -%}
{% comment %} Price with optional discount badge. {% endcomment %}
<div
  id="price-{{ section.id }}"
  class="product-detail__price mb-10 flex align-center justify-between{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
  {{ block.shopify_attributes }}
  style="display: flex; align-items: center; justify-content: space-between; color: {{ section.settings.price_text_color }};"
>
  <div class="price-wrapper" style="display: flex; align-items: center; gap: 10px; font-size: calc(1rem + 5px);">
    {%- render 'price', scope: 'detail', product: product, class: 'price-large', show_badges: false -%}
    
    {% if product.compare_at_price > product.price and section.settings.hide_discount_badge == false %}
      {% assign discount = product.compare_at_price | minus: product.price %}
      {% assign discount_percentage = discount | times: 100 | divided_by: product.compare_at_price | round %}
      <span
        class="discount-badge"
        style="
          background-color: {{ section.settings.badge_background_color }};
          color: {{ section.settings.badge_text_color }};
          margin-left: {{ section.settings.badge_margin_left }}px;
          font-size: calc(1rem + 5px);
        "
      >
        {% if section.settings.display_sale_text %}
          SALE
        {% else %}
          -{{ discount_percentage }}%
        {% endif %}
      </span>
    {% endif %}
  </div>
</div>
          

{%- when 'review_and_sold' -%}

{% if block_st.show_review != false or block_st.show_sold_products != false %}
  {%- if block_st.use_custom_sold -%}
    {% assign sold_number = block_st.sold | default: 10 %}
  {%- else -%}
    {% assign sold_number = product.id | modulo: 15 | plus: 1 %}
  {%- endif -%}

  <div
    id="ReviewSold-{{ block.id }}"
    class="review_sold flex flex-wrap gap-20 align-center lh-normal row-gap-5{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
    style="
      --rs-pt:   {{ block_st.rs_pt_d | default: 2 }}px;
      --rs-pb:   {{ block_st.rs_pb_d | default: 13 }}px;
      --rs-pt-m: {{ block_st.rs_pt_m | default: 6 }}px;
      --rs-pb-m: {{ block_st.rs_pb_m | default: 10 }}px;
    "
    {{ block.shopify_attributes }}
  >
    {% if block_st.show_review %}
      {%- render 'review', product: product -%}
    {% endif %}

    {% if block_st.show_sold_products %}
      <div class="flex gap-5">
        <sold-product
          id="dynamic-sold-product"
          class="primary-color"
          style="color: {{ block_st.sold_text_color }};"
          data-sold="{{ sold_number }}"
          data-hours="{{ block_st.hours | default: 24 }}"
          data-message="Sold {{ sold_number }} items in the past {{ settings.fixed_hours | default: 24 }} hours">
        </sold-product>
      </div>
    {% endif %}
  </div>

  <style>

    #ReviewSold-{{ block.id }}{
      padding-top: var(--rs-pt);
      padding-bottom: var(--rs-pb);
    }

    @media (max-width: 768px){
      #ReviewSold-{{ block.id }}{
        padding-top: var(--rs-pt-m);
        padding-bottom: var(--rs-pb-m);
      }
    }
  </style>
{% endif %}



          {%- when 'buy_buttons' -%}
           
            {%- if product.metafields.custom.external_affiliate == blank -%}
              {% if products_group == blank %}
                <div
                  class="product-detail__buy-buttons button-trigger__sticky mb-20"
                  {{ block.shopify_attributes }}
                >
                  {%- render 'buy-buttons',
                    block: block,
                    product: product,
                    product_form_id: product_form_id,
                    section_id: section.id,
                    show_wishlist: block_st.show_wishlist,
                    show_compare: block_st.show_compare,
                    formClass: 'feature-product-form',
                    type: 'main_product'
                  -%}
                </div>
              {% endif %}
            {%- else -%}
              <a
                href="{{ product.metafields.custom.external_affiliate.value.external_link }}"
                rel="nofollow"
                target="_blank"
                class="btn product-form__submit relative text-center w-full whitespace-nowrap animation flash-move block btn-primary no-underline{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
              >
                {{- product.metafields.custom.external_affiliate.value.button_text -}}
              </a>
            {%- endif %}

          {%- when 'live_view' -%}
           
            {% if block_st.content %}
              <div class="live_view flex flex-wrap gap-10 align-center mb-20{% if enable_skeleton_loading %} skeleton-loading{% endif %} {% if block_st.hide_svg_icon %}no-svg{% endif %}">
                {% unless block_st.hide_svg_icon %}
                  {% if block.settings.custom_svg_code != blank %}
                  
                    {{ block.settings.custom_svg_code | raw }}
                  {% else %}
                   
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="30" height="25" fill="none">
                      <circle
                        fill="{{ block_st.svg_fill_color | default: '#FF156D' }}"
                        stroke="{{ block_st.svg_stroke_color | default: '#FF156D' }}"
                        stroke-width="13"
                        r="15"
                        cx="40"
                        cy="65"
                      >
                        <animate
                          attributeName="cy"
                          calcMode="spline"
                          dur="2"
                          values="65;135;65;"
                          keySplines=".5 0 .5 1;.5 0 .5 1"
                          repeatCount="indefinite"
                          begin="-.4"
                        ></animate>
                      </circle>
                      <circle
                        fill="{{ block_st.svg_fill_color | default: '#FF156D' }}"
                        stroke="{{ block_st.svg_stroke_color | default: '#FF156D' }}"
                        stroke-width="13"
                        r="15"
                        cx="100"
                        cy="65"
                      >
                        <animate
                          attributeName="cy"
                          calcMode="spline"
                          dur="2"
                          values="65;135;65;"
                          keySplines=".5 0 .5 1;.5 0 .5 1"
                          repeatCount="indefinite"
                          begin="-.2"
                        ></animate>
                      </circle>
                      <circle
                        fill="{{ block_st.svg_fill_color | default: '#FF156D' }}"
                        stroke="{{ block_st.svg_stroke_color | default: '#FF156D' }}"
                        stroke-width="13"
                        r="15"
                        cx="160"
                        cy="65"
                      >
                        <animate
                          attributeName="cy"
                          calcMode="spline"
                          dur="2"
                          values="65;135;65;"
                          keySplines=".5 0 .5 1;.5 0 .5 1"
                          repeatCount="indefinite"
                          begin="0"
                        ></animate>
                      </circle>
                    </svg>
                  {% endif %}
                {% endunless %}
                <live-view
                  data-min="{{ block_st.min_number }}"
                  data-max="{{ block_st.max_number }}"
                  data-interval="{{ block_st.interval_time }}"
                  data-message="{{ block_st.content }}"
                  class="heading-color lh-normal"
                  style="--live-view-text-color: {{ block_st.live_view_text_color }};"
                >
                  {{ block_st.content }}
                </live-view>
              </div>
            {% endif %}

          {%- when 'variant_picker' -%}
         
            {% if products_group == blank %}
              <div
                class="product-detail__variant-picker mb-25"
                {{ block.shopify_attributes }}
                data-type="{{ block.settings.variant_type }}"
              >
                {% if user_variants_image_group %}
                  {%- render 'color-swatches', product: product, type: 'group', block: block -%}
                {% else %}
                  {%- render 'color-swatches', product: product, type: 'detail', block: block -%}
                {% endif %}
              </div>
            {% endif %}

       

      {%- when 'modern_collapsible_row' -%}
{%- assign bs = block.settings -%}

{%- capture preset_svg -%}
  {%- case bs.icon_preset -%}

  {%- when 'materials' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M12 3 3 8l9 5 9-5-9-5Zm0 8-9 5 9 5 9-5-9-5Z"
          stroke="currentColor" stroke-width="1.25" stroke-linejoin="round"/>
  </svg>

  {%- when 'shipping' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M15 7H3v8h12V7Z" stroke="currentColor" stroke-width="1.25"/>
    <path d="M15 11h4l2 4h-6v-4Z" stroke="currentColor" stroke-width="1.25"/>
    <circle cx="7.5" cy="17.5" r="1.5" stroke="currentColor" stroke-width="1.25"/>
    <circle cx="17.5" cy="17.5" r="1.5" stroke="currentColor" stroke-width="1.25"/>
  </svg>

  {%- when 'returns' -%}
  <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"
       fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
    <path d="M16 12L8 20l8 8M8 20h16c8.837 0 16 7.163 16 16"/>
  </svg>

  {%- when 'heart' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M12 20s-7-4.5-7-9a4 4 0 0 1 7-2 4 4 0 0 1 7 2c0 4.5-7 9-7 9Z"
          stroke="currentColor" stroke-width="1.25"/>
  </svg>

  {%- when 'dimensions' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <rect x="3" y="10" width="18" height="4" rx="1" stroke="currentColor" stroke-width="1.25"/>
    <path d="M6 10v4M9 10v2M12 10v4M15 10v2M18 10v4" stroke="currentColor" stroke-width="1.25"/>
  </svg>

  {%- when 'warranty' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M12 3l7 3v6c0 5-3.5 7.5-7 9-3.5-1.5-7-4-7-9V6l7-3Z" stroke="currentColor" stroke-width="1.25"/>
    <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.25"/>
  </svg>

  {%- when 'care' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M12 4l1.8 3.8L18 9.6l-3.8 1.8L12 15l-1.8-3.6L6.4 9.6l3.8-1.8L12 4Z" stroke="currentColor" stroke-width="1.25"/>
    <path d="M18.5 4.5l.9 1.9 1.9.9-1.9.9-.9 1.9-.9-1.9-1.9-.9 1.9-.9.9-1.9Z" stroke="currentColor" stroke-width="1.25"/>
  </svg>

  {%- when 'info' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.25"/>
    <path d="M12 10v7m0-10h.01" stroke="currentColor" stroke-width="1.25"/>
  </svg>

  {%- when 'package' -%}
  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M12 3l8 4-8 4-8-4 8-4Z" stroke="currentColor" stroke-width="1.25"/>
    <path d="M4 7v10l8 4 8-4V7" stroke="currentColor" stroke-width="1.25"/>
    <path d="M12 11v10" stroke="currentColor" stroke-width="1.25"/>
  </svg>

  {%- endcase -%}
{%- endcapture -%}

{%- assign icon_svg = bs.icon_svg_custom | default: preset_svg -%}

<collapsible-block
  id="ModernCR-{{ block.id }}"
  tabindex="0"
  {{ block.shopify_attributes }}
  class="bls-toggle-modern relative border-bottom block{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
  style="
    --mcr-icon-size:   {{ bs.icon_size  | default: 20 }}px;
    --mcr-icon-gap:    {{ bs.icon_gap   | default: 10 }}px;
    --mcr-icon-color:  {{ bs.icon_color | default: '#222222' }};
    --mcr-icon-stroke: {{ bs.icon_stroke | default: 1.25 }};
  "
  onclick="(function(el){
    var content = el.querySelector('.modern-collapsible-content');
    var arrow = el.querySelector('.modern-toggle-arrow');
    if(!el.classList.contains('open')) {
      el.classList.add('open');
      content.style.maxHeight = content.scrollHeight + 'px';
      arrow.style.transform = 'rotate(90deg)';
      setTimeout(function(){ content.style.maxHeight = 'none'; }, 400);
    } else {
      el.classList.remove('open');
      if(content.style.maxHeight === 'none'){
        content.style.maxHeight = content.scrollHeight + 'px';
        content.offsetHeight;
      }
      content.style.maxHeight = '0px';
      arrow.style.transform = 'rotate(0deg)';
    }
  })(this)"
>
  <h3 class="h6 my-0 pointer py-17 relative collapsible-heading heading-letter-spacing"
      style="position:relative; display:flex; align-items:center; gap:var(--mcr-icon-gap);">

    {%- if bs.enable_left_icon -%}
      <span class="mcr__icon" aria-hidden="true">
        <span class="mcr__icon-inner">{{- icon_svg -}}</span>
      </span>
    {%- endif -%}

    <span class="mcr__title">{{- bs.heading -}}</span>

    <span class="open-children-toggle-modern"
          style="position:absolute; top:50%; right:0; transform:translateY(-50%); pointer-events:none;">
      <svg class="modern-toggle-arrow" xmlns="http://www.w3.org/2000/svg"
           width="18" height="18" viewBox="0 0 16 16" fill="none"
           style="transition:transform .4s ease; transform:rotate(0deg); color: var(--color-heading) !important;">
        <path d="M6 4l4 4-4 4" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
  </h3>

  <div class="overflow-hidden modern-collapsible-content"
       style="max-height:0px; overflow:hidden; transition:max-height .4s ease;">
    <div class="modern-collapsible-content_inner mb-12 rich__text-mt-0{% if bs.use_product_description == true %} product_description{% endif %}">
      {% if bs.use_product_description == true %}
        {%- if product != blank -%}
          {{ product.description }}
        {%- else -%}
          {{ 'onboarding.default_description' | t }}
        {% endif %}
      {% else %}
        {{ bs.content }}
      {% endif %}
    </div>
  </div>

  <style>
    #ModernCR-{{ block.id }} .mcr__icon{
      width: var(--mcr-icon-size);
      height: var(--mcr-icon-size);
      min-width: var(--mcr-icon-size);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      color: var(--mcr-icon-color);
    }
    #ModernCR-{{ block.id }} .mcr__icon-inner svg{
      width:100%;
      height:100%;
      display:block;
    }
    #ModernCR-{{ block.id }} .mcr__icon-inner svg *,
    #ModernCR-{{ block.id }} .mcr__icon-inner svg {
      stroke: currentColor;
      stroke-width: var(--mcr-icon-stroke);
      stroke-linecap: round;
      stroke-linejoin: round;
      vector-effect: non-scaling-stroke;
      fill: none;
    }
  </style>
</collapsible-block>


          {%- when 'product_addons' -%}

            {% if products_group == blank %}
              {% if block_st.show_share == true or block_st.show_ask_question == true %}
                <div
                  class="product-addons flex flex-wrap align-center pb-25 mb-20 border-bottom row-gap-custom{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
                  style="--row-gap: 5px; gap: {{ block_st.gap_control | default: 10 }}px;"
                  {{ block.shopify_attributes }}
                >
                  {% if block_st.show_share == true %}
                    <product-addons
                      data-text-header="{{ '🔗 Copy this link' }}"
                      data-custom-class="share"
                      class="product-addons__share pointer inline-flex"
                      style="
                        padding: 10px;
                        border: 0px solid #e0e0e0;
                        border-radius: 0;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                      "
                    >
                  
                      <a
                        href="#"
                        class="product-addons__share-link pointer inline-flex no-underline"
                        style="
                          text-decoration: none;
                          display: inline-flex;
                          align-items: center;
                          gap: 5x;
                          color: {{ block.settings.share_color }};
                          cursor: pointer;
                        "
                      >
                        <div
                          class="inline-flex align-center gap-10 lh-normal hover-heading-color"
                          style="
                            display: flex;
                            align-items: center;
                            gap: 5px;
                            color: {{ block.settings.share_color }};
                          "
                        >
                        
                          <svg
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            style="
                              color: {{ block.settings.share_color }};
                              stroke: {{ block.settings.share_color }};
                            "
                          >
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                              <path
                                d="M9.61109 12.4L10.8183 18.5355C11.0462 19.6939 12.6026 19.9244 13.1565 18.8818L19.0211 7.84263C19.248 7.41555 19.2006 6.94354 18.9737 6.58417M9.61109 12.4L5.22642 8.15534C4.41653 7.37131 4.97155 6 6.09877 6H17.9135C18.3758 6 18.7568 6.24061 18.9737 6.58417M9.61109 12.4L18.9737 6.58417M19.0555 6.53333L18.9737 6.58417"
                                stroke="{{ block.settings.share_color }}"
                                stroke-width="0.936"
                              ></path>
                            </g>
                          </svg>
                         
                          <span style="font-size: 16px; color: {{ block.settings.share_color }}; font-weight: normal;">
                            {{ section.settings.share_text | default: 'Share' }}
                          </span>
                        </div>
                      </a>

        
<div class="product-addons__content share__content hidden" style="margin-left: auto;">
  <div class="flex gap-10 mb-20" style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
    <div class="copy__url input-style flex-1 align-center whitespace-nowrap overflow-hidden inline-flex fs-small-1 light-dark-grey"
         style="--input-color: rgba(var(--color-heading-rgb), 0.6); background-color: #fff; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
      <span class="text-overflow-ellipsis w-full overflow-hidden">
        {{ shop.url -}}
        {{- product.url }}
      </span>
    </div>
    <copy-button data-content="{{ shop.url }}{{ product.url }}" id="Share-{{ section.id }}"
                 class="pointer w-50 h-50 inline-flex content-center rounded-50 bg-dark color-white copy-button"
                 style="width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background-color: #007BFF; cursor: pointer; transition: background-color 0.3s ease;">

      <svg class="copy-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
           xmlns="http://www.w3.org/2000/svg" style="width: 20px; height: 20px;">
        <path d="M16 1H4C2.89543 1 2 1.89543 2 3V15H4V3H16V1Z" fill="white"/>
        <path d="M18 5H8C6.89543 5 6 5.89543 6 7V21C6 22.1046 6.89543 23 8 23H18C19.1046 23 20 22.1046 20 21V7C20 5.89543 19.1046 5 18 5ZM18 21H8V7H18V21Z" fill="white"/>
      </svg>
    </copy-button>
  </div>
</div>
                    </product-addons>
                  {% endif %}

                <style>

  copy-button {
    transition: background-color 0.3s ease;
  }
 
  copy-button:hover {
    background-color: #d3d3d3 !important;
  }

  copy-button.copied {
    background-color: #000 !important;
  }

  copy-button.copied .copy-icon path {
    transition: fill 0.3s ease;
    fill: white !important;
  }
</style>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    var copyBtn = document.getElementById('Share-{{ section.id }}');
    if (copyBtn) {
      copyBtn.addEventListener('click', function() {

        copyBtn.classList.add('copied');
     
      });
    }
  });
</script>

                  {% if block_st.show_ask_question == true %}
                    <a
                      href="{{ block_st.ask_question_url }}"
                      class="product-addons__ask-question pointer inline-flex no-underline"
                      style="
                        text-decoration: none;
                        display: inline-flex;
                        align-items: center;
                        gap: 5px;
                        color: {{ block_st.ask_question_text_color }};
                        cursor: pointer;
                      "
                    >
                      <div
                        class="inline-flex align-center gap-10 lh-normal hover-heading-color"
                        style="display: flex; align-items: center; gap: 7px; color: {{ block_st.ask_question_text_color }};"
                      >
                        <svg
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                          class="text-color hover-heading-color"
                          width="18"
                          height="18"
                        >
                          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                          <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                          <g id="SVGRepo_iconCarrier">
                            <path
                              d="M10.125 8.875C10.125 7.83947 10.9645 7 12 7C13.0355 7 13.875 7.83947 13.875 8.875C13.875 9.56245 13.505 10.1635 12.9534 10.4899C12.478 10.7711 12 11.1977 12 11.75V13"
                              stroke="{{ block_st.ask_question_text_color }}"
                              stroke-width="1.5"
                              stroke-linecap="round"
                            ></path>
                            <circle cx="12" cy="16" r="1" fill="{{ block_st.ask_question_text_color }}"></circle>
                            <path
                              d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7"
                              stroke="{{ block_st.ask_question_text_color }}"
                              stroke-width="1.5"
                              stroke-linecap="round"
                            ></path>
                          </g>
                        </svg>
                        <span style="font-size: 16px; font-weight: normal;"> Have a question? </span>
                      </div>
                    </a>
                  {% endif %}
                </div>
              {% endif %}
            {% endif %}

         

          {%- when 'model_size' -%}
            {%- if product.metafields.custom.model_size -%}
              <div
                {{ block.shopify_attributes }}
                class="product_model-size flex align-center pb-20 border-bottom mb-25{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
              >
                {% if product.metafields.custom.model_size.value.model_avatar != blank %}
                  <div class="model-avatar">
                    <img
                      src="{{ product.metafields.custom.model_size.value.model_avatar | image_url }}"
                      alt="{{ product.title }}"
                      width="80"
                      height="80"
                    >
                  </div>
                {% endif %}
                <div class="model-information">
                  {% if product.metafields.custom.model_size.value.model_is_wearing != blank %}
                    <div class="model-size">
                      <span class="model-title">{{ 'products.product.model_size_title.model_size' | t }}</span>
                      <strong class="model-value">
                        {{- product.metafields.custom.model_size.value.model_is_wearing -}}
                      </strong>
                    </div>
                  {% endif %}
                  <div class="flex flex-wrap">
                    <div class="model-info-left">
                      {% if product.metafields.custom.model_size.value.model_height != blank %}
                        <div class="model-height">
                          <span class="model-title">{{ 'products.product.model_size_title.model_height' | t }}</span>
                          <strong class="model-value">
                            {{- product.metafields.custom.model_size.value.model_height -}}
                          </strong>
                        </div>
                      {% endif %}
                      {% if product.metafields.custom.model_size.value.model_shoulder_width != blank %}
                        <div class="model-shoulder-width">
                          <span class="model-title">
                            {{- 'products.product.model_size_title.model_shoulder_width' | t -}}
                          </span>
                          <strong class="model-value">
                            {{- product.metafields.custom.model_size.value.model_shoulder_width -}}
                          </strong>
                        </div>
                      {% endif %}
                    </div>
                    <div class="model-info-right">
                      {% if product.metafields.custom.model_size.value.model_weight != blank %}
                        <div class="model-weight">
                          <span class="model-title">{{ 'products.product.model_size_title.model_weight' | t }}</span>
                          <strong class="model-value">
                            {{- product.metafields.custom.model_size.value.model_weight -}}
                          </strong>
                        </div>
                      {% endif %}
                      {% if product.metafields.custom.model_size.value.model_three_round_measurements != blank %}
                        <div class="model-three-round-measurements">
                          <span class="model-title">
                            {{- 'products.product.model_size_title.model_bust_waist_hips' | t -}}
                          </span>
                          <strong class="model-value">
                            {{- product.metafields.custom.model_size.value.model_three_round_measurements -}}
                          </strong>
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            {% endif %}

          {%- when 'pickup_avaiability' -%}
            <div
              class="pickup_avaiability mb-25{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
              {{ block.shopify_attributes }}
            >
              {%- render 'pickup-availability', product: product -%}
            </div>

          {%- when 'complementary_products' -%}
            {%- if block_st.heading != blank -%}
              <h2 class="h5 product-recommendations-heading heading-letter-spacing{% if enable_skeleton_loading %} skeleton-loading{% endif %} mt-30">
                {{ block_st.heading }}
              </h2>
            {% endif %}
            <product-recommendations
              class="swiper block mb-25{% if enable_skeleton_loading %} skeleton-loading{% endif %}{% if block_st.heading == blank %} mt-30{% endif %}"
              data-section-id="{{ section.id }}"
              data-effect="slide"
              data-speed="500"
              data-desktop="{{ block_st.products_per_page }}"
              data-mobile="2"
              data-tablet="3"
              {{ block.shopify_attributes }}
              data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&intent=complementary&limit={{ block.settings.product_list_limit }}"
            >
              {%- if recommendations.performed and recommendations.products_count > 0 -%}
                <div class="swiper-wrapper">
                  {%- for product in recommendations.products limit: block_st.product_list_limit %}
                    {% render 'product-item',
                      card_product: product,
                      section_id: section.id,
                      template_enable_product_vendor: false,
                      template_enable_rate: false,
                      template_enable_product_short_description: false,
                      template_enable_color_swatches: false,
                      template_enable_add_cart: block_st.enable_quick_add,
                      template_enable_action: block_st.enable_quick_add,
                      template_enable_price: true,
                      class: ' swiper-slide'
                    %}
                  {%- endfor -%}
                </div>
                {% if block_st.show_navigation %}
                  {%- render 'swiper-navigation' -%}
                {% endif %}
                {%- if block_st.show_pagination -%}
                  <div
                    class="swiper-pagination position-bottom"
                  ></div>
                {% endif %}
              {% endif %}
            </product-recommendations>

          {%- when 'product_custom_field' -%}
            {% if products_group == blank %}
              <div
                class="mb-20{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
                {{ block.shopify_attributes }}
              >
                {% if block_st.heading != blank or block_st.description != blank %}
                  <h2 class="product_custom__field-heading h6 heading-letter-spacing mt-0">
                    {{- block_st.heading -}}
                  </h2>
                  {% if block_st.description != blank %}
                    <div class="product_custom__field-description mb-15">
                      {{- block_st.description -}}
                    </div>
                  {% endif %}
                {% endif %}
                <product-property class="product-input-property mb-25 d-block">
                  {%- if block_st.enable_field_text == true -%}
                    {% liquid
                      assign default_name_text = 'products.product.actions.property.custom_text' | t
                      if block_st.field_label != blank
                        assign default_name_text = block_st.field_label
                      endif
                    %}
                    <label class="visually-hidden">
                      {{ block_st.field_label }}
                    </label>
                    <input
                      type="text"
                      placeholder="{{ block_st.field_label }}"
                      name="properties[{{ default_name_text }}]"
                      class="form-input text w-full mb-15"
                    >
                  {% endif %}
                  {%- if block_st.enable_field_image == true -%}
                    {% liquid
                      assign default_name_image = 'products.product.actions.property.custom_image' | t
                      if block_st.field_image_label != blank
                        assign default_name_image = block_st.field_image_label
                      endif
                    %}
                    <div class="btn-upload-cloud ps-20 w-full pointer text-center lh-1 border btn-rounded flex relative">
                      <input
                        id="custom-image-upload"
                        placeholder="{{ block_st.field_image_label }}"
                        type="file"
                        accept="image/*"
                        name="properties[{{ default_name_image }}]"
                        class="form-input pointer file flex-1"
                      >
                      <label
                        for="custom-image-upload"
                        class="custom-file-upload pointer transition-short inline-flex gap-5 content-center border-inline-start absolute inset-y-0 right-0 h-full px-20 z-2 grey-bg btn-hover heading-color"
                      >
                        <svg width="17px" height="16px" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M7.5 1.5L10.75 4.5M7.5 1.5L4.5 4.5M7.5 1.5V11M13.5 7V13.5H1.5V7" 
                                stroke="var(--custom-image-upload-icon-color)" />
                        </svg>
                        {{ block_st.field_image_label }}
                      </label>
                    </div>
                  {% endif %}
                </product-property>
              </div>
            {% endif %}

  

          {%- when 'product_grouped' -%}
            {% comment %} Product grouped. {% endcomment %}
            {%- liquid
              assign products_group = product.metafields.custom.product_grouped | split: ',' | uniq
            -%}
            {% if products_group.size > 0 %}
              {% if enable_skeleton_loading %}<div class="skeleton-loading">{% endif %}
              <h2 class="h5 mt-0 heading-letter-spacing">
                {{ block_st.heading }}
              </h2>
              <product-group
                class="block mb-25"
                {{ block.shopify_attributes }}
              >
                <script type="application/json" class="productGroup">
                  {%- liquid
                      assign products_grouped = product.metafields.custom.product_grouped | split: ','
                  -%}
                  [{{ product.id }},{%- for item in products_grouped -%}{{ item | split: 'Product/' | last | split: '"' | first }}{%- unless forloop.last -%},{%- endunless forloop.last -%}{%- endfor -%}]
                </script>
              </product-group>
              {% if enable_skeleton_loading %}</div>{% endif %}
            {% endif %}

          {%- when 'description' -%}
    
            {%- if product != blank -%}
              {%- if product.metafields.custom.short_description -%}
                <div
                  class="product-detail__short-description{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
                  {{ block.shopify_attributes }}
                >
                  {{ product.metafields.custom.short_description }}
                </div>
              {%- else -%}
                <div
                  class="product-detail__description{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
                  {{ block.shopify_attributes }}
                >
                  {{ product.description }}
                </div>
              {% endif %}
            {%- else -%}
              <div
                class="product-detail__description{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
                {{ block.shopify_attributes }}
              >
                {{ 'onboarding.default_description' | t }}
              </div>
            {% endif %}

          {%- when 'custom_liquid' -%}
            {% comment %} Custom liquid code block. {% endcomment %}
            <div
              class="product-detail__custom-liquid{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
              {{ block.shopify_attributes }}
            >
              {{ block_st.custom_liquid }}
            </div>

          {%- when 'more_colors' -%}
            {% comment %} More colors. {% endcomment %}
            {% if product.metafields.custom.more_colors != blank %}
              <div
                class="more-colors mb-25{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
                {{ block.shopify_attributes }}
              >
                <h3 class="text-size heading-letter-spacing mt-0 mb-12">{{ block_st.heading }}</h3>
                <div class="more-colors-products flex gap-10 flex-wrap">
                  {%- for product in product.metafields.custom.more_colors.value -%}
                    <div
                      class="more-colors-product_item rounded-5 overflow-hidden w-custom fs-0 border transition"
                      style="--custom-width: {{ block_st.image_width }}px"
                    >
                      <a
                        href="{{ product.url }}"
                        class="more-colors-product_link"
                        data-sizes="auto"
                        data-parent-fit="contain"
                      >
                        {% if product.featured_image != blank %}
                          {%- assign width = block_st.image_width -%}
                          {{
                            product.featured_image
                            | image_url: width: width
                            | image_tag: height: product.featured_image.height, title: product.featured_image.alt
                          }}
                        {% else %}
                          {%- render 'placeholder-render' -%}
                        {% endif %}
                      </a>
                    </div>
                  {%- endfor -%}
                </div>
              </div>
            {% endif %}

          {%- when '@app' -%}
            {% render block %}

          {%- when 'product_meta' -%}
            {% comment %} Product metadata like SKU, tags, etc. {% endcomment %}
            <ul
              class="product-detail__meta list-none p-0 mt-0 mb-20{% if enable_skeleton_loading %} skeleton-loading{% endif %}"
              {{ block.shopify_attributes }}
            >
              {% if block_st.show_barcode %}
                <li class="mb-2">
                  <span class="product-detail__meta-label inline-block">{{ 'products.product.barcode' | t }}:</span>
                  <span class="product-detail__meta-value heading-color">
                    {{- product.selected_or_first_available_variant.barcode | default: 'N/A' -}}
                  </span>
                </li>
              {% endif %}
              {% if block_st.show_sku %}
                <li class="mb-2">
                  <span class="product-detail__meta-label inline-block">{{ 'products.product.general.sku' | t }}:</span>
                  <span
                    class="product__sku product-detail__meta-value heading-color no-underline{% if product.selected_or_first_available_variant.sku.size == 0 %} visibility-hidden{% endif %}"
                    role="status"
                  >
                    {{- product.selected_or_first_available_variant.sku | default: 'N/A' -}}
                  </span>
                </li>
              {% endif %}
              {% if block_st.show_available %}
                <li class="mb-2">
                  {%- liquid
                    assign lable_stock = 'products.product.general.instock' | t
                    if product.selected_or_first_available_variant.inventory_management != null
                      if product.selected_or_first_available_variant.available and product.selected_or_first_available_variant.inventory_quantity < 1
                        assign lable_stock = 'products.product.general.pre_order' | t
                      elsif product.selected_or_first_available_variant.available
                        assign lable_stock = 'products.product.general.instock' | t
                      else
                        assign lable_stock = 'products.product.general.outstock' | t
                      endif
                    endif
                  -%}
                  <span class="product-detail__meta-label inline-block">
                    {{- 'products.product.general.available' | t }}:</span
                  >
                  <span class="product-detail__meta-value heading-color no-underline">{{- lable_stock -}}</span>
                </li>
              {% endif %}
              {% if block_st.show_collections %}
                <li class="mb-2">
                  <span class="product-detail__meta-label inline-block">
                    {{- 'products.product.general.collections' | t }}:</span
                  >
                  <span class="product-detail__meta-value heading-color no-underline">
                    {% if product.collections.size > 0 %}
                      {% for collection in product.collections %}
                        <a
                          href="{{ collection.url }}"
                          aria-label="{{- collection.title -}}"
                          class="no-underline"
                        >
                          {{- collection.title -}}
                          {%- if forloop.last != true -%},{% endif %}
                        </a>
                      {% endfor %}
                    {%- else -%}
                      N/A
                    {% endif %}
                  </span>
                </li>
              {% endif %}
              {% if block_st.show_tags %}
                <li class="mb-2">
                  <span class="product-detail__meta-label inline-block">
                    {{- 'products.product.general.tags' | t }}:</span
                  >
                  <span class="product-detail__meta-value heading-color no-underline">
                    {% if product.tags != blank %}
                      {% for tags in product.tags %}
                        {{- tags -}}
                        {%- if forloop.last != true -%},{% endif %}
                      {% endfor %}
                    {%- else -%}
                      N/A
                    {% endif %}
                  </span>
                </li>
              {% endif %}
              {% if block_st.show_type and product.type != blank %}
                <li class="mb-2">
                  <span class="product-detail__meta-label inline-block">
                    {{- 'products.product.general.type' | t }}:</span
                  >
                  <span class="product-detail__meta-value heading-color no-underline">
                    {{- product.type | link_to_type -}}
                  </span>
                </li>
              {% endif %}
            </ul>

        {%- endcase -%}
      {%- endfor -%}

      {% if enable_sticky_content_on_desktop %}</div>{% endif %}
    </div>
  </div>

  {% assign products_bought_together = product.metafields.custom.bought_together | split: ',' | uniq %}
  {% if enable_frequently_bought_together and products_bought_together.size > 0 %}
    <product-bought-together class="block" id="product-bought-together">
      <script type="application/json" class="productBoughTogether">
        [{{ product.id }},{%- for item in products_bought_together -%}{{ item | split: 'Product/' | last | split: '"' | first }}{%- unless forloop.last -%},{%- endunless forloop.last -%}{%- endfor -%}]
      </script>
    </product-bought-together>
  {% endif %}

  {% comment %} Sticky Add to Cart Section {% endcomment %}
  {% if enable_sticky_add_cart_on_desktop == true or enable_sticky_add_cart_on_mobile == true %}
    {%- assign product_form_id = 'sticky-addcart-form-' | append: section.id -%}
<sticky-add-cart
  class="fixed z-10 inset-x-0 bottom-0 py-15 shadow color-default transition-popup invisible 
  {% if enable_sticky_add_cart_on_desktop == true %}sticky_desktop--show{% else %} hidden-md{% endif %} 
  {% if enable_sticky_add_cart_on_mobile == true and section.settings.hide_sticky_add_cart_mobile == false %}sticky_mobile--show{% else %} hidden-mobile{% endif %}">
      <div class="{{ section_width }}">
        <div class="flex gap-15 justify-between align-center">
          {% render 'product-item',
            card_product: product,
            section_id: section.id,
            template_enable_action: false,
            template_enable_product_vendor: false,
            template_enable_rate: true,
            template_enable_product_short_description: false,
            template_enable_color_swatches: false,
            type: 'sticky',
           class: 'hidden lg:flex items-center gap-12',
            section_st: section_st
          %}
          <div class="sticky__item-info flex gap-20 w-full w-md-unset">
            <div class="product-detail__variant-picker text-size heading-color w-full">
              {% if user_variants_image_group %}
                {%- render 'color-swatches', product: product, type: 'sticky_group' -%}
              {% else %}
                {%- render 'color-swatches', product: product, type: 'sticky' -%}
              {% endif %}
            </div>
            <div class="product-detail__buy-buttons w-full">
              {%- render 'buy-buttons',
                product: product,
                product_form_id: product_form_id,
                section_id: section.id,
                show_wishlist: false,
                show_compare: false,
                formClass: 'feature-product-form',
                type: 'sticky'
              -%}
            </div>
          </div>
        </div>
      </div>
    </sticky-add-cart>
  {% endif %}

  {% unless product == empty %}
    <script
 {% endunless %}

{%- unless product.has_only_default_variant -%}
  <script type="application/json" class="productVariantsQty">
    [
      {%- for variant in product.variants -%}
        {%- assign op = variant.option1 | replace: '"', '\"' -%}
        {%- liquid
            assign id = '"id":' | append: variant.id
            assign option = '"option":"' | append: op | append: '"'
            assign quantity = '"qty":' | append: variant.inventory_quantity
            assign available = '"available":' | append: variant.available
            assign management = '"management":"' | append: variant.inventory_management | append: '"'
            assign incoming = '"incoming":"' | append: variant.incoming | append: '"'
            assign incoming_date = '"incoming_date":"' | append: variant.next_incoming_date | append: '"'
        -%}
        { {{ id }},{{ option }},{{ quantity }},{{ available }},{{ management }},{{ incoming }},{{ incoming_date }}}
        {%- unless forloop.last -%},{%- endunless forloop.last -%}
      {%- endfor -%}
    ]
  </script>
{%- endunless -%}

<script>
document.addEventListener("DOMContentLoaded", function () {
    const stickyCart = document.querySelector("sticky-add-cart");
    const enableGradient = {{ section.settings.enable_sticky_add_cart_gradient | json }};
    
    if (enableGradient) {
      stickyCart.style.backgroundImage = `linear-gradient(
        {{ section.settings.gradient_degrees | default: '90deg' }},
        {{ section.settings.gradient_color_1 | default: '#FF0000' }},
        {{ section.settings.gradient_color_2 | default: '#00FF00' }},
        {{ section.settings.gradient_color_3 | default: '#0000FF' }}
      )`;
    } else {
      stickyCart.style.backgroundImage = "none";
      stickyCart.style.backgroundColor = "{{ section.settings.sticky_add_cart_background_color | default: '#000000' }}";
    }
  });

   const stickyCart = document.querySelector("sticky-add-cart");

  // Get setting value from Shopify
  const hideStickyCart = {{ section.settings.hide_sticky_add_cart_mobile | json }};

  if (hideStickyCart && window.innerWidth <= 768) {
    stickyCart.classList.add("hidden-mobile");
  }
});




  

  
document.addEventListener("DOMContentLoaded", function () {
    // Select the sold-product element
    const soldProductElement = document.getElementById("dynamic-sold-product");

   
    if (!soldProductElement) {
        console.warn("Sold Product element not found!");
        return;
    }
    
    console.log("Sold Product Element Found:", soldProductElement);
   console.log(document.querySelector("#dynamic-sold-product"));

    console.log("Data Message:", soldProductElement.getAttribute("data-message"));
  
    // Ensure the element exists to avoid errors
    if (!soldProductElement) {
      console.warn("Element with ID 'dynamic-sold-product' not found.");
      return;
    }

    // Retrieve the unique product identifier from Liquid
    const productId = "{{ product.id }}"; // Assumes 'product.id' is available

    // Retrieve the configurable fixed hours from the Liquid setting
    const fixedHours = {{ settings.fixed_hours | default: 24 }};

    // Define the predefined sequence of sold counts
    const soldSequence = [2, 4, 6, 7, 8, 10, 11];
    
    // Function to get the next sold count in the sequence
    function getNextSoldCount(currentCount) {
      const currentIndex = soldSequence.indexOf(currentCount);
      if (currentIndex === -1 || currentIndex === soldSequence.length - 1) {
        // If currentCount not found or at the end of the sequence, reset to the first element
        return soldSequence[0];
      } else {
        // Return the next count in the sequence
        return soldSequence[currentIndex + 1];
      }
    }

    // Function to update the displayed message
    function updateSoldProductMessage(initialLoad = false) {
      let currentSold;
      const localStorageKey = `soldProductCount_${productId}`; // Unique key per product

      if (initialLoad) {
        // On initial load, check if a value exists in localStorage
        const storedSold = localStorage.getItem(localStorageKey);
        if (storedSold !== null) {
          currentSold = parseInt(storedSold, 10);
        } else {
          // If not, initialize with the first value in the sequence
          currentSold = soldSequence[0];
          localStorage.setItem(localStorageKey, currentSold);
        }
      } else {
        // On subsequent updates, get the next count in the sequence
        const storedSold = localStorage.getItem(localStorageKey);
        if (storedSold !== null) {
          currentSold = parseInt(storedSold, 10);
          const nextSold = getNextSoldCount(currentSold);
          // Update to the next count in the sequence
          currentSold = nextSold;
          localStorage.setItem(localStorageKey, currentSold);
        } else {
          // If somehow not set, initialize it
          currentSold = soldSequence[0];
          localStorage.setItem(localStorageKey, currentSold);
        }
      }

      // Update the data-message attribute dynamically
      soldProductElement.setAttribute(
        "data-message",
        `Sold ${currentSold} items in the past ${fixedHours} hours`
      );

      // Update the text content if displayed directly
      soldProductElement.innerText = `Sold ${currentSold} items in the past ${fixedHours} hours`;
    }

    // Initial call to set the first message
    updateSoldProductMessage(true);

    // Update the message every 2 minutes (120000 milliseconds)
    setInterval(function() {
      updateSoldProductMessage(false);
    }, 120000);
  });


document.addEventListener('DOMContentLoaded', function () {
  // Function to copy text to clipboard
  function copyToClipboard(text) {
    if (!navigator.clipboard) {
      // Fallback for older browsers
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in MS Edge.
      document.body.appendChild(textarea);
      textarea.focus();
      textarea.select();
      try {
        document.execCommand('copy');
        return true;
      } catch (err) {
        console.error('Fallback: Oops, unable to copy', err);
        return false;
      } finally {
        document.body.removeChild(textarea);
      }
    }
    return navigator.clipboard.writeText(text).then(function () {
      return true;
    }, function (err) {
      console.error('Async: Could not copy text: ', err);
      return false;
    });
  }

  // Function to change SVG to checked icon
  function showCheckmark(button) {
    // Define the checkmark SVG
    const checkmarkSVG = `
      <svg
        class="check-icon"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style="width: 20px; height: 20px;"
      >
        <path
          d="M20 6L9 17L4 12"
          stroke="white"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    `;

    // Replace the copy icon with the checkmark
    const copyIcon = button.querySelector('.copy-icon');
    if (copyIcon) {
      copyIcon.outerHTML = checkmarkSVG;
    }

    // Optionally, change the button background color to indicate success
    button.style.backgroundColor = '#28a745'; // Green color

    // Revert back after 2 seconds
    setTimeout(() => {
      // Restore the original copy SVG
      const originalCopySVG = `
        <svg
          class="copy-icon"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          style="width: 20px; height: 20px;"
        >
          <path
            d="M16 1H4C2.89543 1 2 1.89543 2 3V15H4V3H16V1Z"
            fill="white"
          />
          <path
            d="M18 5H8C6.89543 5 6 5.89543 6 7V21C6 22.1046 6.89543 23 8 23H18C19.1046 23 20 22.1046 20 21V7C20 5.89543 19.1046 5 18 5ZM18 21H8V7H18V21Z"
            fill="white"
          />
        </svg>
      `;
      const checkIcon = button.querySelector('.check-icon');
      if (checkIcon) {
        checkIcon.outerHTML = originalCopySVG;
      }
      // Revert the button color back to original
      button.style.backgroundColor = '#007BFF'; // Blue color
    }, 2000);
  }

  // Select all copy buttons
  const copyButtons = document.querySelectorAll('.copy-button');

  copyButtons.forEach(function (button) {
    button.addEventListener('click', function () {
      const textToCopy = button.getAttribute('data-content');
      copyToClipboard(textToCopy).then(function (success) {
        if (success) {
          showCheckmark(button);
        } else {
          alert('Failed to copy the link. Please try manually.');
        }
      });
    });
  });
});

document.addEventListener('DOMContentLoaded', function () {
  function isIE() {
    const ua = window.navigator.userAgent;
    const msie = ua.indexOf('MSIE ');
    const trident = ua.indexOf('Trident/');

    return msie > 0 || trident > 0;
  }

  if (!isIE()) return;
  const hiddenInput = document.querySelector('#{{ product_form_id }} input[name="id"]');
  const noScriptInputWrapper = document.createElement('div');
  const variantSwitcher =
    document.querySelector('variant-radios[data-section="{{ section.id }}"]') ||
    document.querySelector('variant-selects[data-section="{{ section.id }}"]');
  noScriptInputWrapper.innerHTML = document.querySelector(
    '.product-form__noscript-wrapper-{{ section.id }} mt-15 d-block'
  ).textContent;
  variantSwitcher.outerHTML = noScriptInputWrapper.outerHTML;

  document.querySelector('#Variants-{{ section.id }}').addEventListener('change', function (event) {
    hiddenInput.value = event.currentTarget.value;
  });
});
</script>

{%- if first_3_d_model -%}
  <script type="application/json" id="ProductJSON-{{ product.id }}">
    {{ product.media | where: 'media_type', 'model' | json }}
  </script>
  <script src="{{ 'product-model.js' | asset_url }}" defer></script>
{% endif %}

{%- liquid
  if product.selected_or_first_available_variant.featured_media
    assign seo_media = product.selected_or_first_available_variant.featured_media
  else
    assign seo_media = product.featured_media
  endif
-%}
<script type="application/ld+json">
{
  "@context": "http://schema.org/",
  "@type": "Product",
  "name": {{ product.title | json }},
  "url": {{ request.origin | append: product.url | json }},
  {% if seo_media -%}
    "image": [
      {{ seo_media | image_url: width: 1920 | prepend: "https:" | json }}
    ],
  {%- endif %}
  "description": {{ product.description | strip_html | json }},
  {% if product.selected_or_first_available_variant.sku != blank -%}
    "sku": {{ product.selected_or_first_available_variant.sku | json }},
  {%- endif %}
  "brand": {
    "@type": "Brand",
    "name": {{ product.vendor | json }}
  },
  "offers": [
    {%- for variant in product.variants -%}
      {
        "@type" : "Offer",
        {%- if variant.sku != blank -%}
          "sku": {{ variant.sku | json }},
        {% endif %}
        {%- if variant.barcode.size == 12 -%}
          "gtin12": {{ variant.barcode }},
        {% endif %}
        {%- if variant.barcode.size == 13 -%}
          "gtin13": {{ variant.barcode }},
        {% endif %}
        {%- if variant.barcode.size == 14 -%}
          "gtin14": {{ variant.barcode }},
        {% endif %}
        "availability" : "<http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}>",
        "price" : {{ variant.price | divided_by: 100.00 | json }},
        "priceCurrency" : {{ cart.currency.iso_code | json }},
        "url" : {{ request.origin | append: variant.url | json }}
      }{% unless forloop.last %},{% endunless %}
    {%- endfor -%}
  ]
}
</script>

{% if enable_skeleton_loading == true %}
  </skeleton-page>
{% else %}
  </div>
{% endif %}
</div>

{% schema %}
{
  "name": "t:sections.main-product.name",
  "tag": "section",
  "class": "section main-product-section",
  "settings": [
    {
      "type": "header",
      "content": "General Settings",
      "info": "Configure the overall appearance and behavior of the main product section."
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Product Page Width",
      "default": "container",
      "info": "Select the width of the product section container.",
      "options": [
        {
          "value": "container",
          "label": "FULL CONTAINER"
        },
        {
          "value": "fluid_container",
          "label": "FULL FLUID CONTAINER"
        },
        {
          "value": "stretch_width",
          "label": "FULL STRETCH WIDTH "
        },
        {
          "value": "full_width",
          "label": "FULL / FULL WITDTH"
        }
      ]
    },
    {


        "type": "range",
  "id": "padding_left_desktop",
  "label": "Left Padding (Desktop)",
  "min": 0,
  "max": 300,
  "step": 10,
  "default": 100,
  "unit": "px"
},
{
  "type": "range",
  "id": "padding_right_desktop",
  "label": "Right Padding (Desktop)",
  "min": 0,
  "max": 300,
  "step": 10,
  "default": 130,
  "unit": "px"

},
{

  "type": "header",
  "content": "Content Gap"
},
{
  "type": "range",
  "id": "content_gap_desktop",
  "label": "Gap between media ↔ info (desktop)",
  "min": 0,
  "max": 120,
  "step": 2,
  "default": 50,
  "unit": "px"


        },
    {
      "type": "range",
  "id": "info_top_space_mobile",
  "label": "Mobile Gap: Media ↔ Content (px)",
  "min": 0,
  "max": 100,
  "step": 5,
  "default": 30,
  "unit": "px"
       },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.color_scheme.label",
      "default": "scheme-1",
      "info": "Choose a color scheme for the product section."
  
    },
    {
      "type": "checkbox",
      "id": "enable_skeleton_loading",
      "default": true,
      "label": "Enable Product Pre-Loading",
      "info": "Show Pre loading loading screens while the product content loads."
    },
    
    {
      "type": "header",
      "content": "Media Settings",
      "info": "Configure the product media, including images and videos."
    },
    {
      "type": "range",
      "id": "desktop_media_width",
      "min": 40,
      "max": 60,
      "step": 1,
      "unit": "%",
      "label": "Media Size Overall",
      "default": 40,
      "info": "Set the width of the media area on desktop devices."
    
   },
    {
      "type": "checkbox",
  "id": "make_main_image_square",
  "label": "Make Main Product Image Square",
  "default": false,
  "info": "Enable square aspect ratio (1:1) for the main product image. Images will be cropped to fit."

},
{
  "type": "range",
  "id": "main_image_radius",
  "label": "Main Image Border Radius",
  "min": 0,
  "max": 50,
  "step": 1,
  "unit": "px",
  "default": 13,
  "info": "Set the border radius (rounded corners) for the main product image. Applies to both desktop and mobile."

    },
    {
      "type": "select",
      "id": "desktop_layout",
      "options": [
        {
          "value": "thumbnail_left",
          "label": "Left Stack Thumbnail"
        },
        {
          "value": "thumbnail_bottom",
          "label": "Bottom Thumbnail"
        },
        {
          "value": "hidden_thumbnail",
          "label": "Disable Thumbnail "
        },
        {
          "value": "stack",
          "label": "Stacked Thumbnails"
        }
      ],
      "default": "thumbnail_bottom",
      "label": "Image/Video Thumbnails Position",
      "info": "Choose the layout for product media on desktop devices."
    },
    {
      "type": "select",
      "id": "image_zoom",
      "options": [
        {
          "value": "no_zoom",
          "label": "No Zoom Behavior"
        },
        {
          "value": "open_lightbox",
          "label": "Enable Media Lightbox"
        },
        {
          "value": "inner_zoom_circle",
          "label": "Enable Inner Zoom Crcle"
        },
        {
          "value": "inner_zoom_square",
          "label": "Enable Inner Zoom "
        },
        {
          "value": "external_zoom",
          "label": "Enable External Zoom"
        }
      ],
      "default": "no_zoom",
      "label": "Media Image Zoom",
      "info": "Select the zoom behavior for product images."
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "default": true,
      "label": "Enable Video Looping",
      "info": "Enable or disable looping of product videos."
    },
    {
      "type": "checkbox",
      "id": "enable_video_autoplay",
      "default": true,
      "label": "Enable Video Autoplaying",
      "info": "Automatically play product videos on load."
    },
    
    {
      "type": "header",
      "content": "Badge Settings",
      "info": "Customize the appearance of badges such as sale or discount indicators."
    },
    {
      "type": "color",
      "id": "badge_background_color",
      "label": "Badge Background Color",
      "default": "#D10028",
      "info": "Set the background color for badges."
    },
    {
      "type": "color",
      "id": "badge_text_color",
      "label": "Badge Text Color",
      "default": "#FFFFFF",
      "info": "Set the text color for badges."
    },
    {
      "type": "range",
      "id": "badge_margin_left",
      "label": "Badge Margin Left",
      "min": 0,
      "max": 30,
      "step": 1,
      "default": 8,
      "unit": "px",
      "info": "Adjust the left margin of badges."
    },
    {
      "type": "checkbox",
      "id": "hide_discount_badge",
      "label": "Hide Discount Badge",
      "default": false,
      "info": "Show or hide the discount badge."
    },
    {
      "type": "checkbox",
      "id": "display_sale_text",
      "label": "Display 'SALE' Instead of Discount Percentage",
      "default": false,
      "info": "Choose to display 'SALE' text instead of the discount percentage."
    },
    
    {
      "type": "header",
      "content": "Typography Settings",
      "info": "Customize text colors and typography for product details."
    },
    {
      "type": "color",
      "id": "product_title_color",
      "label": "Product Title Color",
      "default": "#000000",
      "info": "Set the color for the product title."
    },
    {
      "type": "color",
      "id": "vendor_text_color",
      "label": "Vendor Text Color",
      "default": "#000000",
      "info": "Set the color for the vendor text."
    },
    {
      "type": "color",
      "id": "price_text_color",
      "label": "Price Text Color",
      "default": "#000000",
      "info": "Set the color for the product price."
    },
    {
      "type": "color",
      "id": "compare_price_color",
      "label": "Compare Price Color",
      "default": "#000000",
      "info": "Set the color for the compared price (original price)."
    },
    
    {
      "type": "header",
      "content": "Variant Settings",
      "info": "Configure the appearance and behavior of product variants."
    },
    {
      "type": "range",
      "id": "variant_border_radius_checked",
      "label": "Variant Border Radius (Checked)",
      "default": 40,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "info": "Set the border radius for selected variants."
    },
    {
      "type": "range",
      "id": "variant_border_radius_unchecked",
      "label": "Variant Border Radius (Unchecked)",
      "default": 10,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "info": "Set the border radius for unselected variants."
    },
    {
      "type": "color",
      "id": "variant_text_color_unselected",
      "label": "Variant Text Color (Selected)",
      "default": "#FFFFFF",
      "info": "Set the text color for selected variants."
    },
    {
      "type": "color",
      "id": "variant_background_color_unselected",
      "label": "Variant Background Color (Selected)",
      "default": "#000000",
      "info": "Set the background color for selected variants."
    },
    {
      "type": "color",
      "id": "variant_border_color_unselected",
      "label": "Variant Border Color (Selected)",
      "default": "#000000",
      "info": "Set the border color for selected variants."
    },
    {
      "type": "color",
      "id": "variant_text_color_unchecked",
      "label": "Variant Text Color (Unselected)",
      "default": "#000000",
      "info": "Set the text color for unselected variants."
    },
    {
      "type": "color",
      "id": "variant_background_color_unchecked",
      "label": "Variant Background Color (Unselected)",
      "default": "#FFFFFF",
      "info": "Set the background color for unselected variants."
    },
    {
      "type": "color",
      "id": "variant_border_color_unchecked",
      "label": "Variant Border Color (Unselected)",
      "default": "#DDDDDD",
      "info": "Set the border color for unselected variants."
    },
    
    {
      "type": "header",
      "content": "Quantity Selector Settings",
      "info": "Customize the appearance of the quantity selector."
    },
    {
      "type": "range",
      "id": "quantity_selector_border_radius",
      "label": "Quantity Selector Border Radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "default": 2,
      "unit": "px",
      "info": "Set the border radius for the quantity selector."
    },
    {
      "type": "color",
      "id": "quantity_selector_background_color",
      "label": "Quantity Selector Background Color",
      "default": "#F8F8F8",
      "info": "Set the background color for the quantity selector."
    },
    {
      "type": "color",
      "id": "quantity_selector_plus_minus_color",
      "label": "Quantity Selector Plus and Minus Color",
      "default": "#000",
      "info": "Set the color for the plus and minus buttons in the quantity selector."
    },
    {
      "type": "color",
      "id": "border_color_customizer",
      "label": "Quantity Selector Border Color Customizer",
      "default": "#F0F0F0",
      "info": "Set the border color for the quantity selector."
    },
    
    {
      "type": "header",
      "content": "Swatch Settings",
      "info": "Customize the appearance of color swatches."
    },
    {
      "type": "color",
      "id": "normal_swatch_border_color",
      "label": "Normal Color Swatch Border Color",
      "default": "#D3D3D3",
      "info": "Set the border color for normal (unselected) color swatches."
    },
    {
      "type": "range",
      "id": "color_swatch_border_radius",
      "label": "Color Swatch Border Radius",
      "default": 3,
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "info": "Adjust the border radius for color swatches."
    },
    {
      "type": "color",
      "id": "color_swatch_hover_clicked_border",
      "label": "Color Swatch Hover/Clicked Border Color",
      "default": "#000000",
      "info": "Set the border color for hovered or clicked color swatches."
    },
    
    {
      "type": "header",
      "content": "Zoom Icon Settings",
      "info": "Customize the appearance of the zoom icon on product images."
    },
    {
      "type": "color",
      "id": "zoom_icon_background_color",
      "label": "Zoom Icon Product Background Color",
      "default": "#FFFFFF",
      "info": "Set the background color for the zoom icon."
    },
    {
      "type": "color",
      "id": "zoom_icon_border_color",
      "label": "Zoom Icon Product Border Color",
      "default": "#EBEBEB",
      "info": "Set the border color for the zoom icon."
    },
    {
      "type": "range",
      "id": "zoom_icon_border_radius",
      "label": "Zoom Icon Product Border Radius",
      "default": 50,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "info": "Set the border radius for the zoom icon."
    },
    {
      "type": "header",
      "content": "Sticky Add to Cart Settings",
      "info": "Configure the sticky Add to Cart bar that appears when scrolling."
    },
    {
      "type": "color",
      "id": "sticky_add_cart_background_color",
      "label": "Sticky Add to Cart Background Color",
      "default": "#000000",
      "info": "Set the background color for the sticky Add to Cart bar."
    },
    {
      "type": "range",
      "id": "sticky_variant_selector_border_radius",
      "label": "Sticky Add to Cart Variant Selector Border Radius",
      "default": 5,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "info": "Set the border radius for the variant selector in the sticky Add to Cart bar."
    },
    {
      "type": "color",
      "id": "sticky_select_background_color",
      "label": "Sticky Add to Cart Select Background Color",
      "default": "#000000",
      "info": "Set the background color for select elements in the sticky Add to Cart bar."
    },
    {
      "type": "color",
      "id": "sticky_select_text_color",
      "label": "Sticky Add to Cart Select Text Color",
      "default": "#FFFFFF",
      "info": "Set the text color for select elements in the sticky Add to Cart bar."
    },
    {
      "type": "color",
      "id": "sticky_select_border_color",
      "label": "Sticky Add to Cart Select Border Color",
      "default": "#303030",
      "info": "Set the border color for select elements in the sticky Add to Cart bar."
    },
    
    {
      "type": "checkbox",
      "id": "hide_svg_icon",
      "label": "Hide SVG Icon",
      "default": false,
      "info": "Show or hide SVG icons in the product section."
    },
    
    {
      "type": "header",
      "content": "Upload Input / Text Input",
      "info": "Customize the appearance of upload input and text input"
    },
    {
      "type": "color",
      "id": "upload_input_border_color",
      "label": "Upload Input Border Color",
      "default": "#D8D8D8"
    },
    {
      "type": "color",
      "id": "upload_input_background_color",
      "label": "Upload Input Background Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "upload_input_text_color",
      "label": "Upload Input Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "upload_file_button_bg_color",
      "label": "Upload File Button Background Color",
      "default": "#f8f8f8"
    },
    {
      "type": "color",
      "id": "custom_image_upload_icon_color",
      "label": "Custom Image Upload Icon Color",
      "default": "#000000"
    },
    
    {
      "type": "header",
      "content": "Color Swatches",
      "info": "Customize the appearance of color swatches for product variants."
    },
    
    {
      "type": "header",
      "content": "Frequently Bought Together",
      "info": "Enable and configure the frequently bought together section."
    },
    {
      "type": "checkbox",
      "id": "enable_frequently_bought_together",
      "default": true,
      "label": "t:sections.main-product.settings.frequently_bought_together.enable",
      "info": "Enable or disable the frequently bought together section."
    },
    
    {
      "type": "header",
      "content": "Sticky Add to Cart",
      "info": "Configure the sticky Add to Cart bar settings for both desktop and mobile."
    },
    {
      "type": "checkbox",
      "id": "enable_on_desktop",
      "default": true,
      "label": "t:sections.main-product.settings.sticky_add_to_cart.enable_on_desktop",
      "info": "Enable the sticky Add to Cart bar on desktop devices."
    },
    {
      "type": "checkbox",
      "id": "enable_on_mobile",
      "default": true,
      "label": "t:sections.main-product.settings.sticky_add_to_cart.enable_on_mobile",
      "info": "Enable the sticky Add to Cart bar on mobile devices."
 },
    
    {


        "type": "checkbox",
  "id": "hide_sticky_add_cart_mobile",
  "default": false,
  "label": "Hide Sticky Add to Cart on Mobile"



      
    },
    
    {
      "type": "header",
      "content": "Mobile Options",
      "info": "Configure display options specific to mobile devices."
    },
    {
      "type": "select",
      "id": "mobile_options",
      "options": [
        {
          "value": "show_thumbnails",
          "label": "t:sections.main-product.settings.mobile_options.show_thumbnails"
        },
        {
          "value": "hidden_thumbnail",
          "label": "t:sections.main-product.settings.mobile_options.hidden_thumbnail"
        }
      ],
      "default": "show_thumbnails",
      "label": "t:sections.main-product.settings.mobile_options.label",
      "info": "Choose how thumbnails are displayed on mobile devices."
    },
    
    {
      "type": "header",
      "content": "Section Padding",
      "info": "Adjust the padding around the product section."
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:sections.all.section_padding.top.label",
      "default": 35,
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "info": "Set the top padding for the product section."
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:sections.all.section_padding.bottom.label",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "info": "Set the bottom padding for the product section."
    },
    {
      "type": "checkbox",
      "id": "reset_spacing",
      "label": "t:sections.all.section_padding.reset_spacing.label",
      "default": true,
      "info": "Reset all padding and spacing to default values."
    }
  ],
 "blocks": [
  {
    "type": "@app"
  },
  {
    "type": "title",
    "name": "t:sections.main-product.blocks.title.name",
    "limit": 1,
    "settings": [
  {
    "type": "checkbox",
    "id": "show_vendor",
    "label": "t:sections.main-product.blocks.product_meta.settings.show_vendor",
    "default": true
  },
  {
    "type": "range",
    "id": "title_size_d",
    "label": "Title size (desktop, px)",
    "min": 12,
    "max": 72,
    "step": 1,
    "default": 26
  },
  {
    "type": "range",
    "id": "title_size_m",
    "label": "Title size (mobile, px)",
    "min": 12,
    "max": 48,
    "step": 1,
    "default": 22
  },
  {
    "type": "range",
    "id": "title_weight",
    "label": "Title font weight",
    "min": 300,
    "max": 900,
    "step": 50,
    "default": 600
      }
    ]
  },
  {
    "type": "review_and_sold",
  "name": "t:sections.main-product.blocks.review_and_sold.name",
  "limit": 1,
  "settings": [
    {
      "type": "header",
      "content": "Sold Products and Reviews",
      "info": "Configure the display of sold products and customer reviews."
    },
    {
      "type": "checkbox",
      "id": "show_sold_products",
      "default": true,
      "label": "Show sold items/ added to cart ",
      "info": "Display the number of sold items or items added to the cart."
    },
    {
      "type": "checkbox",
      "id": "use_custom_sold",
      "label": "Use custom sold number",
      "default": false,
      "info": "If enabled, use the custom sold number value below; otherwise, use a dynamic value per product."
    },
    {
      "type": "text",
      "id": "sold",
      "label": "Sold Number",
      "default": "10",
      "info": "Enter the number of sold items to display if using a custom value."
    },
    {
      "type": "text",
      "id": "hours",
      "label": "Display Hours",
      "default": "12",
      "info": "Enter the number of hours to display in the sold message."
    },
    {
      "type": "checkbox",
      "id": "show_review",
      "default": true,
      "label": "Enable Rating Stars",
      "info": "Enable or disable the display of customer rating stars."
    },
    {
      "type": "color",
      "id": "sold_text_color",
      "label": "Sold Text Color",
      "default": "#FF0000",
      "info": "Set the text color for the sold products indicator."
    },

    { "type": "header", "content": "Spacing" },
    {
      "type": "range",
      "id": "rs_pt_d",
      "label": "Padding top (desktop)",
      "min": 0, "max": 80, "step": 2, "default": 2, "unit": "px"
    },
    {
      "type": "range",
      "id": "rs_pb_d",
      "label": "Padding bottom (desktop)",
      "min": 0, "max": 80, "step": 5, "default": 15, "unit": "px"
    },
    {
      "type": "range",
      "id": "rs_pt_m",
      "label": "Padding top (mobile)",
      "min": 0, "max": 80, "step": 2, "default": 6, "unit": "px"
    },
    {
      "type": "range",
      "id": "rs_pb_m",
      "label": "Padding bottom (mobile)",
      "min": 0, "max": 80, "step": 5, "default": 10, "unit": "px"
    }
  ]
},
{
  "type": "product_videos",
  "name": "Product Videos",
  "settings": [
    { "type": "header", "content": "Behavior" },
    { "type": "checkbox", "id": "autoplay", "label": "Autoplay when played", "default": true },
    { "type": "checkbox", "id": "enable_popup", "label": "Enable video popup", "default": true },

    { "type": "header", "content": "Layout & Spacing — Desktop" },
    { "type": "range", "id": "gap_d", "label": "Gap between videos", "min": 0, "max": 40, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "mt_d", "label": "Top margin", "min": 0, "max": 120, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "mb_d", "label": "Bottom margin", "min": 0, "max": 120, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "pl_d", "label": "Left padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_d", "label": "Right padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Layout & Spacing — Mobile" },
    { "type": "range", "id": "gap_m", "label": "Gap between videos (mobile)", "min": 0, "max": 40, "step": 2, "default": 12, "unit": "px" },
    { "type": "range", "id": "mt_m", "label": "Top margin", "min": 0, "max": 120, "step": 2, "default": 12, "unit": "px" },
    { "type": "range", "id": "mb_m", "label": "Bottom margin", "min": 0, "max": 120, "step": 2, "default": 12, "unit": "px" },
    { "type": "range", "id": "pl_m", "label": "Left padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_m", "label": "Right padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Visuals" },
    { "type": "color", "id": "bg", "label": "Section background", "default": "#F7F7F7" },
    { "type": "range", "id": "section_radius", "label": "Section border radius", "min": 0, "max": 64, "step": 2, "default": 24, "unit": "px" },
    { "type": "color", "id": "play_color", "label": "Play triangle color", "default": "#565656" },
    { "type": "range", "id": "video_radius", "label": "Video corner radius", "min": 0, "max": 36, "step": 1, "default": 16, "unit": "px" },

    { "type": "header", "content": "Custom Size (optional)" },
    { "type": "checkbox", "id": "enable_custom_size", "label": "Enable custom width/height", "default": true },
    { "type": "range", "id": "video_w", "label": "Video width", "min": 160, "max": 640, "step": 10, "default": 160, "unit": "px" },
    { "type": "range", "id": "video_h", "label": "Video height", "min": 0, "max": 480, "step": 10, "default": 220, "unit": "px" },

    { "type": "header", "content": "Videos (enable any mix of picker or URL)" },

    { "type": "checkbox", "id": "v1_enable", "label": "Enable Video 1", "default": true },
    { "type": "video", "id": "v1", "label": "Video 1 (picker)" },
    { "type": "text",  "id": "v1_url", "label": "Video 1 URL (YouTube/Vimeo)", "info": "Used if picker is empty." },

    { "type": "checkbox", "id": "v2_enable", "label": "Enable Video 2", "default": true },
    { "type": "video", "id": "v2", "label": "Video 2 (picker)" },
    { "type": "text",  "id": "v2_url", "label": "Video 2 URL (YouTube/Vimeo)" },

    { "type": "checkbox", "id": "v3_enable", "label": "Enable Video 3", "default": true },
    { "type": "video", "id": "v3", "label": "Video 3 (picker)" },
    { "type": "text",  "id": "v3_url", "label": "Video 3 URL (YouTube/Vimeo)" },

    { "type": "checkbox", "id": "v4_enable", "label": "Enable Video 4", "default": false },
    { "type": "video", "id": "v4", "label": "Video 4 (picker)" },
    { "type": "text",  "id": "v4_url", "label": "Video 4 URL (YouTube/Vimeo)" },

    { "type": "checkbox", "id": "v5_enable", "label": "Enable Video 5", "default": false },
    { "type": "video", "id": "v5", "label": "Video 5 (picker)" },
    { "type": "text",  "id": "v5_url", "label": "Video 5 URL (YouTube/Vimeo)" },

    { "type": "checkbox", "id": "v6_enable", "label": "Enable Video 6", "default": false },
    { "type": "video", "id": "v6", "label": "Video 6 (picker)" },
    { "type": "text",  "id": "v6_url", "label": "Video 6 URL (YouTube/Vimeo)" }
    
  ]
},
{
   "type": "lod_rating_badge",
  "name": "Rating Badge",
  "settings": [
    { "type": "header", "content": "Text" },
    { "type": "inline_richtext", "id": "label_text", "label": "Label Text", "default": "Excellent 4.7 / 5" },
    { "type": "color", "id": "text_color", "label": "Text Color", "default": "#111111" },
    { "type": "select", "id": "font_weight", "label": "Font Weight", "default": "600", "options": [
      { "value": "400", "label": "400" }, { "value": "500", "label": "500" }, { "value": "600", "label": "600" },
      { "value": "650", "label": "650" }, { "value": "700", "label": "700" }, { "value": "750", "label": "750" }
    ]},
    { "type": "range", "id": "text_size", "label": "Font Size", "min": 10, "max": 42, "step": 1, "default": 16, "unit": "px" },

    { "type": "header", "content": "Stars" },
    { "type": "color", "id": "stars_color", "label": "Stars (Tile) Color", "default": "#36A45C" },
    { "type": "color", "id": "star_icon_color", "label": "Star Icon Color", "default": "#FFFFFF" },
    { "type": "range", "id": "rating", "label": "Rating (0–5 in 0.5 steps)", "min": 1.5, "max": 5, "step": 0.5, "default": 4 },

    { "type": "header", "content": "Star Sizes — Desktop" },
    { "type": "range", "id": "star_tile_size_d", "label": "Square Size", "min": 10, "max": 64, "step": 1, "default": 16, "unit": "px" },
    { "type": "range", "id": "star_icon_scale_d", "label": "Star Inside (Percent)", "min": 50, "max": 100, "step": 1, "default": 100, "unit": "%" },
    { "type": "range", "id": "star_radius", "label": "Square Border Radius", "min": 0, "max": 10, "step": 1, "default": 0, "unit": "px" },

    { "type": "header", "content": "Star Sizes — Mobile" },
    { "type": "range", "id": "star_tile_size_m", "label": "Square Size (Mobile)", "min": 10, "max": 56, "step": 1, "default": 16, "unit": "px" },
    { "type": "range", "id": "star_icon_scale_m", "label": "Star Inside (Percent, Mobile)", "min": 50, "max": 100, "step": 1, "default": 100, "unit": "%" },

    { "type": "header", "content": "Make Clickable" },
    { "type": "checkbox", "id": "enable_link", "label": "Enable when section clicked → link", "default": false },
    { "type": "url", "id": "link_url", "label": "Link URL" },

    { "type": "header", "content": "Spacing — Desktop" },
    { "type": "range", "id": "section_mt_d", "label": "Top Margin", "min": 0, "max": 120, "step": 2, "default": 8, "unit": "px" },
    { "type": "range", "id": "section_mb_d", "label": "Bottom Margin", "min": 0, "max": 120, "step": 2, "default": 8, "unit": "px" },
    { "type": "range", "id": "section_pl_d", "label": "Left Padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "section_pr_d", "label": "Right Padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Spacing — Mobile" },
    { "type": "range", "id": "section_mt_m", "label": "Top Margin", "min": 0, "max": 120, "step": 2, "default": 6, "unit": "px" },
    { "type": "range", "id": "section_mb_m", "label": "Bottom Margin", "min": 0, "max": 120, "step": 2, "default": 6, "unit": "px" },
    { "type": "range", "id": "section_pl_m", "label": "Left Padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "section_pr_m", "label": "Right Padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" }
      ]
},
{
  "type": "lod_donation_badge",
  "name": "Donation / Info Badge",
  "settings": [
    { "type": "header", "content": "Section Spacing — Desktop" },
    { "type": "range", "id": "section_margin_top_d", "label": "Top Margin", "min": 0, "max": 120, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "section_margin_bottom_d", "label": "Bottom Margin", "min": 0, "max": 120, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "section_pl_d", "label": "Left Padding", "min": 0, "max": 64, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "section_pr_d", "label": "Right Padding", "min": 0, "max": 64, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Section Spacing — Mobile" },
    { "type": "range", "id": "section_margin_top_m", "label": "Top Margin", "min": 0, "max": 120, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "section_margin_bottom_m", "label": "Bottom Margin", "min": 0, "max": 120, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "section_pl_m", "label": "Left Padding", "min": 0, "max": 64, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "section_pr_m", "label": "Right Padding", "min": 0, "max": 64, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Badge Size" },
    { "type": "range", "id": "badge_width_d", "label": "Badge Max Width (Desktop)", "min": 300, "max": 1400, "step": 100, "default": 400, "unit": "px" },
    { "type": "range", "id": "badge_width_m", "label": "Badge Max Width (Mobile)", "min": 280, "max": 800, "step": 10, "default": 680, "unit": "px" },

    { "type": "header", "content": "Badge Padding — Desktop" },
    { "type": "range", "id": "badge_pt_d", "label": "Top", "min": 4, "max": 40, "step": 1, "default": 14, "unit": "px" },
    { "type": "range", "id": "badge_pb_d", "label": "Bottom", "min": 4, "max": 40, "step": 1, "default": 14, "unit": "px" },
    { "type": "range", "id": "badge_pl_d", "label": "Left", "min": 8, "max": 60, "step": 1, "default": 18, "unit": "px" },
    { "type": "range", "id": "badge_pr_d", "label": "Right", "min": 8, "max": 60, "step": 1, "default": 18, "unit": "px" },

    { "type": "header", "content": "Badge Padding — Mobile" },
    { "type": "range", "id": "badge_pt_m", "label": "Top", "min": 4, "max": 40, "step": 1, "default": 12, "unit": "px" },
    { "type": "range", "id": "badge_pb_m", "label": "Bottom", "min": 4, "max": 40, "step": 1, "default": 12, "unit": "px" },
    { "type": "range", "id": "badge_pl_m", "label": "Left", "min": 8, "max": 60, "step": 1, "default": 16, "unit": "px" },
    { "type": "range", "id": "badge_pr_m", "label": "Right", "min": 8, "max": 60, "step": 1, "default": 16, "unit": "px" },

    { "type": "header", "content": "Colors & Border" },
    { "type": "color", "id": "badge_bg", "label": "Badge Background", "default": "#E6F7EA" },
    { "type": "color", "id": "text_color", "label": "Text Color", "default": "#0F3B2E" },
    { "type": "color", "id": "icon_color", "label": "Icon Color", "default": "#0F3B2E" },
    { "type": "color", "id": "border_color", "label": "Badge Border Color", "default": "#CFEBD8" },
    { "type": "range", "id": "border_weight", "label": "Badge Border Weight", "min": 0, "max": 6, "step": 1, "default": 0, "unit": "px" },

    { "type": "header", "content": "Text Content" },
    { "type": "inline_richtext", "id": "badge_text_d", "label": "Badge Text (Desktop Version)", "default": "A portion of every order is <strong>donated</strong> to support global reforestation projects" },
    { "type": "inline_richtext", "id": "badge_text_m", "label": "Badge Text (Mobile Version)", "default": "A portion of every order is <strong>donated</strong> to support global reforestation projects" },
    { "type": "range", "id": "text_size_d", "label": "Font Size (Desktop)", "min": 10, "max": 24, "step": 1, "default": 14, "unit": "px" },
    { "type": "range", "id": "text_size_m", "label": "Font Size (Mobile)", "min": 10, "max": 22, "step": 1, "default": 13, "unit": "px" },

    { "type": "header", "content": "Icon (SVG) or Image" },
    { "type": "range", "id": "icon_gap", "label": "Gap Between Icon & Text", "min": 6, "max": 40, "step": 1, "default": 12, "unit": "px" },
    { "type": "textarea", "id": "icon_svg", "label": "Custom Icon SVG", "info": "Paste inline SVG. Uses currentColor to follow the Icon Color setting." },
    { "type": "range", "id": "icon_size_d", "label": "Icon Size (Desktop)", "min": 12, "max": 80, "step": 1, "default": 28, "unit": "px" },
    { "type": "range", "id": "icon_size_m", "label": "Icon Size (Mobile)", "min": 12, "max": 80, "step": 1, "default": 24, "unit": "px" },

    { "type": "checkbox", "id": "use_image", "label": "Enable Custom Image Instead of SVG", "default": false },
    { "type": "image_picker", "id": "icon_image", "label": "Icon Image" },
    { "type": "range", "id": "image_size_d", "label": "Image Size (Desktop)", "min": 10, "max": 120, "step": 10, "default": 30, "unit": "px" },
    { "type": "range", "id": "image_size_m", "label": "Image Size (Mobile)", "min": 10, "max": 120, "step": 10, "default": 20, "unit": "px" }
  ]
},
{
   "type": "pair_with_upsell",
  "name": "Pair With Upsell",
  "settings": [
    { "type": "header", "content": "Products (max 5)" },
    { "type": "product", "id": "p1", "label": "Product 1" },
    { "type": "product", "id": "p2", "label": "Product 2" },
    { "type": "product", "id": "p3", "label": "Product 3" },
    { "type": "product", "id": "p4", "label": "Product 4" },
    { "type": "product", "id": "p5", "label": "Product 5" },

    { "type": "text", "id": "heading", "label": "Heading", "default": "Works well with" },

    { "type": "header", "content": "Layout" },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout Type",
      "default": "slider",
      "options": [
        { "value": "slider", "label": "Slider" },
        { "value": "grid", "label": "Grid" }
      ]
    },
    { "type": "range", "id": "per_row_d", "label": "Items per row — Desktop", "min": 1, "max": 3, "step": 0.1, "default": 1.3 },
    { "type": "range", "id": "per_row_m", "label": "Items per row — Mobile", "min": 1, "max": 2, "step": 0.1, "default": 1.1 },
    { "type": "range", "id": "gap_d", "label": "Gap between items — Desktop", "min": 0, "max": 40, "step": 1, "default": 12, "unit": "px" },
    { "type": "range", "id": "gap_m", "label": "Gap between items — Mobile", "min": 0, "max": 30, "step": 1, "default": 10, "unit": "px" },

    { "type": "header", "content": "Section Spacing — Desktop" },
    { "type": "range", "id": "mt_d", "label": "Top margin", "min": 0, "max": 120, "step": 2, "default": 24, "unit": "px" },
    { "type": "range", "id": "mb_d", "label": "Bottom margin", "min": 0, "max": 120, "step": 2, "default": 24, "unit": "px" },
    { "type": "range", "id": "pl_d", "label": "Left padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_d", "label": "Right padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Section Spacing — Mobile" },
    { "type": "range", "id": "mt_m", "label": "Top margin", "min": 0, "max": 120, "step": 2, "default": 18, "unit": "px" },
    { "type": "range", "id": "mb_m", "label": "Bottom margin", "min": 0, "max": 120, "step": 2, "default": 18, "unit": "px" },
    { "type": "range", "id": "pl_m", "label": "Left padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_m", "label": "Right padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Price Display" },
    {
      "type": "select",
      "id": "price_currency",
      "label": "Display currency",
      "default": "shop",
      "options": [
        { "value": "shop", "label": "Use store currency" },
        { "value": "USD", "label": "USD — US Dollar" },
        { "value": "EUR", "label": "EUR — Euro" },
        { "value": "GBP", "label": "GBP — British Pound" },
        { "value": "CAD", "label": "CAD — Canadian Dollar" },
        { "value": "AUD", "label": "AUD — Australian Dollar" },
        { "value": "NZD", "label": "NZD — New Zealand Dollar" },
        { "value": "JPY", "label": "JPY — Japanese Yen" },
        { "value": "CNY", "label": "CNY — Chinese Yuan" },
        { "value": "HKD", "label": "HKD — Hong Kong Dollar" },
        { "value": "SGD", "label": "SGD — Singapore Dollar" },
        { "value": "CHF", "label": "CHF — Swiss Franc" },
        { "value": "SEK", "label": "SEK — Swedish Krona" },
        { "value": "NOK", "label": "NOK — Norwegian Krone" },
        { "value": "DKK", "label": "DKK — Danish Krone" },
        { "value": "PLN", "label": "PLN — Polish Zloty" },
        { "value": "CZK", "label": "CZK — Czech Koruna" },
        { "value": "HUF", "label": "HUF — Hungarian Forint" },
        { "value": "INR", "label": "INR — Indian Rupee" },
        { "value": "MXN", "label": "MXN — Mexican Peso" },
        { "value": "BRL", "label": "BRL — Brazilian Real" },
        { "value": "ZAR", "label": "ZAR — South African Rand" },
        { "value": "AED", "label": "AED — UAE Dirham" },
        { "value": "SAR", "label": "SAR — Saudi Riyal" },
        { "value": "ILS", "label": "ILS — Israeli Shekel" },
        { "value": "KRW", "label": "KRW — South Korean Won" },
        { "value": "TRY", "label": "TRY — Turkish Lira" },
        { "value": "TWD", "label": "TWD — New Taiwan Dollar" },
        { "value": "THB", "label": "THB — Thai Baht" },
        { "value": "MYR", "label": "MYR — Malaysian Ringgit" },
        { "value": "IDR", "label": "IDR — Indonesian Rupiah" },
        { "value": "PHP", "label": "PHP — Philippine Peso" },
        { "value": "VND", "label": "VND — Vietnamese Dong" },
        { "value": "RON", "label": "RON — Romanian Leu" },
        { "value": "BGN", "label": "BGN — Bulgarian Lev" },
        { "value": "RSD", "label": "RSD — Serbian Dinar" },
        { "value": "RUB", "label": "RUB — Russian Ruble" },
        { "value": "UAH", "label": "UAH — Ukrainian Hryvnia" },
        { "value": "QAR", "label": "QAR — Qatari Riyal" },
        { "value": "KWD", "label": "KWD — Kuwaiti Dinar" },
        { "value": "BHD", "label": "BHD — Bahraini Dinar" },
        { "value": "EGP", "label": "EGP — Egyptian Pound" },
        { "value": "NGN", "label": "NGN — Nigerian Naira" },
        { "value": "ARS", "label": "ARS — Argentine Peso" },
        { "value": "COP", "label": "COP — Colombian Peso" }
      ]
    },
    {
      "type": "text",
      "id": "currency_rate",
      "label": "Conversion rate (optional)",
      "default": "1",
      "info": "Only used when Display currency ≠ store currency. Multiplies the price before formatting."
    },

    { "type": "header", "content": "Cards" },
    { "type": "color", "id": "card_bg", "label": "Card background", "default": "#ffffff" },
    { "type": "color", "id": "card_border_color", "label": "Card border color", "default": "#e5e5e5" },
    { "type": "range", "id": "card_border_width", "label": "Card border width", "min": 0, "max": 4, "step": 1, "default": 1, "unit": "px" },
    { "type": "range", "id": "card_radius", "label": "Card corner radius", "min": 0, "max": 24, "step": 1, "default": 10, "unit": "px" },
    { "type": "range", "id": "card_padding", "label": "Card padding", "min": 6, "max": 28, "step": 1, "default": 12, "unit": "px" },

    { "type": "header", "content": "Product Frame (Tabs look)" },
    { "type": "color", "id": "tab_bg", "label": "Frame background", "default": "#ffffff" },
    { "type": "color", "id": "tab_border", "label": "Frame border color", "default": "#e5e5e5" },
    { "type": "range", "id": "tab_radius", "label": "Frame radius", "min": 0, "max": 24, "step": 1, "default": 12, "unit": "px" },

    { "type": "header", "content": "Image" },
    { "type": "range", "id": "image_size", "label": "Image size (square)", "min": 48, "max": 160, "step": 2, "default": 88, "unit": "px" },
    { "type": "range", "id": "image_radius", "label": "Image corner radius", "min": 0, "max": 24, "step": 1, "default": 8, "unit": "px" },

    { "type": "header", "content": "Typography & Colors" },
    { "type": "range", "id": "title_size", "label": "Title size", "min": 12, "max": 28, "step": 1, "default": 16, "unit": "px" },
    { "type": "range", "id": "text_size", "label": "Body size", "min": 10, "max": 22, "step": 1, "default": 14, "unit": "px" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#111111" },
    { "type": "color", "id": "price_color", "label": "Price color", "default": "#111111" },

    { "type": "header", "content": "Button" },
    { "type": "text", "id": "btn_label", "label": "Button text", "default": "Add product" },
    { "type": "text", "id": "btn_label_added", "label": "Button text (Added)", "default": "Added" },
    { "type": "range", "id": "btn_radius", "label": "Button radius", "min": 0, "max": 100, "step": 10, "default": 100, "unit": "px" },
    { "type": "range", "id": "btn_bw", "label": "Button border width", "min": 0, "max": 4, "step": 1, "default": 1, "unit": "px" },
    { "type": "color", "id": "btn_border", "label": "Button border color", "default": "#d7d7d7" },
    { "type": "color", "id": "btn_bg", "label": "Button background", "default": "#f0f0f0" },
    { "type": "color", "id": "btn_text", "label": "Button text color", "default": "#111111" },
    { "type": "color", "id": "btn_bg_added", "label": "Button background (Added)", "default": "#2f6fe0" },
    { "type": "color", "id": "btn_text_added", "label": "Button text color (Added)", "default": "#ffffff" }
      ]
},
{
    "type": "lod_testimonials_block",
  "name": "Testimonials",
  "settings": [
    { "type": "header", "content": "Typography — Desktop" },
    { "type": "range", "id": "star_size", "label": "Star Tile Size (Desktop)", "min": 12, "max": 48, "step": 1, "default": 22, "unit": "px" },
    { "type": "range", "id": "title_size", "label": "Title Font Size", "min": 9, "max": 32, "step": 1, "default": 14, "unit": "px" },
    { "type": "range", "id": "text_size", "label": "Text Font Size", "min": 9, "max": 24, "step": 1, "default": 13, "unit": "px" },
    { "type": "range", "id": "author_size", "label": "Author Font Size", "min": 9, "max": 24, "step": 1, "default": 13, "unit": "px" },

    { "type": "header", "content": "Typography — Mobile" },
    { "type": "range", "id": "star_size_mobile", "label": "Star Tile Size (Mobile)", "min": 10, "max": 40, "step": 1, "default": 18, "unit": "px" },
    { "type": "range", "id": "title_size_mobile", "label": "Title Font Size (Mobile)", "min": 9, "max": 28, "step": 1, "default": 14, "unit": "px" },
    { "type": "range", "id": "text_size_mobile", "label": "Text Font Size (Mobile)", "min": 9, "max": 22, "step": 1, "default": 12, "unit": "px" },
    { "type": "range", "id": "author_size_mobile", "label": "Author Font Size (Mobile)", "min": 9, "max": 22, "step": 1, "default": 12, "unit": "px" },

    { "type": "header", "content": "Star Icon Inside Tile" },
    { "type": "range", "id": "star_icon_scale_d", "label": "White Star Size (Desktop, % of tile)", "min": 55, "max": 95, "step": 1, "default": 95, "unit": "%" },
    { "type": "range", "id": "star_icon_scale_m", "label": "White Star Size (Mobile, % of tile)", "min": 55, "max": 95, "step": 1, "default": 95, "unit": "%" },
    { "type": "range", "id": "star_radius", "label": "Star Tile Border Radius", "min": 0, "max": 10, "step": 1, "default": 3, "unit": "px" },

    { "type": "header", "content": "Mobile Layout" },
    { "type": "range", "id": "mobile_peek_percentage", "label": "Mobile Peek Percentage", "min": 0, "max": 30, "step": 1, "default": 10, "unit": "%", "info": "Percentage of the next card to show on mobile." },

    { "type": "header", "content": "Verified Badge" },
    { "type": "checkbox", "id": "show_verified_badge", "label": "Show Verified Badge", "default": true },
    { "type": "text", "id": "verified_text", "label": "Verified Text", "default": "Verified" },
    { "type": "range", "id": "verified_text_size", "label": "Text Size", "min": 9, "max": 20, "step": 1, "default": 10, "unit": "px" },
    { "type": "range", "id": "verified_badge_padding_x", "label": "Badge Padding — X", "min": 4, "max": 24, "step": 1, "default": 8, "unit": "px" },
    { "type": "range", "id": "verified_badge_padding_y", "label": "Badge Padding — Y", "min": 2, "max": 12, "step": 1, "default": 4, "unit": "px" },
    { "type": "range", "id": "verified_badge_radius", "label": "Badge Radius", "min": 0, "max": 30, "step": 1, "default": 8, "unit": "px", "info": "Set to maximum for pill shape" },

    { "type": "header", "content": "Star Icon Source" },
    { "type": "select", "id": "star_style", "label": "Star Icon Style", "options": [
      { "value": "default", "label": "Default Star" },
      { "value": "custom",  "label": "Custom Image" }
    ], "default": "default" },
    { "type": "image_picker", "id": "custom_star_image", "label": "Custom Star Image", "info": "Used if 'Custom Image' is selected." },
    { "type": "range", "id": "star_gap", "label": "Gap Between Stars", "min": 0, "max": 14, "step": 1, "default": 6, "unit": "px" },

    { "type": "header", "content": "Colors" },
    { "type": "color", "id": "card_background_color", "label": "Card Background Color", "default": "#F8F8F8" },
    { "type": "color", "id": "title_text_color", "label": "Title Text Color", "default": "#333333" },
    { "type": "color", "id": "testimonial_text_color", "label": "Testimonial Text Color", "default": "#666666" },
    { "type": "color", "id": "author_text_color", "label": "Author Text Color", "default": "#333333" },

    { "type": "color", "id": "star_color", "label": "White Star (Glyph) Color", "default": "#FFFFFF" },
    { "type": "color", "id": "star_background_color", "label": "Filled Tile Color", "default": "#00B67A" },
    { "type": "color", "id": "star_empty_background_color", "label": "Empty Tile Color", "default": "#E6E6E6" },

    { "type": "color", "id": "verified_text_color", "label": "Verified Badge Text Color", "default": "#FFFFFF" },
    { "type": "color", "id": "verified_icon_bg_color", "label": "Verified Badge Background Color", "default": "#484848" },

    { "type": "color", "id": "nav_arrow_color", "label": "Navigation Arrow Color", "default": "#333333" },
    { "type": "color", "id": "nav_background_color", "label": "Navigation Background Color", "default": "rgba(255,255,255,0.9)" },

    { "type": "header", "content": "Layout" },
    { "type": "range", "id": "section_margin_top", "label": "Section Margin Top", "min": 0, "max": 100, "step": 5, "default": 15, "unit": "px" },
    { "type": "range", "id": "section_margin_bottom", "label": "Section Margin Bottom", "min": 0, "max": 100, "step": 5, "default": 15, "unit": "px" },
    { "type": "range", "id": "card_padding", "label": "Card Inner Padding", "min": 16, "max": 32, "step": 2, "default": 24, "unit": "px" },
    { "type": "range", "id": "cards_per_row", "label": "Cards Per Row (Desktop)", "min": 1, "max": 2, "step": 0.2, "default": 1.4, "info": "Control how many cards are visible at once (1.2 to 2 cards)" },
    { "type": "range", "id": "card_border_radius", "label": "Card Border Radius", "min": 0, "max": 30, "step": 1, "default": 0, "unit": "px" },
    { "type": "range", "id": "cards_gap", "label": "Gap Between Cards", "min": 5, "max": 60, "step": 5, "default": 10, "unit": "px" },

    { "type": "header", "content": "Testimonial 1" },
    { "type": "checkbox", "id": "t1_enable", "label": "Enable", "default": true },
    { "type": "inline_richtext", "id": "t1_title", "label": "Title", "default": "Impressed Right Away" },
    { "type": "inline_richtext", "id": "t1_text", "label": "Text", "default": "Lorem Ipsum is simply dummy text of the printing and typesetting industry." },
    { "type": "inline_richtext", "id": "t1_author", "label": "Author", "default": "Elias Kern" },
    { "type": "select", "id": "t1_rating", "label": "Stars", "default": "4", "options": [
      { "label": "2", "value": "2" }, { "label": "3", "value": "3" }, { "label": "4", "value": "4" }, { "label": "5", "value": "5" }
    ]},

    { "type": "header", "content": "Testimonial 2" },
    { "type": "checkbox", "id": "t2_enable", "label": "Enable", "default": true },
    { "type": "inline_richtext", "id": "t2_title", "label": "Title", "default": "Will Definitely Order Again" },
    { "type": "inline_richtext", "id": "t2_text", "label": "Text", "default": "Lorem Ipsum has been the industry's standard dummy text ever since the 1500s." },
    { "type": "inline_richtext", "id": "t2_author", "label": "Author", "default": "Elias Kern" },
    { "type": "select", "id": "t2_rating", "label": "Stars", "default": "4", "options": [
      { "label": "2", "value": "2" }, { "label": "3", "value": "3" }, { "label": "4", "value": "4" }, { "label": "5", "value": "5" }
    ]},

    { "type": "header", "content": "Testimonial 3" },
    { "type": "checkbox", "id": "t3_enable", "label": "Enable", "default": true },
    { "type": "inline_richtext", "id": "t3_title", "label": "Title", "default": "Super Happy With Everything" },
    { "type": "inline_richtext", "id": "t3_text", "label": "Text", "default": "Lorem Ipsum is simply dummy text of the printing and typesetting industry." },
    { "type": "inline_richtext", "id": "t3_author", "label": "Author", "default": "Elias Kern" },
    { "type": "select", "id": "t3_rating", "label": "Stars", "default": "5", "options": [
      { "label": "2", "value": "2" }, { "label": "3", "value": "3" }, { "label": "4", "value": "4" }, { "label": "5", "value": "5" }
    ]},

    { "type": "header", "content": "Testimonial 4" },
    { "type": "checkbox", "id": "t4_enable", "label": "Enable", "default": false },
    { "type": "inline_richtext", "id": "t4_title", "label": "Title", "default": "Great Quality" },
    { "type": "inline_richtext", "id": "t4_text", "label": "Text", "default": "Fast shipping and superb quality. Highly recommended." },
    { "type": "inline_richtext", "id": "t4_author", "label": "Author", "default": "Jane D." },
    { "type": "select", "id": "t4_rating", "label": "Stars", "default": "5", "options": [
      { "label": "2", "value": "2" }, { "label": "3", "value": "3" }, { "label": "4", "value": "4" }, { "label": "5", "value": "5" }
    ]},

    { "type": "header", "content": "Testimonial 5" },
    { "type": "checkbox", "id": "t5_enable", "label": "Enable", "default": false },
    { "type": "inline_richtext", "id": "t5_title", "label": "Title", "default": "Exactly What I Wanted" },
    { "type": "inline_richtext", "id": "t5_text", "label": "Text", "default": "Matches the description and looks even better in person." },
    { "type": "inline_richtext", "id": "t5_author", "label": "Author", "default": "Alex P." },
    { "type": "select", "id": "t5_rating", "label": "Stars", "default": "5", "options": [
      { "label": "2", "value": "2" }, { "label": "3", "value": "3" }, { "label": "4", "value": "4" }, { "label": "5", "value": "5" }
     ]}
  ]
},
{
"type": "stock_pulse_notice",
  "name": "Stock Pulse Notice",
  "limit": 1,
  "settings": [
    { "type": "header", "content": "Text" },
    { "type": "text", "id": "text_template", "label": "Text", "default": "Low stock — 5 items left" },
    { "type": "checkbox", "id": "auto_qty", "label": "Auto-fetch quantity and replace {{qty}}", "default": false },
    {
      "type": "select", "id": "auto_source", "label": "Auto quantity source", "default": "current",
      "options": [
        { "value": "current", "label": "Current product (on this page)" },
        { "value": "specific", "label": "Specific product (select below)" }
      ]
    },
    { "type": "product", "id": "ref_product", "label": "Specific product (used only if selected above)" },

    { "type": "header", "content": "Dot & Pulse" },
    { "type": "color", "id": "dot_color", "label": "Dot color", "default": "#FF4545" },
    { "type": "range", "id": "dot_size", "label": "Dot size (px)", "min": 6, "max": 18, "step": 1, "default": 10 },
    { "type": "range", "id": "pulse_ms", "label": "Pulse speed (ms)", "min": 600, "max": 3000, "step": 50, "default": 1400 },
    { "type": "range", "id": "pulse_scale", "label": "Pulse scale", "min": 1.2, "max": 3.2, "step": 0.1, "default": 2.4 },
    { "type": "range", "id": "pulse_opacity", "label": "Pulse opacity", "min": 0.1, "max": 0.8, "step": 0.1, "default": 0.5 },

    { "type": "header", "content": "Typography" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#1A1A1A" },
    { "type": "range", "id": "font_size_d", "label": "Font size (desktop, px)", "min": 10, "max": 22, "step": 1, "default": 14 },
    { "type": "range", "id": "font_size_m", "label": "Font size (mobile, px)", "min": 10, "max": 22, "step": 1, "default": 14 },
    {
      "type": "select", "id": "font_weight", "label": "Font weight", "default": "500",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },

    { "type": "header", "content": "Layout" },
    {
      "type": "select", "id": "align", "label": "Alignment", "default": "flex-start",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" }
      ]
    },
    { "type": "range", "id": "gap", "label": "Gap between dot & text (px)", "min": 6, "max": 24, "step": 1, "default": 10 },

    { "type": "header", "content": "Section Spacing (Desktop)" },
    { "type": "range", "id": "mt_d", "label": "Top margin (px)", "min": 0, "max": 100, "step": 1, "default": 0 },
    { "type": "range", "id": "mb_d", "label": "Bottom margin (px)", "min": 0, "max": 100, "step": 1, "default": 8 },

    { "type": "header", "content": "Section Spacing (Mobile)" },
    { "type": "range", "id": "mt_m", "label": "Top margin (px)", "min": 0, "max": 100, "step": 1, "default": 8},
    { "type": "range", "id": "mb_m", "label": "Bottom margin (px)", "min": 0, "max": 100, "step": 1, "default": 8 }
  
  ]
},
{
    "type": "social_proof_inline",
  "name": "Social Proof Avatars ",
  "settings": [
    { "type": "header", "content": "Text" },
    { "type": "inline_richtext", "id": "label_text", "label": "Text", "default": "Rated 4.8 / 5" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#222222" },
    {
      "type": "select", "id": "text_weight", "label": "Text weight", "default": "600",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },
    { "type": "range", "id": "text_size", "label": "Text size", "min": 10, "max": 24, "step": 1, "default": 16, "unit": "px" },

    { "type": "header", "content": "Profile Images" },
    { "type": "checkbox", "id": "show_avatars", "label": "Show profile images", "default": true },
    { "type": "image_picker", "id": "a1", "label": "Avatar 1" },
    { "type": "checkbox", "id": "a1_en", "label": "Enable avatar 1", "default": true },
    { "type": "image_picker", "id": "a2", "label": "Avatar 2" },
    { "type": "checkbox", "id": "a2_en", "label": "Enable avatar 2", "default": true },
    { "type": "image_picker", "id": "a3", "label": "Avatar 3" },
    { "type": "checkbox", "id": "a3_en", "label": "Enable avatar 3", "default": true },
    { "type": "image_picker", "id": "a4", "label": "Avatar 4" },
    { "type": "checkbox", "id": "a4_en", "label": "Enable avatar 4", "default": true },
    { "type": "range", "id": "avatar_size", "label": "Avatar size", "min": 16, "max": 48, "step": 1, "default": 23, "unit": "px" },
    { "type": "range", "id": "avatar_overlap", "label": "Avatar overlap (%)", "min": 0, "max": 80, "step": 1, "default": 38, "unit": "%" },
    { "type": "color", "id": "avatar_border_color", "label": "Avatar border color", "default": "#FFFFFF" },
    { "type": "range", "id": "avatar_border_width", "label": "Avatar border width", "min": 0, "max": 6, "step": 1, "default": 2, "unit": "px" },

    { "type": "header", "content": "Stars" },
    { "type": "checkbox", "id": "show_stars", "label": "Show stars", "default": true },
    { "type": "range", "id": "rating", "label": "Rating ", "min": 0, "max": 5, "step": 1, "default": 4 },
    { "type": "color", "id": "star_color", "label": "Star color", "default": "#F39C33" },
    { "type": "range", "id": "star_size", "label": "Star size", "min": 10, "max": 28, "step": 1, "default": 24, "unit": "px" },

    { "type": "header", "content": "Gaps" },
    { "type": "range", "id": "gap_avatars_text", "label": "Gap: avatars ↔ text", "min": 0, "max": 32, "step": 1, "default": 8, "unit": "px" },
    { "type": "range", "id": "gap_text_stars", "label": "Gap: text ↔ stars", "min": 0, "max": 32, "step": 1, "default": 4, "unit": "px" },

    { "type": "header", "content": "Background (wrapper)" },
    { "type": "color", "id": "bg_color", "label": "Background color", "default": "rgba(0,0,0,0)" },
    { "type": "range", "id": "bg_radius", "label": "Background radius", "min": 0, "max": 32, "step": 1, "default": 0, "unit": "px" },
    { "type": "range", "id": "bg_padding_y", "label": "Background padding Y", "min": 0, "max": 20, "step": 1, "default": 0, "unit": "px" },
    { "type": "range", "id": "bg_padding_x", "label": "Background padding X", "min": 0, "max": 20, "step": 1, "default": 0, "unit": "px" },

    { "type": "header", "content": "Spacing — Desktop" },
    { "type": "range", "id": "mt_d", "label": "Top margin", "min": 0, "max": 120, "step": 2, "default": 8, "unit": "px" },
    { "type": "range", "id": "mb_d", "label": "Bottom margin", "min": 0, "max": 120, "step": 2, "default": 8, "unit": "px" },
    { "type": "range", "id": "pl_d", "label": "Left padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_d", "label": "Right padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },

    { "type": "header", "content": "Spacing — Mobile" },
    { "type": "range", "id": "mt_m", "label": "Top margin", "min": 0, "max": 120, "step": 2, "default": 6, "unit": "px" },
    { "type": "range", "id": "mb_m", "label": "Bottom margin", "min": 0, "max": 120, "step": 2, "default": 6, "unit": "px" },
    { "type": "range", "id": "pl_m", "label": "Left padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_m", "label": "Right padding", "min": 0, "max": 80, "step": 2, "default": 0, "unit": "px" }
      
  ]
},
{
 "type": "product_addon",
  "name": "Product Add-On",
  "limit": 6,
  "settings": [
    { "type": "product", "id": "addon_product", "label": "Select add-on product" },

    { "type": "header", "content": "Text & Typography" },
    {
      "type": "select", "id": "text_weight", "label": "Title weight (for name)", "default": "600",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },
    {
      "type": "select", "id": "add_text_weight", "label": "“Add” text weight", "default": "700",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },
    { "type": "range", "id": "text_size", "label": "Title size (px)", "min": 12, "max": 24, "step": 1, "default": 16 },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#111111" },

    { "type": "header", "content": "Price styles" },
    {
      "type": "select", "id": "price_weight", "label": "Price weight", "default": "600",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },
    { "type": "color", "id": "price_color", "label": "Price color", "default": "#111111" },
    { "type": "range", "id": "price_size", "label": "Price size (px)", "min": 12, "max": 22, "step": 1, "default": 16 },

    {
      "type": "select", "id": "compare_weight", "label": "Compare-at weight", "default": "400",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },
    { "type": "color", "id": "compare_color", "label": "Compare-at color", "default": "#9AA0A6" },
    { "type": "range", "id": "compare_size", "label": "Compare-at size (px)", "min": 10, "max": 20, "step": 1, "default": 14 },

    { "type": "header", "content": "Image" },
    { "type": "range", "id": "image_size", "label": "Image size (px)", "min": 36, "max": 96, "step": 2, "default": 54 },
    { "type": "range", "id": "image_radius", "label": "Image radius (px)", "min": 0, "max": 20, "step": 1, "default": 10 },

    { "type": "header", "content": "Checkbox" },
    { "type": "color", "id": "chk_bg", "label": "Checkbox background", "default": "#EBEBEB" },
    { "type": "color", "id": "chk_check_color", "label": "Check icon color", "default": "#FFFFFF" },
    { "type": "color", "id": "chk_bg_checked", "label": "Checkbox background (checked)", "default": "#1575F4" },
    { "type": "color", "id": "active_border_color", "label": "Active border color (when checked)", "default": "#929292" },
    { "type": "range", "id": "active_border_width", "label": "Active border thickness (px)", "min": 0, "max": 6, "step": 1, "default": 1 },



    { "type": "header", "content": "Variant selector" },
    { "type": "checkbox", "id": "enable_variant_selector", "label": "Enable variant selector", "default": false },
    { "type": "range", "id": "variant_space_top", "label": "Variant selector top spacing (px)", "min": 0, "max": 24, "step": 1, "default": 8 },
    { "type": "range", "id": "variant_space_bottom", "label": "Variant selector bottom spacing (px)", "min": 0, "max": 24, "step": 1, "default": 8 },

    { "type": "header", "content": "Card styles" },
    { "type": "color", "id": "bg_color", "label": "Background color", "default": "#F6F7F9" },
    { "type": "color", "id": "border_color", "label": "Border color", "default": "#E3E5EA" },
    { "type": "range", "id": "border_radius", "label": "Border radius (px)", "min": 0, "max": 24, "step": 1, "default": 12 },

    { "type": "header", "content": "Section layout — Desktop" },
    { "type": "range", "id": "section_width_d", "label": "Section width (px)", "min": 320, "max": 900, "step": 10, "default": 370 },
    { "type": "range", "id": "pad_top_d", "label": "Top padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "pad_bottom_d", "label": "Bottom padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "pad_left_d", "label": "Left padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "pad_right_d", "label": "Right padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "margin_top_d", "label": "Top margin (px)", "min": 0, "max": 48, "step": 1, "default": 12 },
    { "type": "range", "id": "margin_bottom_d", "label": "Bottom margin (px)", "min": 0, "max": 48, "step": 1, "default": 12 },

    { "type": "header", "content": "Section layout — Mobile" },
    { "type": "range", "id": "section_width_m", "label": "Section width (px)", "min": 260, "max": 640, "step": 10, "default": 340 },
    { "type": "range", "id": "pad_top_m", "label": "Top padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "pad_bottom_m", "label": "Bottom padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "pad_left_m", "label": "Left padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "pad_right_m", "label": "Right padding (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
    { "type": "range", "id": "margin_top_m", "label": "Top margin (px)", "min": 0, "max": 48, "step": 1, "default": 12 },
    { "type": "range", "id": "margin_bottom_m", "label": "Bottom margin (px)", "min": 0, "max": 48, "step": 1, "default": 12 }
    
  ]
},
{
  
   "type": "size_chart_popup",
  "name": "Size Chart Popup",
  "limit": 1,
  "settings": [
    { "type": "header", "content": "Trigger" },
    { "type": "text", "id": "trig_text", "label": "Trigger text", "default": "Size Guide" },
    { "type": "range", "id": "trig_font_size", "label": "Font size", "min": 10, "max": 28, "step": 1, "default": 16 },
    { "type": "select", "id": "trig_font_weight", "label": "Font weight", "default": "600",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },
    { "type": "color", "id": "trig_color", "label": "Text color", "default": "#111111" },
    { "type": "checkbox", "id": "show_icon", "label": "Show icon", "default": true },
    { "type": "color", "id": "icon_color", "label": "Icon color", "default": "#111111" },
    { "type": "range", "id": "icon_size", "label": "Icon size (px)", "min": 10, "max": 28, "step": 1, "default": 25 },
    { "type": "range", "id": "trig_gap", "label": "Gap between icon and text (px)", "min": 0, "max": 24, "step": 1, "default": 6 },

    { "type": "paragraph", "content": "Trigger padding — Desktop" },
    { "type": "range", "id": "trig_pad_t_d", "label": "Top (px)", "min": 0, "max": 60, "step": 1, "default": 8 },
    { "type": "range", "id": "trig_pad_b_d", "label": "Bottom (px)", "min": 0, "max": 60, "step": 1, "default": 8 },
    { "type": "range", "id": "trig_pad_l_d", "label": "Left (px)", "min": 0, "max": 60, "step": 1, "default": 0 },
    { "type": "range", "id": "trig_pad_r_d", "label": "Right (px)", "min": 0, "max": 60, "step": 1, "default": 0 },

    { "type": "paragraph", "content": "Trigger padding — Tablet" },
    { "type": "range", "id": "trig_pad_t_t", "label": "Top (px)", "min": 0, "max": 60, "step": 1, "default": 8 },
    { "type": "range", "id": "trig_pad_b_t", "label": "Bottom (px)", "min": 0, "max": 60, "step": 1, "default": 8 },
    { "type": "range", "id": "trig_pad_l_t", "label": "Left (px)", "min": 0, "max": 60, "step": 1, "default": 0 },
    { "type": "range", "id": "trig_pad_r_t", "label": "Right (px)", "min": 0, "max": 60, "step": 1, "default": 0 },

    { "type": "paragraph", "content": "Trigger padding — Mobile" },
    { "type": "range", "id": "trig_pad_t_m", "label": "Top (px)", "min": 0, "max": 60, "step": 1, "default": 8 },
    { "type": "range", "id": "trig_pad_b_m", "label": "Bottom (px)", "min": 0, "max": 60, "step": 1, "default": 8 },
    { "type": "range", "id": "trig_pad_l_m", "label": "Left (px)", "min": 0, "max": 60, "step": 1, "default": 0 },
    { "type": "range", "id": "trig_pad_r_m", "label": "Right (px)", "min": 0, "max": 60, "step": 1, "default": 0 },

    { "type": "checkbox", "id": "underline_text", "label": "Enable underline under text", "default": false },


    { "type": "header", "content": "Modal" },
    { "type": "text", "id": "modal_title", "label": "Modal title", "default": "Size Guide" },
    { "type": "color", "id": "modal_bg", "label": "Modal background", "default": "#FFFFFF" },
    { "type": "range", "id": "modal_radius", "label": "Corner radius (px)", "min": 0, "max": 32, "step": 1, "default": 12 },
    { "type": "range", "id": "modal_padding", "label": "Inner padding (px)", "min": 8, "max": 40, "step": 1, "default": 20 },

    { "type": "range", "id": "modal_width_d", "label": "Modal width — Desktop (px)", "min": 360, "max": 1200, "step": 10, "default": 880 },
    { "type": "range", "id": "modal_width_t", "label": "Modal width — Tablet (px)", "min": 320, "max": 1000, "step": 10, "default": 720 },
    { "type": "range", "id": "modal_width_m", "label": "Modal width — Mobile (px)", "min": 260, "max": 640, "step": 10, "default": 360 },

    { "type": "header", "content": "Popup Mode" },
    { "type": "checkbox", "id": "enable_size_popup", "label": "Enable Size Chart popup (with tabs) instead of Image popup", "default": true },

    { "type": "text", "id": "tab_sizes_label", "label": "Tab label — Sizes", "default": "Sizes" },
    { "type": "text", "id": "tab_measure_label", "label": "Tab label — How to measure", "default": "How to measure" },

    { "type": "page", "id": "sizes_page", "label": "Page containing size chart (renders in Sizes tab)", "info": "Size Chart Setup Tutorial →  [Size Chart Guide](https://materia-theme.gitbook.io/materia-theme/getting-started/create-pages-required#id-2.-size-chart-setup)." },

    { "type": "header", "content": "How to measure" },
    { "type": "image_picker", "id": "measure_image", "label": "How-to image" },
    { "type": "text", "id": "h_a_title", "label": "A — Title", "default": "CHEST" },
    { "type": "textarea", "id": "h_a_text", "label": "A — Description", "default": "Measure around the fullest part of your chest, keeping the measuring tape horizontal." },
    { "type": "text", "id": "h_b_title", "label": "B — Title", "default": "WAIST" },
    { "type": "textarea", "id": "h_b_text", "label": "B — Description", "default": "Measure around the narrowest part of your waist, keeping the tape horizontal." },
    { "type": "text", "id": "h_c_title", "label": "C — Title", "default": "HIPS" },
    { "type": "textarea", "id": "h_c_text", "label": "C — Description", "default": "Measure around the fullest part of your hips, keeping the tape horizontal." },

    { "type": "header", "content": "Image Popup (used if Size Chart popup is disabled)" },
    { "type": "image_picker", "id": "chart_image", "label": "Image for simple popup" },
    { "type": "select", "id": "image_ratio", "label": "Aspect ratio", "default": "auto",
      "options": [
        { "value": "auto", "label": "Auto" },
        { "value": "1_1", "label": "1 : 1" },
        { "value": "4_5", "label": "4 : 5" },
        { "value": "3_4", "label": "3 : 4" },
        { "value": "2_3", "label": "2 : 3" },
        { "value": "4_3", "label": "4 : 3" },
        { "value": "3_2", "label": "3 : 2" },
        { "value": "16_9", "label": "16 : 9" },
        { "value": "9_16", "label": "9 : 16" }
      ]
    },
    { "type": "select", "id": "image_fit", "label": "Image fit", "default": "contain",
      "options": [
        { "value": "contain", "label": "Contain" },
        { "value": "cover", "label": "Cover" }
      ]
    },
    { "type": "range", "id": "image_radius", "label": "Image corner radius (px)", "min": 0, "max": 32, "step": 1, "default": 8 }
  
  ]
},
{
    "type": "infotables",
  "name": "Info Rows",
  "settings": [
    { "type": "header", "content": "General" },
    { "type": "range", "id": "max_width", "label": "Max width (px)", "min": 480, "max": 1400, "step": 10, "default": 760 },
    { "type": "checkbox", "id": "center_card", "label": "Center within container", "default": true },

    { "type": "color", "id": "bg_color", "label": "Background color", "default": "#ffffff" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#222222" },
    { "type": "color", "id": "icon_color", "label": "Icon color", "default": "#222222" },
    { "type": "color", "id": "border_color", "label": "Border color", "default": "#e9e9e9" },
    { "type": "select", "id": "border_style", "label": "Border style", "default": "solid", "options": [
      { "value": "solid", "label": "Solid" },
      { "value": "dashed", "label": "Dashed" },
      { "value": "dotted", "label": "Dotted" }
    ]},
    { "type": "color", "id": "divider_color", "label": "Row divider color", "default": "#eeeeee" },
    { "type": "select", "id": "divider_style", "label": "Row divider style", "default": "solid", "options": [
      { "value": "solid", "label": "Solid" },
      { "value": "dashed", "label": "Dashed" },
      { "value": "dotted", "label": "Dotted" }
    ]},

    { "type": "range", "id": "font_size_d", "label": "Font size (desktop, px)", "min": 12, "max": 22, "step": 1, "default": 16 },
    { "type": "range", "id": "font_size_m", "label": "Font size (mobile, px)", "min": 12, "max": 20, "step": 1, "default": 15 },
    { "type": "range", "id": "line_height", "label": "Line height (%)", "min": 110, "max": 190, "step": 5, "default": 150 },
    { "type": "range", "id": "font_weight", "label": "Base font weight", "min": 300, "max": 800, "step": 50, "default": 400 },

    { "type": "range", "id": "row1_highlight_weight", "label": "Row 1 highlight weight", "min": 500, "max": 900, "step": 50, "default": 700 },
    { "type": "range", "id": "row2_highlight_weight", "label": "Row 2 highlight weight", "min": 500, "max": 900, "step": 50, "default": 700 },
    { "type": "range", "id": "row3_highlight_weight", "label": "Row 3 highlight weight", "min": 500, "max": 900, "step": 50, "default": 700 },

    { "type": "range", "id": "icon_size", "label": "Icon size (px)", "min": 14, "max": 40, "step": 1, "default": 22 },
    { "type": "range", "id": "icon_gap", "label": "Horizontal gap (icon ↔ text, px)", "min": 6, "max": 40, "step": 1, "default": 18 },

    { "type": "header", "content": "Section spacing — outside (Desktop)" },
    { "type": "range", "id": "section_pt_d", "label": "Top margin (px)", "min": 0, "max": 120, "step": 5, "default": 25 },
    { "type": "range", "id": "section_pb_d", "label": "Bottom margin (px)", "min": 0, "max": 120, "step": 5, "default": 25 },

    { "type": "header", "content": "Section spacing — outside (Mobile)" },
    { "type": "range", "id": "section_pt_m", "label": "Top margin (px)", "min": 0, "max": 120, "step": 5, "default": 20 },
    { "type": "range", "id": "section_pb_m", "label": "Bottom margin (px)", "min": 0, "max": 120, "step": 5, "default": 15 },

    { "type": "header", "content": "Padding — Desktop" },
    { "type": "range", "id": "pt_d", "label": "Top (px)", "min": 0, "max": 80, "step": 1, "default": 15 },
    { "type": "range", "id": "pb_d", "label": "Bottom (px)", "min": 0, "max": 80, "step": 1, "default": 15 },
    { "type": "range", "id": "pl_d", "label": "Left (px)", "min": 0, "max": 80, "step": 1, "default": 18 },
    { "type": "range", "id": "pr_d", "label": "Right (px)", "min": 0, "max": 80, "step": 1, "default": 18 },

    { "type": "header", "content": "Padding — Mobile" },
    { "type": "range", "id": "pt_m", "label": "Top (px)", "min": 0, "max": 80, "step": 1, "default": 12 },
    { "type": "range", "id": "pb_m", "label": "Bottom (px)", "min": 0, "max": 80, "step": 1, "default": 12 },
    { "type": "range", "id": "pl_m", "label": "Left (px)", "min": 0, "max": 80, "step": 1, "default": 14 },
    { "type": "range", "id": "pr_m", "label": "Right (px)", "min": 0, "max": 80, "step": 1, "default": 14 },

    { "type": "header", "content": "Row 1 — Delivery" },
    { "type": "checkbox", "id": "row1_enable", "label": "Enable row 1", "default": true },
    { "type": "checkbox", "id": "row1_custom_icon", "label": "Enable custom SVG icon", "default": false },
    {
      "type": "textarea",
      "id": "row1_svg",
      "label": "Custom icon SVG (used only if enabled)",
      "default": "/",
      "info": "Paste inline SVG. For color control, ensure it uses currentColor."
    },
    { "type": "text", "id": "row1_lead", "label": "Lead text", "default": "Estimate delivery times:" },
    { "type": "text", "id": "row1_strong", "label": "Highlight text", "default": "3–5 days International." },

    { "type": "header", "content": "Row 2 — Discount code" },
    { "type": "checkbox", "id": "row2_enable", "label": "Enable row 2", "default": true },
    { "type": "checkbox", "id": "row2_custom_icon", "label": "Enable custom SVG icon", "default": false },
    {
      "type": "textarea",
      "id": "row2_svg",
      "label": "Custom icon SVG (used only if enabled)",
      "default": "<svg viewBox=\"-0.5 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <path d=\"M18 3.91992H6C3.79086 3.91992 2 5.71078 2 7.91992V17.9199C2 20.1291 3.79086 21.9199 6 21.9199H18C20.2091 21.9199 22 20.1291 22 17.9199V7.91992C22 5.71078 20.2091 3.91992 18 3.91992Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path> <path d=\"M7 17.9199L17 7.91992\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path> <path d=\"M8 11.9199C9.10457 11.9199 10 11.0245 10 9.91992C10 8.81535 9.10457 7.91992 8 7.91992C6.89543 7.91992 6 8.81535 6 9.91992C6 11.0245 6.89543 11.9199 8 11.9199Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path> <path d=\"M16 17.9199C17.1046 17.9199 18 17.0245 18 15.9199C18 14.8154 17.1046 13.9199 16 13.9199C14.8954 13.9199 14 14.8154 14 15.9199C14 17.0245 14.8954 17.9199 16 17.9199Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path> </g></svg>",
      "info": "Paste inline SVG. For color control, ensure it uses currentColor."
    },
    { "type": "text", "id": "row2_lead", "label": "Lead text", "default": "Use code" },
    { "type": "text", "id": "row2_code", "label": "Discount code", "default": "WELCOME15" },
    { "type": "text", "id": "row2_tail", "label": "Trailing text", "default": "for discount 15% on your first order." },

    { "type": "header", "content": "Row 3 — Free shipping & returns" },
    { "type": "checkbox", "id": "row3_enable", "label": "Enable row 3", "default": true },
    { "type": "checkbox", "id": "row3_custom_icon", "label": "Enable custom SVG icon", "default": false },
    {
      "type": "textarea",
      "id": "row3_svg",
      "label": "Custom icon SVG (used only if enabled)",
      "default": "<svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <path d=\"M15.5777 3.38197L17.5777 4.43152C19.7294 5.56066 20.8052 6.12523 21.4026 7.13974C22 8.15425 22 9.41667 22 11.9415V12.0585C22 14.5833 22 15.8458 21.4026 16.8603C20.8052 17.8748 19.7294 18.4393 17.5777 19.5685L15.5777 20.618C13.8221 21.5393 12.9443 22 12 22C11.0557 22 10.1779 21.5393 8.42229 20.618L6.42229 19.5685C4.27063 18.4393 3.19479 17.8748 2.5974 16.8603C2 15.8458 2 14.5833 2 12.0585V11.9415C2 9.41667 2 8.15425 2.5974 7.13974C3.19479 6.12523 4.27063 5.56066 6.42229 4.43152L8.42229 3.38197C10.1779 2.46066 11.0557 2 12 2C12.9443 2 13.8221 2.46066 15.5777 3.38197Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path> <path d=\"M21 7.5L17 9.5M12 12L3 7.5M12 12V21.5M12 12C12 12 14.7426 10.6287 16.5 9.75C16.6953 9.65237 17 9.5 17 9.5M17 9.5V13M17 9.5L7.5 4.5\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path> </g></svg>",
      "info": "Paste inline SVG. For color control, ensure it uses currentColor."
    },
    { "type": "text", "id": "row3_lead", "label": "Lead text", "default": "Free shipping & returns:" },
    { "type": "text", "id": "row3_strong", "label": "Highlight text", "default": "On all orders over $150." }
  ]
},
{
    "type": "countdown_badge",
  "name": "Countdown Badge",
  "limit": 1,
  "settings": [
    { "type": "header", "content": "Content" },
    { "type": "text", "id": "heading_text", "label": "Heading text", "default": "Hurry Up! Sale ends in:" },
    { "type": "text", "id": "days_label", "label": "Days label", "default": "days" },
    { "type": "text", "id": "hours_label", "label": "Hours label", "default": "hours" },
    { "type": "text", "id": "mins_label", "label": "Mins label", "default": "min" },
    { "type": "text", "id": "secs_label", "label": "Secs label", "default": "sec" },
    { "type": "text", "id": "ended_text", "label": "Ended text", "default": "Sale ended" },

    { "type": "header", "content": "Countdown Logic" },
    { "type": "text", "id": "end_iso", "label": "End date/time (ISO, e.g. 2025-12-31T23:59:59)", "default": "2025-12-31T23:59:59" },

    {
      "type": "select",
      "id": "on_end",
      "label": "When countdown ends",
      "default": "restart",
      "options": [
        { "value": "zeros", "label": "Display 00 : 00 : 00 : 00" },
        { "value": "ended", "label": "Show ended text" },
        { "value": "restart", "label": "Start the countdown again" }
      ]
    },
    { "type": "paragraph", "content": "If you choose Restart, set how long the next cycle should last." },
    { "type": "range", "id": "restart_days", "label": "Restart days", "min": 0, "max": 60, "step": 1, "default": 1 },
    { "type": "range", "id": "restart_hours", "label": "Restart hours", "min": 0, "max": 48, "step": 1, "default": 0 },
    { "type": "range", "id": "restart_minutes", "label": "Restart minutes", "min": 0, "max": 59, "step": 1, "default": 0 },
    { "type": "range", "id": "restart_seconds", "label": "Restart seconds", "min": 0, "max": 59, "step": 1, "default": 0 },

    { "type": "header", "content": "Typography & Colors" },
    { "type": "color", "id": "bg_color", "label": "Background", "default": "#FFF1F1" },
    { "type": "color", "id": "border_color", "label": "Border color", "default": "#F2B6B6" },
    { "type": "range", "id": "radius", "label": "Border radius", "min": 0, "max": 24, "step": 1, "default": 10 },

    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#111111" },
    { "type": "range", "id": "heading_size_d", "label": "Heading size (desktop)", "min": 12, "max": 30, "step": 1, "default": 18 },
    { "type": "range", "id": "heading_size_m", "label": "Heading size (mobile)", "min": 12, "max": 26, "step": 1, "default": 16 },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "Heading weight",
      "default": "700",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" },
        { "value": "800", "label": "800" }
      ]
    },

    { "type": "color", "id": "number_color", "label": "Numbers & separators color", "default": "#D23B3B" },
    { "type": "range", "id": "number_size_d", "label": "Number size (desktop)", "min": 12, "max": 30, "step": 1, "default": 18 },
    { "type": "range", "id": "number_size_m", "label": "Number size (mobile)", "min": 12, "max": 26, "step": 1, "default": 16 },
    {
      "type": "select",
      "id": "number_weight",
      "label": "Number weight",
      "default": "700",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" },
        { "value": "800", "label": "800" }
      ]
    },

    { "type": "color", "id": "label_color", "label": "Units label color", "default": "#7A1F1F" },
    {
      "type": "select",
      "id": "label_weight",
      "label": "Units label weight",
      "default": "500",
      "options": [
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" }
      ]
    },
    { "type": "range", "id": "item_gap", "label": "Gap between items", "min": 0, "max": 20, "step": 1, "default": 6 },

    { "type": "header", "content": "Inner Padding (Desktop)" },
    { "type": "range", "id": "pad_left_d", "label": "Left padding", "min": 0, "max": 80, "step": 1, "default": 16 },
    { "type": "range", "id": "pad_right_d", "label": "Right padding", "min": 0, "max": 80, "step": 1, "default": 16 },

    { "type": "header", "content": "Inner Padding (Mobile)" },
    { "type": "range", "id": "pad_left_m", "label": "Left padding", "min": 0, "max": 80, "step": 1, "default": 10 },
    { "type": "range", "id": "pad_right_m", "label": "Right padding", "min": 0, "max": 80, "step": 1, "default": 4 },

    { "type": "header", "content": "Section Spacing (Outside)" },
    { "type": "range", "id": "section_pt_d", "label": "Top margin (desktop)", "min": 0, "max": 100, "step": 1, "default": 15 },
    { "type": "range", "id": "section_pb_d", "label": "Bottom margin (desktop)", "min": 0, "max": 100, "step": 1, "default": 15 },
    { "type": "range", "id": "section_pt_m", "label": "Top margin (mobile)", "min": 0, "max": 100, "step": 1, "default": 15 },
    { "type": "range", "id": "section_pb_m", "label": "Bottom margin (mobile)", "min": 0, "max": 100, "step": 1, "default": 15 },

    { "type": "header", "content": "Layout" },
    { "type": "range", "id": "timer_width_d_px", "label": "Countdown width (Desktop, px)", "min": 200, "max": 1200, "step": 10, "default": 370 },
    { "type": "range", "id": "timer_width_m_px", "label": "Countdown width (Mobile, px)", "min": 160, "max": 600, "step": 10, "default": 320 }
      ]
    },
   {

  "type": "product_description",
  "name": "Product description",
  "limit": 1,
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_custom_description",
      "label": "Enable custom product description",
      "default": false
    },
    {
      "type": "richtext",
      "id": "custom_description",
      "label": "Custom description (per product)",
      "default": "<p>Write your custom description here…</p>",
      "info": "Shown only when the toggle above is ON. Otherwise the product’s own Description renders."
    },

    { "type": "header", "content": "Typography" },
    {
      "type": "range",
      "id": "font_size_d",
      "label": "Font size (desktop)",
      "min": 10, "max": 42, "step": 1, "default": 16, "unit": "px"
    },
    {
      "type": "range",
      "id": "font_size_m",
      "label": "Font size (mobile)",
      "min": 10, "max": 36, "step": 1, "default": 15, "unit": "px"
    },
    {
      "type": "range",
      "id": "line_height",
      "label": "Line height",
      "min": 110, "max": 240, "step": 5, "default": 150,
      "unit": "%",
      "info": "110%–240% (converted to 1.10–2.40 in CSS)"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#111111"
    },

    { "type": "header", "content": "Padding — Desktop" },
    { "type": "range", "id": "pt_d", "label": "Padding top (desktop)", "min": 0, "max": 160, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pb_d", "label": "Padding bottom (desktop)", "min": 0, "max": 160, "step": 2, "default": 20, "unit": "px" },
    { "type": "range", "id": "pl_d", "label": "Padding left (desktop)", "min": 0, "max": 300, "step": 10, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_d", "label": "Padding right (desktop)", "min": 0, "max": 300, "step": 10, "default": 0, "unit": "px" },

    { "type": "header", "content": "Padding — Mobile" },
    { "type": "range", "id": "pt_m", "label": "Padding top (mobile)", "min": 0, "max": 160, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pb_m", "label": "Padding bottom (mobile)", "min": 0, "max": 160, "step": 2, "default": 16, "unit": "px" },
    { "type": "range", "id": "pl_m", "label": "Padding left (mobile)", "min": 0, "max": 120, "step": 2, "default": 0, "unit": "px" },
    { "type": "range", "id": "pr_m", "label": "Padding right (mobile)", "min": 0, "max": 120, "step": 2, "default": 0, "unit": "px" }
  
  ]
},
{
   "type": "payment_badges",
  "name": "Payment Badges",
  "limit": 1,
  "settings": [
    { "type": "header", "content": "Texts Alignment" },
    {
      "type": "select",
      "id": "text_align",
      "label": "Text alignment (desktop)",
      "default": "left",
      "options": [
        { "value": "left",   "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right",  "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "text_align_m",
      "label": "Text alignment (mobile)",
      "default": "left",
      "options": [
        { "value": "left",   "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right",  "label": "Right" }
      ]
    },

    { "type": "header", "content": "Texts for Subheading & Main Heading inputs" },
    { "type": "text", "id": "h_main", "label": "Main heading text", "default": "Secure payment" },
    { "type": "color", "id": "h_main_color", "label": "Main heading text color", "default": "#2C2C2C" },
    { "type": "range", "id": "h_main_size", "label": "Main heading font size (px)", "min": 12, "max": 64, "step": 1, "default": 16 },
    { "type": "range", "id": "h_main_mt", "label": "Main heading top spacing (px)", "min": 0, "max": 80, "step": 1, "default": 0 },
    { "type": "range", "id": "h_main_mb", "label": "Main heading bottom spacing (px)", "min": 0, "max": 80, "step": 1, "default": 16 },

    { "type": "text", "id": "sub_text", "label": "Subheading text", "default": "Delivery Terms & Condition" },
    { "type": "url",  "id": "sub_url",  "label": "Subheading URL" },
    { "type": "checkbox", "id": "sub_newtab", "label": "Open Subheading link in new tab", "default": false },
    { "type": "color", "id": "sub_color", "label": "Subheading text color", "default": "#333333" },
    { "type": "color", "id": "sub_hover", "label": "Subheading text hover color", "default": "#111111" },
    { "type": "checkbox", "id": "sub_underline", "label": "Enable underline for Subheading", "default": false },
    { "type": "range", "id": "sub_uline_w", "label": "Subheading underline weight (px)", "min": 1, "max": 6, "step": 1, "default": 1 },

    { "type": "text", "id": "a11y_label", "label": "Accessibility label for the payment badges wrapper", "default": "Payment badges" },

    { "type": "header", "content": "Toggle Payment Icons" },
    { "type": "checkbox", "id": "toggle_icons", "label": "Toggle Payment Icons", "default": true },
    { "type": "checkbox", "id": "show_amex", "label": "Show American Express", "default": true },
    { "type": "checkbox", "id": "show_apple_pay", "label": "Show Apple Pay", "default": true },
    { "type": "checkbox", "id": "show_google_pay", "label": "Show Google Pay", "default": true },
  
    { "type": "checkbox", "id": "show_mastercard", "label": "Show Mastercard", "default": true },
    { "type": "checkbox", "id": "show_paypal", "label": "Show PayPal", "default": true },
    { "type": "checkbox", "id": "show_unionpay", "label": "Show Union Pay", "default": true },
    { "type": "checkbox", "id": "show_visa", "label": "Show Visa", "default": true },

    { "type": "header", "content": "Section Layout & Spacing" },
    { "type": "color", "id": "sec_bg", "label": "Background color for the overall section", "default": "#FFFFFF" },
    { "type": "range", "id": "sec_pt", "label": "Padding top (section)", "min": 0, "max": 160, "step": 2, "default": 22 },
    { "type": "range", "id": "sec_pb", "label": "Padding bottom (section)", "min": 0, "max": 160, "step": 2, "default": 22 },
    { "type": "range", "id": "sec_mt", "label": "Margin top (section)", "min": -120, "max": 200, "step": 10, "default": 0 },
    { "type": "range", "id": "sec_mb", "label": "Margin bottom (section)", "min": 0, "max": 200, "step": 2, "default": 0 },
    { "type": "range", "id": "sec_maxw", "label": "Max section width (rem)", "min": 50, "max": 160, "step": 2, "default": 100 },
    { "type": "range", "id": "sec_pl", "label": "Section left padding (px)", "min": 0, "max": 300, "step": 10, "default": 0 },
    { "type": "range", "id": "sec_pr", "label": "Section right padding (px)", "min": 0, "max": 300, "step": 10, "default": 0 },

    { "type": "range", "id": "sec_maxw_m", "label": "Max section width (rem) (Mobile Version)", "min": 50, "max": 200, "step": 2, "default": 120 },
    { "type": "range", "id": "sec_pl_m", "label": "Section left padding (px) (Mobile Version)", "min": 0, "max": 80, "step": 2, "default": 0 },
    { "type": "range", "id": "sec_pr_m", "label": "Section right padding (px) (Mobile Version)", "min": 0, "max": 80, "step": 2, "default": 0 },
    { "type": "range", "id": "sec_radius", "label": "Section Border Radius (px)", "min": 0, "max": 40, "step": 1, "default": 0 },

    { "type": "header", "content": "Payment Badges Layout Options" },
    {
      "type": "select",
      "id": "badges_align",
      "label": "Badges Alignment (legacy - auto-derived from text alignment)",
      "default": "auto",
      "options": [
        { "value": "auto", "label": "Auto (use text alignment)" }
      ],
      "info": "Alignment follows the text alignment you set above."
    },
    { "type": "range", "id": "badge_w", "label": "Badge Width (px)", "min": 20, "max": 100, "step": 1, "default": 38 },
    { "type": "range", "id": "badge_h", "label": "Badge Height (px)", "min": 14, "max": 60, "step": 1, "default": 24 },
    { "type": "range", "id": "badge_w_m", "label": "Badge Width (px) (Mobile Version)", "min": 20, "max": 100, "step": 1, "default": 34 },
    { "type": "range", "id": "badge_h_m", "label": "Badge Height (px) (Mobile Version)", "min": 14, "max": 60, "step": 1, "default": 22 }
  ]
},
{
  "type": "bundle_save",
"name": "Bundle & Save",
"limit": 1,
"settings": [
  { "type": "header", "content": "Important Info" },
  { "type": "paragraph", "content": "Remember: Bundle block doesn't discount by itself. Set up Shopify Automatic Discounts to apply savings when products are added." },

  { "type": "text",  "id": "heading", "label": "Heading", "default": "BUNDLE & SAVE" },
  { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#111111" },
  { "type": "range", "id": "heading_size_d", "label": "Heading Font Size (Desktop)", "min": 12, "max": 42, "step": 1, "default": 18 },
  { "type": "range", "id": "heading_size_m", "label": "Heading Font Size (Mobile)",  "min": 12, "max": 36, "step": 1, "default": 18 },
  { "type": "range", "id": "heading_weight", "label": "Heading Font Weight", "min": 100, "max": 900, "step": 100, "default": 600 },
  {
    "type": "select",
    "id": "heading_align",
    "label": "Heading Alignment",
    "options": [
      { "value": "left", "label": "Left" },
      { "value": "center", "label": "Center" },
      { "value": "right", "label": "Right" }
    ],
    "default": "left"
  },

  { "type": "color", "id": "accent",  "label": "Accent color", "default": "#000" },

  { "type": "header", "content": "Enable tiers" },
  { "type": "checkbox", "id": "enable_tier_1", "label": "Enable Tier 1", "default": true  },
  { "type": "checkbox", "id": "enable_tier_2", "label": "Enable Tier 2", "default": true  },
  { "type": "checkbox", "id": "enable_tier_3", "label": "Enable Tier 3", "default": true },
  { "type": "checkbox", "id": "enable_tier_4", "label": "Enable Tier 4", "default": false  },

  { "type": "header", "content": "Tier 1" },
  { "type": "text", "id": "t1_label", "label": "Label", "default": "Buy 1" },
  { "type": "range", "id": "t1_qty", "label": "Quantity", "min": 1, "max": 10, "step": 1, "default": 1 },
  { "type": "range", "id": "t1_discount_percent", "label": "Discount %", "min": 0, "max": 80, "step": 1, "default": 0 },
  { "type": "checkbox", "id": "t1_free_shipping", "label": "Show Free Shipping", "default": false },
  { "type": "checkbox", "id": "t1_popular", "label": "Most Popular ribbon", "default": false },

  { "type": "header", "content": "Tier 2" },
  { "type": "text", "id": "t2_label", "label": "Label", "default": "Buy 2" },
  { "type": "range", "id": "t2_qty", "label": "Quantity", "min": 1, "max": 10, "step": 1, "default": 2 },
  { "type": "range", "id": "t2_discount_percent", "label": "Discount %", "min": 0, "max": 80, "step": 1, "default": 15 },
  { "type": "checkbox", "id": "t2_free_shipping", "label": "Show Free Shipping", "default": true },
  { "type": "checkbox", "id": "t2_popular", "label": "Most Popular ribbon", "default": true },

  { "type": "header", "content": "Tier 3" },
  { "type": "text", "id": "t3_label", "label": "Label", "default": "Buy 3" },
  { "type": "range", "id": "t3_qty", "label": "Quantity", "min": 1, "max": 10, "step": 1, "default": 3 },
  { "type": "range", "id": "t3_discount_percent", "label": "Discount %", "min": 0, "max": 80, "step": 1, "default": 20 },
  { "type": "checkbox", "id": "t3_free_shipping", "label": "Show Free Shipping", "default": true },
  { "type": "checkbox", "id": "t3_popular", "label": "Most Popular ribbon", "default": false },

  { "type": "header", "content": "Tier 4" },
  { "type": "text", "id": "t4_label", "label": "Label", "default": "Buy 4" },
  { "type": "range", "id": "t4_qty", "label": "Quantity", "min": 1, "max": 10, "step": 1, "default": 4 },
  { "type": "range", "id": "t4_discount_percent", "label": "Discount %", "min": 0, "max": 80, "step": 1, "default": 24 },
  { "type": "checkbox", "id": "t4_free_shipping", "label": "Show Free Shipping", "default": true },
  { "type": "checkbox", "id": "t4_popular", "label": "Most Popular ribbon", "default": false },

  { "type": "header", "content": "Typography Weights" },
  { "type": "range", "id": "price_weight", "label": "Price Font Weight", "min": 100, "max": 900, "step": 100, "default": 600 },
  { "type": "range", "id": "label_weight", "label": "Tier Label Font Weight", "min": 100, "max": 900, "step": 100, "default": 700 },
  { "type": "range", "id": "idx_weight", "label": "Index (#1, #2, ...) Font Weight", "min": 100, "max": 900, "step": 100, "default": 700 },

  { "type": "header", "content": "Sizing (Desktop & Mobile)" },
  { "type": "range", "id": "price_size_d", "label": "Price Font Size (Desktop)", "min": 12, "max": 36, "step": 1, "default": 18 },
  { "type": "range", "id": "price_size_m", "label": "Price Font Size (Mobile)",  "min": 12, "max": 32, "step": 1, "default": 16 },
  { "type": "range", "id": "unit_size_d",  "label": "Under-Price Text Size (Desktop)", "min": 10, "max": 26, "step": 1, "default": 14 },
  { "type": "range", "id": "unit_size_m",  "label": "Under-Price Text Size (Mobile)",  "min": 10, "max": 24, "step": 1, "default": 13 },

  { "type": "header", "content": "Colors & Active State" },
  { "type": "color", "id": "selected_border_color", "label": "Selected Tier Border Color", "default": "#E93B3B" },
  { "type": "color", "id": "selected_dot_color",    "label": "Selected Radio Dot Color", "default": "#E93B3B" },
  { "type": "color", "id": "dot_ring_color",         "label": "Radio White Ring Color",  "default": "#FFFFFF" },
  { "type": "color", "id": "ribbon_bg",   "label": "Ribbon Background", "default": "#E93B3B" },
  { "type": "color", "id": "ribbon_text", "label": "Ribbon Text",       "default": "#FFFFFF" },
  { "type": "color", "id": "unit_text_color", "label": "Under-Price Text Color", "default": "#666666" },

  { "type": "header", "content": "Layout (Desktop)" },
  { "type": "range", "id": "maxw_d", "label": "Section Max Width (Desktop px)", "min": 600, "max": 1600, "step": 20, "default": 800 },
  { "type": "range", "id": "pl_d",   "label": "Left Padding (Desktop px)", "min": 0, "max": 300, "step": 5, "default": 0 },
  { "type": "range", "id": "pr_d",   "label": "Right Padding (Desktop px)", "min": 0, "max": 300, "step": 5, "default": 55 },
  { "type": "range", "id": "pt_d",   "label": "Top Padding (Desktop px)", "min": 0, "max": 160, "step": 4, "default": 24 },
  { "type": "range", "id": "pb_d",   "label": "Bottom Padding (Desktop px)", "min": 0, "max": 160, "step": 4, "default": 24 },

  { "type": "header", "content": "Layout (Mobile)" },
  { "type": "range", "id": "pl_m", "label": "Left Padding (Mobile px)",   "min": 0, "max": 60, "step": 2, "default": 0 },
  { "type": "range", "id": "pr_m", "label": "Right Padding (Mobile px)",  "min": 0, "max": 60, "step": 2, "default": 0 },
  { "type": "range", "id": "pt_m", "label": "Top Padding (Mobile px)",    "min": 0, "max": 120, "step": 2, "default": 24 },
  { "type": "range", "id": "pb_m", "label": "Bottom Padding (Mobile px)", "min": 0, "max": 120, "step": 2, "default": 24 },

  { "type": "header", "content": "Section Scale & Spacing" },
  { "type": "range", "id": "scale_d", "label": "Overall Section Size Scale (Desktop)", "min": 0.8, "max": 1.3, "step": 0.1, "default": 1.00 },
  { "type": "range", "id": "scale_m", "label": "Overall Section Size Scale (Mobile)",  "min": 0.8, "max": 1.3, "step": 0.1, "default": 1.00 },
  { "type": "range", "id": "gap_heading_tiers", "label": "Vertical Gap: Heading ↔ Tiers (px)", "min": 0, "max": 60, "step": 2, "default": 12 },

  { "type": "header", "content": "Animations" },
  { "type": "checkbox", "id": "enable_animations", "label": "Enable Smooth Subtle Interactive Animations (no zoom)", "default": true }
  ]
},
{


  "type": "horizontal_benefits",
  "name": "Horizontal Benefits",
  "limit": 6,
  "settings": [
    { "type": "header", "content": "Layout" },
    {
      "type": "select",
      "id": "hb_template",
      "label": "Choose Template",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "Standard" },
        { "value": "boxed",    "label": "Boxed" }
      ]
    },
    {
      "type": "select",
      "id": "hb_shadow",
      "label": "Boxed Shadow Level",
      "default": "medium",
      "options": [
        { "value": "low", "label": "Low" },
        { "value": "medium", "label": "Medium" },
        { "value": "hard", "label": "Hard" }
      ]
    },

    { "type": "header", "content": "Mobile Layout" },
    {
      "type": "checkbox",
      "id": "hb_vertical_on_mobile",
      "label": "Enable vertical on mobile",
      "default": false
    },

    { "type": "header", "content": "Colors" },
    { "type": "color", "id": "hb_icon_color", "label": "Icon Color", "default": "#1A1A1A" },
    { "type": "color", "id": "hb_bg", "label": "Background Color", "default": "#FFFFFF" },
    { "type": "color", "id": "hb_item_bg", "label": "Item Background Color (Boxed)", "default": "#FFFFFF" },
    { "type": "color", "id": "hb_title_color", "label": "Title Color", "default": "#111111" },
    { "type": "color", "id": "hb_sub_color", "label": "Subtitle Color", "default": "#777777" },

    { "type": "header", "content": "Sizes" },
    { "type": "range", "id": "hb_icon_size_d", "label": "Icon Size (Desktop) (also for Custom SVG)", "min": 12, "max": 96, "step": 1, "default": 26 },
    { "type": "range", "id": "hb_icon_size_m", "label": "Icon Size (Mobile) (also for Custom SVG)",  "min": 12, "max": 96, "step": 1, "default": 24 },

    { "type": "range", "id": "hb_title_size_d", "label": "Title Font Size (Desktop)", "min": 12, "max": 28, "step": 1, "default": 16 },
    { "type": "range", "id": "hb_title_size_m", "label": "Title Font Size (Mobile)",  "min": 12, "max": 26, "step": 1, "default": 15 },

    { "type": "range", "id": "hb_sub_size_d", "label": "Subtitle Font Size (Desktop)", "min": 10, "max": 22, "step": 1, "default": 13 },
    { "type": "range", "id": "hb_sub_size_m", "label": "Subtitle Font Size (Mobile)",  "min": 10, "max": 20, "step": 1, "default": 12 },

    { "type": "header", "content": "Spacing" },
    { "type": "range", "id": "hb_items_gap_d", "label": "Spacing Between Items (Desktop)", "min": 0, "max": 60, "step": 1, "default": 28 },
    { "type": "range", "id": "hb_items_gap_m", "label": "Spacing Between Items (Mobile)",  "min": 0, "max": 60, "step": 1, "default": 18 },

    { "type": "header", "content": "Media → Title Gap" },
    {
      "type": "range",
      "id": "hb_gap_media_title_d",
      "label": "Gap: Icon → Title (Desktop)",
      "min": 0,
      "max": 40,
      "step": 1,
      "default": 10
    },
    {
      "type": "range",
      "id": "hb_gap_media_title_m",
      "label": "Gap: Icon → Title (Mobile)",
      "min": 0,
      "max": 40,
      "step": 1,
      "default": 8
    },

    { "type": "header", "content": "Title ↕ Subtitle Gap" },
    { "type": "range", "id": "hb_vgap_title_sub_d", "label": "Vertical Gap between Title and Subtitle (Desktop)", "min": 0, "max": 24, "step": 1, "default": 6 },
    { "type": "range", "id": "hb_vgap_title_sub_m", "label": "Vertical Gap between Title and Subtitle (Mobile)",  "min": 0, "max": 24, "step": 1, "default": 4 },

    { "type": "header", "content": "Title & Subtitle Padding (L/R)" },
    { "type": "range", "id": "hb_title_pl", "label": "Title Left Padding (px)",  "min": 0, "max": 60, "step": 1, "default": 0 },
    { "type": "range", "id": "hb_title_pr", "label": "Title Right Padding (px)", "min": 0, "max": 60, "step": 1, "default": 0 },
    { "type": "range", "id": "hb_sub_pl",   "label": "Subtitle Left Padding (px)",  "min": 0, "max": 60, "step": 1, "default": 0 },
    { "type": "range", "id": "hb_sub_pr",   "label": "Subtitle Right Padding (px)", "min": 0, "max": 60, "step": 1, "default": 0 },

    { "type": "header", "content": "Padding & Margin" },
    { "type": "range", "id": "hb_pt", "label": "Padding Top", "min": 0, "max": 120, "step": 4, "default": 16 },
    { "type": "range", "id": "hb_pb", "label": "Padding Bottom", "min": 0, "max": 120, "step": 4, "default": 16 },
    { "type": "range", "id": "hb_mt", "label": "Margin Top", "min": 0, "max": 120, "step": 4, "default": 0 },
    { "type": "range", "id": "hb_mb", "label": "Margin Bottom", "min": 0, "max": 120, "step": 4, "default": 0 },
    { "type": "range", "id": "hb_radius", "label": "Boxed Corner Radius", "min": 0, "max": 28, "step": 1, "default": 14 },

    { "type": "header", "content": "Image & Item Sizing" },
    { "type": "range", "id": "hb_item_width_d", "label": "Item Block Width (Desktop)", "min": 20, "max": 100, "step": 1, "default": 33, "unit": "%" },
    { "type": "range", "id": "hb_item_width_m", "label": "Item Block Width (Mobile)",  "min": 50, "max": 100, "step": 1, "default": 100, "unit": "%" },

    { "type": "header", "content": "Benefit #1 (Defaults Added)" },
    { "type": "text", "id": "item1_title", "label": "Title", "default": "Free Shipping" },
    { "type": "text", "id": "item1_subtitle", "label": "Subtitle", "default": "Expected delivery between 2–3 days" },
    { "type": "textarea", "id": "item1_svg", "label": "SVG Icon Code" },
    { "type": "checkbox", "id": "item1_use_image", "label": "Enable Image (instead of SVG)", "default": false },
    { "type": "image_picker", "id": "item1_image", "label": "Image" },
    { "type": "color", "id": "item1_icon_color", "label": "Icon Color (override)" },

    { "type": "header", "content": "Benefit #2" },
    { "type": "text", "id": "item2_title", "label": "Title", "default": "30 Days Return" },
    { "type": "text", "id": "item2_subtitle", "label": "Subtitle", "default": "Return label included for easy returns" },
    { "type": "textarea", "id": "item2_svg", "label": "SVG Icon Code" },
    { "type": "checkbox", "id": "item2_use_image", "label": "Enable Image (instead of SVG)", "default": false },
    { "type": "image_picker", "id": "item2_image", "label": "Image" },
    { "type": "color", "id": "item2_icon_color", "label": "Icon Color (override)" },

    { "type": "header", "content": "Benefit #3" },
    { "type": "text", "id": "item3_title", "label": "Title", "default": "Secure Payment" },
    { "type": "text", "id": "item3_subtitle", "label": "Subtitle", "default": "Powered by Shopify and Stripe" },
    { "type": "textarea", "id": "item3_svg", "label": "SVG Icon Code" },
    { "type": "checkbox", "id": "item3_use_image", "label": "Enable Image (instead of SVG)", "default": false },
    { "type": "image_picker", "id": "item3_image", "label": "Image" },
    { "type": "color", "id": "item3_icon_color", "label": "Icon Color (override)" }
  ]
},
{


  "type": "vertical_benefits",
    "name": "Vertical Benefits",
    "limit": 6,
    "settings": [
      { "type": "header", "content": "Section Colors" },
      { "type": "color", "id": "vb_bg", "label": "Background color for the benefits section", "default": "#FFFFFF" },
      { "type": "color", "id": "vb_icon_color", "label": "Color of the SVG icons", "default": "#2A2A2A" },
      { "type": "color", "id": "vb_text_color", "label": "Benefit Text Color", "default": "#242424" },

      { "type": "header", "content": "Icon Settings" },
      { "type": "range", "id": "vb_icon_size", "label": "Icon Size (px)", "min": 0, "max": 120, "step": 5, "default": 40 },
      { "type": "range", "id": "vb_icon_size_m", "label": "Icon Size on Mobile (px)", "min": 12, "max": 100, "step": 1, "default": 44 },
      { "type": "range", "id": "vb_icon_gap", "label": "Space between Icon and Text (px)", "min": 0, "max": 40, "step": 1, "default": 8 },
      { "type": "range", "id": "vb_icon_gap_m", "label": "Space between Icon and Text on Mobile (px)", "min": 0, "max": 40, "step": 1, "default": 6 },

      { "type": "header", "content": "Text Settings" },
      { "type": "range", "id": "vb_text_size_d", "label": "Benefit Text Font Size (Desktop)", "min": 10, "max": 32, "step": 1, "default": 16 },
      { "type": "range", "id": "vb_text_size_m", "label": "Benefit Text Font Size (Mobile)", "min": 10, "max": 28, "step": 1, "default": 14 },

      { "type": "header", "content": "Spacing Settings" },
      { "type": "range", "id": "vb_pt", "label": "Padding top (section)", "min": 0, "max": 120, "step": 10, "default": 30 },
      { "type": "range", "id": "vb_pb", "label": "Padding bottom (section)", "min": 0, "max": 120, "step": 10, "default": 30 },
      { "type": "range", "id": "vb_mt", "label": "Margin top (section)", "min": 0, "max": 120, "step": 10, "default": 0 },
      { "type": "range", "id": "vb_mb", "label": "Margin bottom (section)", "min": 0, "max": 120, "step": 10, "default": 0 },
      { "type": "range", "id": "vb_item_space", "label": "Space between benefit blocks (px)", "min": 0, "max": 40, "step": 1, "default": 6 },

      { "type": "header", "content": "Width and Padding Settings" },
      { "type": "range", "id": "vb_maxw", "label": "Max section width (rem)", "min": 0, "max": 140, "step": 10, "default": 100 },
      { "type": "range", "id": "vb_pl", "label": "Section left padding (px)", "min": 0, "max": 300, "step": 10, "default": 0 },
      { "type": "range", "id": "vb_pr", "label": "Section right padding (px)", "min": 0, "max": 300, "step": 10, "default": 0 },

      { "type": "header", "content": "Benefit #1" },
      { "type": "text", "id": "item1_title", "label": "Benefit Title Text", "default": "100% Organic" },
      { "type": "textarea", "id": "item1_svg", "label": "SVG Icon Code" },
      { "type": "checkbox", "id": "item1_use_image", "label": "Enable Image Instead Of Svg", "default": false },
      { "type": "image_picker", "id": "item1_image", "label": "Icon Image" },
      { "type": "range", "id": "item1_image_size", "label": "Icon Image Size (px)", "min": 10, "max": 160, "step": 10, "default": 50 },

      { "type": "header", "content": "Benefit #2" },
      { "type": "text", "id": "item2_title", "label": "Benefit Title Text", "default": "Better Breathability" },
      { "type": "textarea", "id": "item2_svg", "label": "SVG Icon Code" },
      { "type": "checkbox", "id": "item2_use_image", "label": "Enable Image Instead Of Svg", "default": false },
      { "type": "image_picker", "id": "item2_image", "label": "Icon Image" },
      { "type": "range", "id": "item2_image_size", "label": "Icon Image Size (px)", "min": 10, "max": 160, "step": 10, "default": 50 },

      { "type": "header", "content": "Benefit #3" },
      { "type": "text", "id": "item3_title", "label": "Benefit Title Text", "default": "Hassle-Free Returns" },
      { "type": "textarea", "id": "item3_svg", "label": "SVG Icon Code" },
      { "type": "checkbox", "id": "item3_use_image", "label": "Enable Image Instead Of Svg", "default": false },
      { "type": "image_picker", "id": "item3_image", "label": "Icon Image" },
      { "type": "range", "id": "item3_image_size", "label": "Icon Image Size (px)", "min": 15, "max": 160, "step": 5, "default": 45 }
    ]
  },

  { "type": "price", "name": "t:sections.main-product.blocks.price.name", "limit": 1 },

  {
    "type": "buy_buttons",
      "name": "t:sections.main-product.blocks.buy_buttons.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_dynamic_checkout.label",
          "info": "t:sections.main-product.blocks.buy_buttons.settings.show_dynamic_checkout.info"
        },
        {
          "type": "checkbox",
          "id": "show_wishlist",
          "default": false,
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_wishlist"
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "default": true,
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_gift_card_recipient.label",
          "info": "t:sections.main-product.blocks.buy_buttons.settings.show_gift_card_recipient.info"
        }
      ]
    },
    {
      "type": "live_view",
      "name": "Live People View",
      "limit": 1,
      "settings": [
        {
          "type": "textarea",
          "id": "content",
          "label": "Text Displaying",
          "default": "[count] people are viewing this product",
          "info": "E.g., '19 customers are viewing this product!', '8 people are deciding on this right now!', 'Don't wait—10 others are looking at this!'"
        },
        {
          "type": "color",
          "id": "live_view_text_color",
          "label": "Live View Text Color",
          "default": "#000000",
          "info": "Set the text color for the live view message."
        },
        {
          "type": "range",
          "id": "max_number",
          "label": "Maximum Number",
          "default": 3,
          "min": 0,
          "max": 100,
          "step": 1,
          "info": "Set the maximum number of people displayed in the live view message."
        },
        {
          "type": "range",
          "id": "min_number",
          "label": "Minimum Number",
          "default": 0,
          "min": 0,
          "max": 30,
          "step": 1,
          "info": "Set the minimum number of people displayed in the live view message."
        },
        {
          "type": "range",
          "id": "interval_time",
          "label": "Update Every Seconds",
          "default": 20,
          "min": 0,
          "max": 100,
          "step": 1,
          "info": "Set how often (in seconds) the live view count updates."
        }
      ]
    },
    {
      "type": "variant_picker",
      "name": "Variant Picker / Size",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "variant_type",
          "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.label",
          "options": [
            {
              "value": "swatches",
              "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.options__2.label"
            },
            {
              "value": "dropdown",
              "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.options__1.label"
            }
          ],
          "default": "swatches",
          "info": "Choose the type of variant picker (swatches or dropdown)."
        },
        {
          "type": "header",
          "content": "Size Guide",
          "info": "Configure the size guide settings."
        },
        {
          "type": "checkbox",
          "id": "show_size_guide",
          "label": "t:sections.main-product.blocks.variant_picker.settings.size_guide.settings.show_size_guide",
          "default": false,
          "info": "Enable or disable the size guide link."
        },
        {
          "type": "text",
          "id": "size_guide_label",
          "label": "t:sections.main-product.blocks.variant_picker.settings.size_guide.settings.size_guide_label",
          "default": "Size guide",
          "info": "Set the label text for the size guide link."
        },
        {
          "type": "page",
          "id": "size_guide_page",
          "label": "t:sections.main-product.blocks.variant_picker.settings.size_guide.settings.size_guide_page",
          "info": "Select the page that contains the size guide information."
        },
        {
          "type": "header",
          "content": "Custom Size Guide",
          "info": "Provide additional information for a custom size guide."
        }
      ]
    },
    {

        "type": "modern_collapsible_row",
  "name": "Modern Collapsible Row",
  "limit": 10,
  "settings": [
    { "type": "text", "id": "heading", "label": "Modern Collapsible Heading", "default": "Materials" },
    { "type": "richtext", "id": "content", "label": "Modern Collapsible Content" },
    { "type": "checkbox", "id": "use_product_description", "label": "Use Product Description", "default": false },

    { "type": "header", "content": "Left Icon" },
    { "type": "checkbox", "id": "enable_left_icon", "label": "Enable icon on the left", "default": false },
    {
      "type": "select",
      "id": "icon_preset",
      "label": "Icon preset",
      "default": "materials",
      "options": [
        { "value": "materials",  "label": "Materials" },
        { "value": "shipping",   "label": "Shipping" },
        { "value": "returns",    "label": "Returns" },
        { "value": "heart",      "label": "Heart / Care" },
        { "value": "dimensions", "label": "Dimensions / Size" },
        { "value": "warranty",   "label": "Warranty / Shield" },
        { "value": "care",       "label": "Care / Sparkle" },
        { "value": "info",       "label": "Info" },
        { "value": "package",    "label": "Package / Box" }
      ]
    },
    { "type": "range", "id": "icon_size", "label": "Icon size", "min": 12, "max": 64, "step": 1, "default": 20, "unit": "px" },
    { "type": "range", "id": "icon_gap",  "label": "Gap between icon and text", "min": 0, "max": 32, "step": 1, "default": 10, "unit": "px" },
    { "type": "color", "id": "icon_color", "label": "Icon color", "default": "#222222" },

    { "type": "header", "content": "Custom SVG (optional)" },
    {
      "type": "text",
      "id": "icon_svg_custom",
      "label": "Paste inline SVG (overrides preset when filled)",
      "info": "Example: <svg viewBox='0 0 24 24' fill='none' ...>...</svg>. You can find SVG Icons here : https://www.svgrepo.com/"
        }
      ]
    },
    {
      "type": "product_addons",
      "name": "Questions / Share ",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_ask_question",
          "default": true,
          "label": "Enable have a question feature",
          "info": "Enable or disable the 'Ask a Question' feature."
        },
        {
          "type": "url",
          "id": "ask_question_url",
          "label": "Ask Question URL",
          "default": "/",
          "info": "Set the URL for the 'Ask a Question' page."
        },
        {
          "type": "color",
          "id": "ask_question_text_color",
          "label": "Question Text Color & Icon",
          "default": "#1C274C",
          "info": "Set the text and icon color for the 'Ask a Question' feature."
        },
        {
          "type": "checkbox",
          "id": "show_share",
          "default": true,
          "label": "Enable Share Feature",
          "info": "Enable or disable the share buttons."
        },
        {
          "type": "range",
          "id": "gap_control",
          "label": "Control Gap Between Addons (px)",
          "default": 10,
          "min": 0,
          "max": 50,
          "step": 1,
          "info": "Adjust the spacing between addon elements."
        },
        {
          "type": "color",
          "id": "share_color",
          "label": "Share Text Color & Icon",
          "default": "#333333",
          "info": "Set the text and icon color for the share buttons."
        }
      ]
    },
    {
    
      "type": "model_size",
      "name": "t:sections.main-product.blocks.model_size.name",
      "limit": 1,
      "settings": []
    },
    {
      "type": "pickup_avaiability",
      "name": "t:sections.main-product.blocks.pickup_avaiability.name",
      "limit": 1,
      "settings": []
    },
    {
      "type": "product_custom_field",
      "name": "Upload Image Field / Note",
      "limit": 1,
      "settings": [
        {
          "type": "inline_richtext",
          "id": "description",
          "label": "Custom Text Note",
          "default": "Add a personal touch to your product by sharing your idea. You can write a note or upload an image to customize it your way.",
          "info": "Provide a description or instructions for the personalization options."
        },
        {
          "type": "header",
          "content": "Text Field Settings",
          "info": "Configure the text field for personalization."
        },
        {
          "type": "checkbox",
          "id": "enable_field_text",
          "label": "Enable Text Input",
          "default": true,
          "info": "Enable or disable the text input field for personalization."
        },
        {
          "type": "text",
          "id": "field_label",
          "label": "Text Input label",
          "default": "Your message...",
          "info": "Set the label for the text input field."
        },
        {
          "type": "header",
          "content": "Image Field Settings",
          "info": "Configure the image upload field for personalization."
        },
        {
          "type": "checkbox",
          "id": "enable_field_image",
          "label": "Enable Image Upload",
          "default": true,
          "info": "Enable or disable the image upload field for personalization."
        }
      ]
    },
    {
      "type": "product_grouped",
      "name": "t:sections.main-product.blocks.product_grouped.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.main-product.blocks.product_grouped.settings.heading",
          "info": "Set the heading for the grouped products section."
        }
      ]
    },
    {
      "type": "more_colors",
      "name": "t:sections.main-product.blocks.more_colors.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.main-product.blocks.more_colors.settings.heading",
          "info": "Set the heading for the more colors section."
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 40,
          "max": 100,
          "step": 5,
          "default": 40,
          "label": "t:sections.main-product.blocks.more_colors.settings.image_width",
          "info": "Set the width of the color images in the more colors section."
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "t:sections.main-product.blocks.custom_liquid.name",
      "limit": 50,
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "t:sections.main-product.blocks.custom_liquid.settings.custom_liquid.label",
          "info": "Insert custom Liquid code to add additional functionality or content."
        }
      ]
    },
    {
      
      "type": "product_meta",
      "name": "t:sections.main-product.blocks.product_meta.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_barcode",
          "label": "t:sections.main-product.blocks.product_meta.settings.show_barcode",
          "info": "t:sections.main-product.blocks.product_meta.settings.barcode_info",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_sku",
          "label": "t:sections.main-product.blocks.product_meta.settings.show_sku",
          "default": true,
          "info": "Show or hide the SKU (Stock Keeping Unit) information."
        },
        {
          "type": "checkbox",
          "id": "show_available",
          "label": "t:sections.main-product.blocks.product_meta.settings.show_available",
          "default": true,
          "info": "Display the availability status of the product."
        },
        {
          "type": "checkbox",
          "id": "show_tags",
          "label": "t:sections.main-product.blocks.product_meta.settings.show_tags",
          "default": true,
          "info": "Show or hide product tags."
        },
        {
          "type": "checkbox",
          "id": "show_type",
          "label": "t:sections.main-product.blocks.product_meta.settings.show_type",
          "default": true,
          "info": "Display the product type information."
        },
        {
          "type": "checkbox",
          "id": "show_collections",
          "label": "t:sections.main-product.blocks.product_meta.settings.show_collections",
          "default": true,
          "info": "Show or hide the collections the product belongs to."
        }
      ]
    }
  ]
}
{% endschema %}

<style>
:root {
  --variant-text-color-unselected: {{ section.settings.variant_text_color_unselected }} !important;
  --variant-bg-color-unselected: {{ section.settings.variant_background_color_unselected }} !important;
  --variant-border-color-unselected: {{ section.settings.variant_border_color_unselected }} !important;
  --variant-text-color-unchecked: {{ section.settings.variant_text_color_unchecked }};
  --variant-border-radius-checked: {{ section.settings.variant_border_radius_checked }}px;
  --color-swatch-border-radius: {{ section.settings.color_swatch_border_radius }}px;
  --quantity-selector-bg: {{ section.settings.quantity_selector_background_color }};
  --custom-border-color: {{ section.settings.border_color_customizer }};
  --add-to-cart-bg-color: {{ section.settings.add_to_cart_background_color | default: '#000000' }};
  --variant-border-color-unchecked: {{ section.settings.variant_border_color_unchecked }};
  --add-to-cart-hover-bg-color: {{ section.settings.add_to_cart_hover_background_color | default: '#202020' }};
  --add-to-cart-text-color: {{ section.settings.add_to_cart_text_color | default: '#FFFFFF' }};
  --add-to-cart-hover-text-color: {{ section.settings.add_to_cart_hover_text_color | default: '#F1F1F1' }};
  --add-to-cart-border-color: {{ section.settings.add_to_cart_border_color | default: '#000000' }};
  --add-to-cart-border-radius: {{ section.settings.add_to_cart_border_radius | default: 10 }}px;
  --sticky-select-bg-color: {{ section.settings.sticky_select_background_color | default: '#000000' }};
  --sticky-select-text-color: {{ section.settings.sticky_select_text_color | default: '#FFFFFF' }};
  --sticky-select-border-color: {{ section.settings.sticky_select_border_color | default: '#303030' }};
  --quantity-selector-plus-minus-color: {{ section.settings.quantity_selector_plus_minus_color }};
  --quantity-selector-border-radius: {{ section.settings.quantity_selector_border_radius }}px;
  --compare-price-color: {{ section.settings.compare_price_color | default: '#000000' }};
  --sticky-add-cart-bg-color: {{ section.settings.sticky_add_cart_background_color | default: '#000000' }};
  --enable-sticky-gradient: {{ section.settings.enable_sticky_add_cart_gradient }};
  --gradient-color-1: {{ section.settings.gradient_color_1 | default: '#FF0000' }};
  --gradient-color-2: {{ section.settings.gradient_color_2 | default: '#00FF00' }};
  --gradient-color-3: {{ section.settings.gradient_color_3 | default: '#0000FF' }};
  --gradient-degrees: {{ section.settings.gradient_degrees | default: '90deg' }};
  --custom-image-upload-icon-color: {{ section.settings.custom_image_upload_icon_color | default: '#000000' }};
  --sticky-variant-selector-border-radius: {{ section.settings.sticky_variant_selector_border_radius | default: 5 }}px;
  --zoom-icon-bg-color: {{ section.settings.zoom_icon_background_color | default: '#FFFFFF' }};
  --zoom-icon-border-color: {{ section.settings.zoom_icon_border_color | default: '#EBEBEB' }};
  --zoom-icon-border-radius: {{ section.settings.zoom_icon_border_radius | default: 50 }}px;
  --variant-border-radius-unchecked: {{ section.settings.variant_border_radius_unchecked }}px;
  --variant-bg-color-unchecked: {{ section.settings.variant_background_color_unchecked }};
  --normal-swatch-border-color: {{ section.settings.normal_swatch_border_color }};
  --compare-price-color: {{ section.settings.compare_price_color }};
  --color-swatch-hover-clicked-border: {{ section.settings.color_swatch_hover_clicked_border }};
  --upload-file-button-bg-color: {{ section.settings.upload_file_button_bg_color | default: '#f8f8f8' }};
  --upload-input-border-color: {{ section.settings.upload_input_border_color | default: '#D8D8D8' }};
  --upload-input-background-color: {{ section.settings.upload_input_background_color | default: '#FFFFFF' }};
  --upload-input-text-color: {{ section.settings.upload_input_text_color | default: '#000000' }};
}

  @media (min-width: 1024px) {
    #MainProduct-{{ section.id }} {
    padding-left: var(--padding-left-desktop);
    padding-right: var(--padding-right-desktop);

    

 }
}
  
    .mb-25 {

           margin-bottom: 0.7rem !important;
      

  }

@media (max-width: 768px) {
   .sticky-add-to-cart-bar button {
        transform: scale(0.8) !important;
    }
}
 @media (max-width: 768px){
  /* support both custom element and class */
  sticky-add-cart .sticky__item-info,
  .sticky-add-cart .sticky__item-info{
    display:grid !important;
    grid-template-columns: minmax(200px,1fr) minmax(150px,auto);
    align-items:center;
    gap:12px;
    width:100%;
  }

  /* left column = variant picker */
  sticky-add-cart .product-detail__variant-picker,
  .sticky-add-cart .product-detail__variant-picker{
    order:0;
    width:100%;
    min-width:0;             /* allows ellipsis */
  }

  /* make the select fill its column and truncate nicely */
  sticky-add-cart .product-detail__variant-picker .product-form__input,
  sticky-add-cart .product-detail__variant-picker .select,
  sticky-add-cart .product-detail__variant-picker select{
    width:100% !important;
    max-width:none !important;       /* remove old 40% cap */
    margin:0;
    border-radius:9999px !important; /* pill */
    padding:12px 14px !important;
    min-height:48px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  /* right column = buy button */
  sticky-add-cart .product-detail__buy-buttons,
  .sticky-add-cart .product-detail__buy-buttons{
    order:0;
    width:100%;
  }
  sticky-add-cart .product-detail__buy-buttons .btn,
  sticky-add-cart .product-detail__buy-buttons button{
    width:100%;
    max-width:none;
    margin:0;
    min-height:48px;
    border-radius:9999px !important;
    white-space:nowrap;               /* keeps “Add to Cart” on one line */
  }

  /* ensure nothing else in the sticky bar is forcing a wrap */
  sticky-add-cart .price,
  .sticky-add-cart .price{
    display:none; /* optional: hide price if it squeezes the row */
  }
}

/* Tiny phones: if it still wraps, make the button a touch narrower */
@media (max-width: 360px){
  sticky-add-cart .sticky__item-info,
  .sticky-add-cart .sticky__item-info{
    grid-template-columns: minmax(180px,1fr) minmax(130px,auto);
    gap:10px;
  }
}

   
@media (max-width: 768px) {
  .hidden-mobile {
    display: none !important;
  }
}

  
  @media (max-width: 768px) {
 .section {

  width: 100% !important;
  max-width: 100vw !important;
  box-sizing: border-box;
  overflow-x: hidden; /* Prevents horizontal scrolling */
  
  }
}
  


.product-form__input input[type="radio"]:not(:checked) + label:not(.product__color-swatch) {
  background-color: var(--variant-bg-color-unchecked) !important;
  color: var(--variant-text-color-unchecked) !important;
  border: 1px solid var(--variant-border-color-unchecked) !important;
  border-radius: var(--variant-border-radius-unchecked) !important;
}

.sec__divider-inner {
 
}

.new-badge {
  display: none !important;
}

#custom-image-upload {
  font-family: var(--base-font-family);
  width: 100%;
  padding: 10px;
  border: none;
  outline: none;
  color: #333;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.custom-file-upload {
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  padding: 0 20px;
  display: inline-flex;
  align-items: center;
  gap: 5px;
  background-color: var(--upload-file-button-bg-color) !important;
  border-left: 1px solid #ddd;
  color: #fff;
  cursor: pointer;
  border-radius: 3.5px !important;
  transition: background-color 0.3s ease;
}

.new-badge-mobile {
  pointer-events: none;
  position: absolute;
  top: 10px;
  right: 10px;
  display: none !important;
  z-index: 10;
  padding: 5px 10px;
  font-size: 11px;
}

#MainProduct-{{ section.id }} .add-to-cart-hover-button.btn-add-to-cart {
  display: none !important;
}

.custom-file-upload:hover {
  background-color: #e0e0e0;
  color: #000;
}

.product-form__input input[type="radio"] + label:not(.product__color-swatch) {
  background-color: var(--variant-bg-color-unchecked) !important;
  color: var(--variant-text-color-unchecked) !important;
  border-color: var(--variant-border-color-unchecked) !important;
  border-radius: var(--variant-border-radius-unchecked) !important;
}

.discount-badge {
  display: inline-block;
  padding: 3.2px 14px; 
  border-radius: 15px; 
  font-size: 13px; 
  font-weight: 500;
  white-space: nowrap; 
}

.product-detail__price {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
@media (min-width: 1024px){
  sticky-add-cart{
    padding: 14px 24px calc(14px + env(safe-area-inset-bottom));
    border-top-left-radius: 14px; border-top-right-radius: 14px;
  }


  sticky-add-cart .{{ section_width }} > .flex{
    gap: 28px !important;
    align-items: center !important;
  }

  sticky-add-cart .lg\:flex{ display:flex !important; }

  sticky-add-cart .sticky__item-info{
    display:grid !important;
    grid-template-columns: minmax(300px, 440px) minmax(110px, 160px) minmax(220px, 1fr);
    align-items:center; gap:16px !important;
    width: 100%;
  }


  sticky-add-cart .product-detail__variant-picker{
    overflow: visible; min-width: 0;
  }
  sticky-add-cart .product-detail__variant-picker .product-form__input,
  sticky-add-cart .product-detail__variant-picker .select{
    width: 100% !important;
    max-width: none !important;
    border-radius: 9999px !important;     
    padding: 12px 16px !important;
    white-space: nowrap; text-overflow: ellipsis; overflow: hidden;
  }

  sticky-add-cart .product-detail__buy-buttons form{
    display:flex !important; align-items:center; gap:16px;
    width: 100%;
  }


  sticky-add-cart .quantity,                         
  sticky-add-cart .js-qty,                            
  sticky-add-cart .product-form__input--quantity{     
    border-radius: 9999px !important;
    padding: 10px 14px !important;
    min-width: 110px; height: 44px;
    display:flex; align-items:center; justify-content:space-between;
    gap:10px;
    background: var(--quantity-selector-bg);
    border: 1px solid var(--custom-border-color);
  }
  sticky-add-cart .quantity input[type="number"],
  sticky-add-cart .js-qty input[type="number"]{
    border: none; background: transparent; width: 48px; text-align:center;
    outline: none; font: inherit;
  }

  
  sticky-add-cart .product-detail__buy-buttons .btn,
  sticky-add-cart .product-detail__buy-buttons button{
    height: 48px; min-height: 48px;
    border-radius: 9999px !important;
    width: 100%;
  }
}
sticky-add-cart{
  position: fixed;             
  left: 0; right: 0; bottom: 0;
  z-index: 9999;                
  background: var(--sticky-add-cart-bg-color);

  padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
  box-shadow: 0 -6px 20px rgba(0,0,0,.08);
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}


sticky-add-cart .{{ section_width }}{
  max-width: 100%;
}

sticky-add-cart .product-detail__buy-buttons .btn, sticky-add-cart .product-detail__buy-buttons button {
  border-radius: var(--primary-button-border-radius, 20px) !important;
  
}
sticky-add-cart .sticky__item-info{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: center;
  width: 100%;
  min-width: 0; 
}


sticky-add-cart .product-detail__variant-picker{
  min-width: 0;
  overflow: hidden;
}
sticky-add-cart .product-detail__variant-picker .product-form__input,
sticky-add-cart .product-detail__variant-picker .product-form__input > div{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  white-space: nowrap;
}

.js.product-form__input {
  margin-top: 20px !important;
}
sticky-add-cart .product-detail__buy-buttons,
sticky-add-cart .product-detail__buy-buttons form,
sticky-add-cart .product-detail__buy-buttons .btn,
sticky-add-cart .product-detail__buy-buttons button{
  width: 100%;
}
sticky-add-cart .product-detail__variant-picker select,
sticky-add-cart .product-detail__variant-picker .select,
sticky-add-cart .product-detail__variant-picker .product-form__input{
  width: 100%;
  max-width: 40%;
  display: block;
  border-radius: var(--sticky-variant-selector-border-radius, 6px);
  border: 1px solid var(--sticky-select-border-color, #303030);
  background: var(--sticky-select-bg-color, #000);
  color: var(--sticky-select-text-color, #fff);
  padding: 10px 12px;
  font: inherit;
  line-height: 1.2;
  overflow: hidden;
  text-overflow: ellipsis;    
  white-space: nowrap;
}
sticky-add-cart .product-detail__buy-buttons .btn,
sticky-add-cart .product-detail__buy-buttons button{
  min-height: 48px;      
  line-height: 1.1;
  border-radius: 0px
  white-space: nowrap;
}
sticky-add-cart .button_buy-now {

     border-radius: 1px !important;

  }

@media (max-width: 480px){
  sticky-add-cart .sticky__item-info{
    grid-template-columns: 1fr; 
  }
}


.main-product-section{
  padding-bottom: calc(90px + env(safe-area-inset-bottom)); 
}


sticky-add-cart.hidden-mobile{ display: none !important; }
sticky-add-cart.invisible{ visibility: visible !important; opacity: 1 !important; }

</style>

<style>
  /* Mobile Gap: Media ↔ Content Fix */
  @media (max-width: 768px) {
    .main-product .product-detail__information {
      margin-top: var(--info-mt-mobile, 30px) !important; /* Fallback to 30px if var is unset */
      padding-top: 0 !important; /* Prevent extra padding interference */
    }
    
    /* If your theme has a custom class for stacked layout, adjust here */
    .main-product.flex-cols .col-md-remaining {
      margin-top: var(--info-mt-mobile, 30px) !important;
    }
  }
  /* Mobile Gap: Media ↔ Content (Force Apply) */
@media (max-width: 768px) {
  .main-product .product-detail__information,
  .main-product.flex-cols .col-md-remaining {  /* Covers common theme classes */
    margin-top: var(--info-mt-mobile, 30px) !important;  /* Uses your slider var + fallback */
    padding-top: 0 !important;  /* Override any extra padding */
  }
  
  /* If stacked layout breaks it, add this extra selector */
  .product-media + .product-detail__information {
    margin-top: var(--info-mt-mobile, 30px) !important;
  }
}
</style>
<script>
  (function() {
    var productId = {{ product.id | json }};
    var url = 'https://shopifyadminpanel.onrender.com/track-view?product_id=' + productId;
    fetch(url, { method: 'POST' });
  })();
</script>

